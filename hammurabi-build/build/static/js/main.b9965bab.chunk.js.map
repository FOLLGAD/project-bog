{"version":3,"sources":["redux/store.js","localStorage.js","sanitize.js","PickComments/Comment.js","estimate.js","PickComments/FakeComment.js","redux/actions.js","PickComments/SortableComments.js","PickComments/index.js","Question.js","api.js","SelectThread.js","Settings.js","App.js","serviceWorker.js","index.js"],"names":["defaultState","sort","state","localStorage","getItem","obj","prop","recall","comments","question","processed","stage","options","song","theme","assign","overrides","Object","createStore","action","type","delta","val","console","log","setItem","remember","title","foulSpanArray","findWithRegex","regex","contentBlock","callback","text","getText","matchArr","start","exec","index","length","decorators","strategy","forEach","reg","RegExp","component","props","react_default","a","createElement","className","children","Comment","React","Component","constructor","p","super","this","inlineToolbarPlugin","createInlineToolbarPlugin","linkPlugin","createLinkPlugin","plugins","d","convertFromHTML","comment","data","body_html","editor","EditorState","createWithContent","ContentState","createFromBlockArray","contentBlocks","entityMap","handlePress","e","stopPropagation","propagateHtmlChange","setState","html","stateToHTML","getCurrentContent","onChange","propagateEnableChange","enabled","render","_this$props","checked","bind","onKeyDown","onClick","style","color","marginRight","author","score","Math","round","all_awardings","map","award","Fragment","src","icon_url","alt","width","count","lib_default","editorState","InlineToolbar","extProps","draft_js_buttons_lib","LinkButton","Array","isArray","replies","Comment_Comment","key","id","outroLen","transitionLen","FakeComment","dangerouslySetInnerHTML","__html","filter","r","rep","FakeComment_FakeComment","setQuestion","content","nextStage","setComments","setOptions","toClass","classes","keys","join","SortableComments","onDragEnd","result","destination","reorder","source","react_beautiful_dnd_esm","droppableId","provided","droppableProps","ref","innerRef","items","item","draggableId","draggableProps","dragHandleProps","draggable","current","setCurrent","placeholder","connect","setProcessed","tooTall","height","onSubmit","handle","toggleCurrent","handleKeyEvent","fakecomments","createRef","code","goPrev","goNext","indexOf","num","parseInt","replace","componentDidMount","window","addEventListener","componentWillUnmount","removeEventListener","filt","recFilter","commentArr","h","newS","chosen","has","set","add","commentNum","from","currentNum","reqComment","traverseOnce","i","res","toMinSec","seconds","fullMins","floor","restSecs","slice","calculateTotalTime","recAdd","fullHtml","reduce","b","commentTimes","noTags","trim","splits","str","split","words","estimate","estimateComment","estimateCommentHtml","getFull","onCurrentCommentChange","s","componentDidUpdate","clientHeight","newstate","onReorder","end","list","startIndex","endIndex","_result$splice","splice","removed","slicedToArray","selectedComments","display","flexDirection","justifyContent","marginTop","PickComments_SortableComments","PickComments_Comment","disabled","max","min","value","target","src_PickComments_FakeComment","setTitle","preventDefault","defaultValue","fontFamily","apiurl","loadLastSettings","fetch","then","ok","json","j","questionData","commentData","getThread","thread","store","getState","query","object","getThemes","postRender","method","body","JSON","stringify","sortBy","setSort","input","loading","error","fetchThread","mapping","newcomment","catch","err","message","pattern","match","onlythread","loadLast","autoFocus","elem","themes","changeSong","changeTheme","newOptions","chosenTheme","find","t","name","margin","songs","prevStage","SelectThread","Question","src_PickComments_0","src_Settings","fontSize","Boolean","location","hostname","ReactDOM","es","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b9965bab.chunk.js","sourcesContent":["import { createStore } from 'redux'\nimport { recall, remember } from '../localStorage'\n\nconst defaultState = {\n\tsort: recall('sort') || 'top',\n\tcomments: [],\n\tquestion: null,\n\tprocessed: null,\n\tstage: 0,\n\toptions: {\n\t\tsong: null,\n\t\ttheme: null,\n\t}\n}\n\nfunction assign(state, overrides) {\n\treturn Object.assign({}, state, overrides)\n}\n\nfunction store(state = defaultState, action) {\n\tswitch (action.type) {\n\t\tcase 'SET_SORT':\n\t\t\tlet delta = {\n\t\t\t\tsort: action.val,\n\t\t\t}\n\t\t\tconsole.log(action.val)\n\t\t\tremember('sort', delta)\n\t\t\treturn assign(state, delta)\n\t\tcase 'SET_STAGE':\n\t\t\treturn assign(state, {\n\t\t\t\tstage: action.val,\n\t\t\t})\n\t\tcase 'INC_STAGE':\n\t\t\treturn assign(state, {\n\t\t\t\tstage: state.stage + action.val,\n\t\t\t})\n\t\tcase 'SET_COMMENTS':\n\t\t\treturn assign(state, {\n\t\t\t\tcomments: action.val,\n\t\t\t})\n\t\tcase 'SET_PROCESSED':\n\t\t\treturn assign(state, {\n\t\t\t\tprocessed: action.val,\n\t\t\t})\n\t\tcase 'SET_QUESTION':\n\t\t\treturn assign(state, {\n\t\t\t\tquestion: action.val,\n\t\t\t})\n\t\tcase 'SET_TITLE':\n\t\t\tlet question = assign(state.question, { title: action.val })\n\t\t\treturn assign(state, {\n\t\t\t\tquestion: question,\n\t\t\t})\n\t\tcase 'SET_OPTIONS':\n\t\t\treturn assign(state, {\n\t\t\t\toptions: action.val,\n\t\t\t})\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default createStore(store)","export function remember(obj, val) {\n\tif (typeof obj === \"object\") {\n\t\tfor (let prop in obj) {\n\t\t\tlocalStorage.setItem(prop, obj[prop])\n\t\t}\n\t} else {\n\t\tlocalStorage.setItem(obj, val)\n\t}\n}\nexport function recall(state) {\n\tif (typeof state === \"string\") {\n\t\treturn localStorage.getItem(state)\n\t} else {\n\t\tlet obj = {}\n\t\tfor (let prop in state) obj[prop] = localStorage.getItem(prop)\n\t\treturn obj\n\t}\n}","// What the html will display instead\nexport const foulSpanArray = [\n\t/(f)(uck)()/,\n\t/(sh)(it)()/,\n\t/(b)(it)(ch)/,\n\t/(c)(un)(t)/,\n\t/(ni)(gg)(a)/,\n\t/(ni)(gge)(r)/,\n\t/(p)(o)(rn)/,\n\t/((?:\\W|^)d)(ic)(k)/,\n\t/((?:\\W|^)a)(ss)(es)(?!\\w)/,\n\t/((?:\\W|^)a)(ss)(\\W|$)/,\n\t/((?:\\W|^)r)(ap)(e|ist|ing)/,\n\t/((?:\\W|^)c)(u)(m)/,\n\t/((?:\\W|^)t)(i)(ts)/,\n\t/(t)(it)(ties)/,\n\t/(c)(o)(ck[^an])/, // doesnt match 'cockney', 'cockatrice'\n\t/(wh)(or)(e)/,\n\t/(p)(us)(sy)/,\n\t/(s)(e)(x)/,\n\t/(d)(ic)(k)/,\n\t/(ret)(ar)(d)/,\n\t/(a)(ss)(hat|face|head|burger|hole)/,\n\t/((?:\\W|^)a)(n)(al[^oy])/,\n\t/(pe)(n)(is)/,\n\t/(va)(gi)(na)/,\n\t/(dr)(u)(gs)/,\n\t/(mast)(urb)(at)/,\n\t/(dr)(u)(gs)/,\n]","import React from 'react'\nimport { EditorState, ContentState, convertFromHTML } from 'draft-js'\nimport Editor from 'draft-js-plugins-editor'\nimport { stateToHTML } from 'draft-js-export-html'\nimport { foulSpanArray } from '../sanitize'\nimport createLinkPlugin from 'draft-js-anchor-plugin'\nimport createInlineToolbarPlugin from 'draft-js-inline-toolbar-plugin'\nimport { ItalicButton, BoldButton, UnderlineButton } from 'draft-js-buttons'\n\nfunction handleStrategy(contentBlock, callback) {\n\tfoulSpanArray.forEach(reg => {\n\t\tfindWithRegex(new RegExp(reg, 'ig'), contentBlock, callback)\n\t})\n}\n\nfunction editStrategy(contentBlock, callback) {\n\tfindWithRegex(/(?:^|\\W)edit/img, contentBlock, callback)\n}\n\nlet handleSpan = props => {\n\treturn <span className=\"highlight-danger\">{props.children}</span>\n}\n\nlet editSpan = props => {\n\treturn <span className=\"highlight-warn\">{props.children}</span>\n}\n\nfunction findWithRegex(regex, contentBlock, callback) {\n\tconst text = contentBlock.getText()\n\tlet matchArr, start\n\twhile ((matchArr = regex.exec(text)) !== null) {\n\t\tstart = matchArr.index\n\t\tcallback(start, start + matchArr[0].length)\n\t}\n}\n\nlet decorators = [\n\t{\n\t\tstrategy: handleStrategy,\n\t\tcomponent: handleSpan,\n\t},\n\t{\n\t\tstrategy: editStrategy,\n\t\tcomponent: editSpan,\n\t},\n]\n\nclass Comment extends React.Component {\n\tconstructor(p) {\n\t\tsuper(p)\n\n\t\tthis.inlineToolbarPlugin = createInlineToolbarPlugin()\n\t\tthis.linkPlugin = createLinkPlugin()\n\t\tthis.plugins = [\n\t\t\tthis.inlineToolbarPlugin,\n\t\t\tthis.linkPlugin,\n\t\t]\n\n\t\tlet d = convertFromHTML(p.comment.data.body_html)\n\t\tthis.state = { editor: EditorState.createWithContent(ContentState.createFromBlockArray(d.contentBlocks, d.entityMap)) }\n\t}\n\thandlePress(e) {\n\t\te.stopPropagation()\n\t}\n\tpropagateHtmlChange(val) {\n\t\tthis.setState({ editor: val })\n\n\t\tlet html = stateToHTML(this.state.editor.getCurrentContent())\n\t\tthis.props.comment.data.body_html = html\n\n\t\tthis.props.onChange()\n\t}\n\tpropagateEnableChange() {\n\t\tthis.props.comment.enabled = !this.props.comment.enabled\n\t\tthis.props.onChange()\n\t}\n\trender() {\n\t\tlet { comment, onChange } = this.props\n\n\t\treturn (\n\t\t\t<div className=\"Comment\">\n\t\t\t\t<input className=\"left-box\" type=\"checkbox\" checked={comment.enabled} onChange={this.propagateEnableChange.bind(this)} />\n\t\t\t\t<div onKeyDown={this.handlePress}>\n\t\t\t\t\t<div onClick={this.propagateEnableChange.bind(this)}>\n\t\t\t\t\t\t<span style={{ color: \"blue\", marginRight: 5 }}>{comment.data.author}</span>\n\t\t\t\t\t\t<span>{comment.data.score > 1e3 ? Math.round(comment.data.score / 1e2) / 1e1 + 'k' : comment.data.score} points</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{comment.data.all_awardings.map(award => <><img src={award.icon_url} alt=\"award\" width={16} />{award.count > 1 && award.count}</>)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Editor\n\t\t\t\t\t\teditorState={this.state.editor}\n\t\t\t\t\t\tonChange={this.propagateHtmlChange.bind(this)}\n\t\t\t\t\t\tdecorators={decorators}\n\t\t\t\t\t\tplugins={this.plugins}\n\t\t\t\t\t/>\n\t\t\t\t\t<this.inlineToolbarPlugin.InlineToolbar>\n\t\t\t\t\t\t{extProps => <>\n\t\t\t\t\t\t\t<BoldButton {...extProps} />\n\t\t\t\t\t\t\t<ItalicButton {...extProps} />\n\t\t\t\t\t\t\t<UnderlineButton {...extProps} />\n\t\t\t\t\t\t\t<this.linkPlugin.LinkButton {...extProps} />\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</this.inlineToolbarPlugin.InlineToolbar>\n\t\t\t\t\t{Array.isArray(comment.data.replies) && comment.data.replies.map(d => <Comment key={d.data.id} comment={d} onChange={onChange} />)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Comment;","// ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 transition.mkv\n\n// Outro 13.163 s\n// Transition bright 0.843 s\n// Transition 0.741 s\n// Number of splits * X\n// Number of words * Y\n\nlet outroLen = 13.163\nlet transitionLen = 0.741\n\nfunction splitString(str) {\n\treturn str\n\t\t.split(/<br>|(.+?[\\.,?!]+[\"'\\)\\s]+)/g) // eslint-disable-line no-useless-escape\n\t\t.filter(d => d.replace('\\u200B', ' ').trim().length > 0)\n}\n\nexport function getFull(commentTimes) {\n\tlet comments = commentTimes.reduce((a, b) => a + b, 0)\n\treturn comments + outroLen + transitionLen * commentTimes.length\n}\n\nexport function estimateComment(splits, words) {\n\treturn splits * 0.38152203637725923 + words * 0.2767486833003453\n}\n\nexport function estimateCommentHtml(comment) {\n\tlet noTags = comment.replace(/<.+?>/g, '').trim()\n\tlet splits = splitString(noTags).length\n\tlet words = noTags.replace(/<.+?>/g, '').split(/\\s+/g).length\n\tlet estimate = estimateComment(splits, words)\n\n\treturn {\n\t\twords,\n\t\tsplits,\n\t\testimate,\n\t}\n}","import React from 'react'\n\nimport './FakeComment.css'\n\nclass FakeComment extends React.Component {\n\trender() {\n\t\tlet { comment } = this.props\n\t\treturn (\n\t\t\t<div className=\"FakeComment\">\n\t\t\t\t<div dangerouslySetInnerHTML={{ __html: comment.data.body_html }}>\n\t\t\t\t</div>\n\t\t\t\t{comment.data.replies &&\n\t\t\t\t\tcomment.data.replies.filter &&\n\t\t\t\t\tcomment.data.replies\n\t\t\t\t\t\t.filter(r => r.enabled)\n\t\t\t\t\t\t.map(rep => <FakeComment key={rep.data.id} comment={rep} />)}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default FakeComment;","export const setProcessed = content => ({\n\ttype: 'SET_PROCESSED',\n\tval: content,\n})\nexport const setQuestion = content => ({\n\ttype: 'SET_QUESTION',\n\tval: content,\n})\nexport const setStage = content => ({\n\ttype: 'SET_STAGE',\n\tval: content,\n})\nexport const nextStage = () => ({\n\ttype: 'INC_STAGE',\n\tval: 1,\n})\nexport const prevStage = () => ({\n\ttype: 'INC_STAGE',\n\tval: -1,\n})\nexport const setComments = content => ({\n\ttype: 'SET_COMMENTS',\n\tval: content,\n})\nexport const setOptions = content => ({\n\ttype: 'SET_OPTIONS',\n\tval: content,\n})\nexport const setTitle = content => ({\n\ttype: 'SET_TITLE',\n\tval: content,\n})\nexport const setSort = content => ({\n\ttype: 'SET_SORT',\n\tval: content,\n})","import React from 'react'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\n\nlet toClass = classes => Object.keys(classes).filter(d => classes[d]).join(' ')\n\nclass SortableComments extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.onDragEnd = this.onDragEnd.bind(this)\n\t}\n\tonDragEnd(result) {\n\t\tif (!result.destination) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.props.reorder(result.source.index, result.destination.index)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<DragDropContext onDragEnd={this.onDragEnd}>\n\t\t\t\t<Droppable droppableId=\"droppable\">\n\t\t\t\t\t{provided => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\tclassName=\"draggable-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.props.items.map((item, index) => (\n\t\t\t\t\t\t\t\t<Draggable key={item.data.id} draggableId={item.data.id} index={index}>\n\t\t\t\t\t\t\t\t\t{provided => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.dragHandleProps}\n\t\t\t\t\t\t\t\t\t\t\tclassName={toClass({\n\t\t\t\t\t\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent: this.props.current === index,\n\t\t\t\t\t\t\t\t\t\t\t\tenabled: item.enabled,\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.props.setCurrent(index)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Droppable>\n\t\t\t</DragDropContext>\n\t\t)\n\t}\n}\n\nexport default SortableComments","import React from 'react'\nimport Comment from './Comment'\nimport './index.css'\nimport { estimateCommentHtml, getFull } from '../estimate'\nimport FakeComment from './FakeComment';\nimport { connect } from 'react-redux'\nimport { setProcessed, setComments, nextStage } from '../redux/actions'\nimport SortableComments from './SortableComments'\n\nfunction recFilter(commentArr) {\n\tlet news = commentArr.filter(h => h.enabled)\n\t\t.map(d => d.data)\n\t\t.map(d => {\n\t\t\tlet newS = Object.assign({}, d)\n\t\t\tif (newS.replies) {\n\t\t\t\tnewS.replies = recFilter(newS.replies)\n\t\t\t}\n\t\t\treturn newS\n\t\t})\n\treturn news\n}\n\nclass PickComments extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { current: 0, tooTall: false, height: 0 }\n\t\tthis.onSubmit = this.onSubmit.bind(this)\n\t\tthis.handle = this.handle.bind(this)\n\t\tthis.toggleCurrent = this.toggleCurrent.bind(this)\n\t\tthis.handleKeyEvent = this.handleKeyEvent.bind(this)\n\n\t\tthis.fakecomments = React.createRef()\n\t}\n\thandleKeyEvent(e) {\n\t\tswitch (e.code) {\n\t\t\tcase \"KeyA\":\n\t\t\tcase \"ArrowLeft\":\n\t\t\t\tthis.goPrev()\n\t\t\t\tbreak;\n\t\t\tcase \"KeyD\":\n\t\t\tcase \"ArrowRight\":\n\t\t\t\tthis.goNext()\n\t\t\t\tbreak\n\t\t\tcase \"Enter\":\n\t\t\t\tthis.onSubmit()\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tif (e.code.indexOf('Digit') === 0) {\n\t\t\t\t\tlet num = parseInt(e.code.replace('Digit', ''))\n\t\t\t\t\tthis.toggleCurrent(num)\n\t\t\t\t}\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeyEvent)\n\t}\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeyEvent)\n\t}\n\tgoPrev() {\n\t\tif (this.state.current > 0) {\n\t\t\tthis.setState({ current: this.state.current - 1 })\n\t\t}\n\n\t}\n\tgoNext() {\n\t\tif (this.state.current < this.props.comments.length - 1) {\n\t\t\tthis.setState({ current: this.state.current + 1 })\n\t\t}\n\t}\n\tonSubmit() {\n\t\tlet filt = recFilter(this.props.comments)\n\n\t\tthis.props.setProcessed(filt)\n\t\tthis.props.nextStage()\n\t}\n\thandle(id) {\n\t\tif (this.state.chosen.has(id)) {\n\t\t\tthis.state.chosen.set(id)\n\t\t} else {\n\t\t\tthis.state.chosen.add(id)\n\t\t}\n\t\tthis.setState({\n\t\t\tchosen: this.state.chosen,\n\t\t})\n\t}\n\ttoggleCurrent(commentNum) {\n\t\tlet set = Array.from(this.props.comments)\n\n\t\tif (commentNum) {\n\t\t\tlet currentNum = 0\n\n\t\t\t// Used for checking the N:th visible comment in the tree\n\t\t\tfunction traverseOnce(comment) {\n\t\t\t\tcurrentNum++\n\t\t\t\tif (currentNum === commentNum) {\n\t\t\t\t\treturn comment\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\t\t\tfor (let i = 0; i < comment.data.replies.length; i++) {\n\t\t\t\t\t\tconst element = comment.data.replies[i];\n\t\t\t\t\t\tlet res = traverseOnce(element)\n\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\treturn res\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet reqComment = traverseOnce(set[this.state.current])\n\t\t\tif (!reqComment) {\n\t\t\t\treturn // Could not find a comment with inputted number\n\t\t\t}\n\t\t\treqComment.enabled = !reqComment.enabled\n\t\t} else {\n\t\t\tset[this.state.current].enabled = !set[this.state.current].enabled\n\t\t}\n\n\t\tthis.props.setComments(set)\n\t}\n\ttoMinSec(seconds) {\n\t\tlet fullMins = Math.floor(seconds / 60) // No. full mins\n\t\tlet restSecs = ('00' + Math.round(seconds - 60 * fullMins)).slice(-2)\n\t\tlet mins = ('00' + fullMins).slice(-2)\n\t\treturn `${mins}:${restSecs}`\n\t}\n\tcalculateTotalTime() {\n\t\tlet recAdd = comment => {\n\t\t\tlet fullHtml = comment.data.body_html\n\n\t\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\t\tfullHtml += comment.data.replies\n\t\t\t\t\t.filter(r => r.enabled)\n\t\t\t\t\t.map(recAdd)\n\t\t\t\t\t.reduce((a, b) => a + b, '')\n\t\t\t}\n\n\t\t\treturn fullHtml\n\t\t}\n\t\tlet commentTimes = this.props.comments\n\t\t\t.filter(d => d.enabled)\n\t\t\t.map(recAdd)\n\t\t\t.map(b => estimateCommentHtml(b).estimate)\n\n\t\treturn Math.round(1e2 * getFull(commentTimes)) / 1e2\n\t}\n\tonCurrentCommentChange(comment) {\n\t\tlet s = Array.from(this.props.comments)\n\t\tthis.props.setComments(s)\n\t}\n\tcomponentDidUpdate() {\n\t\tlet height = this.fakecomments.current.clientHeight\n\t\tlet max = 1080 / 2.4\n\t\tlet newstate = {}\n\t\tlet s = false\n\t\tif (this.state.height !== height) {\n\t\t\tnewstate.height = height\n\t\t\ts = true\n\t\t}\n\t\tif (this.state.tooTall !== (height > max)) {\n\t\t\tnewstate.tooTall = height > max\n\t\t\ts = true\n\t\t}\n\t\tif (s) {\n\t\t\tthis.setState(newstate)\n\t\t}\n\t}\n\tonReorder(start, end) {\n\t\tconst reorder = (list, startIndex, endIndex) => {\n\t\t\tconst result = Array.from(list)\n\t\t\tconst [removed] = result.splice(startIndex, 1)\n\t\t\tresult.splice(endIndex, 0, removed)\n\n\t\t\treturn result\n\t\t}\n\n\t\tthis.props.setComments(reorder(this.props.comments, start, end))\n\n\t\tlet current = this.state.current\n\n\t\tif (current === start) {\n\t\t\tthis.setState({ current: end })\n\t\t} else if (current < start && current > end) {\n\t\t\tthis.setState({ current: current + 1 })\n\t\t} else if (current > start && current < end) {\n\t\t\tthis.setState({ current: current - 1 })\n\t\t}\n\t}\n\trender() {\n\t\tlet comment = this.props.comments[this.state.current]\n\t\tlet selectedComments = this.props.comments.filter(d => d.enabled).length\n\t\treturn (\n\t\t\t<div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'center', marginTop: 5 }}>\n\t\t\t\t<SortableComments setCurrent={i => this.setState({ current: i })} current={this.state.current} reorder={this.onReorder.bind(this)} items={this.props.comments} />\n\t\t\t\t<div className=\"Comments\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className=\"top-comment\">\n\t\t\t\t\t\t\t<Comment key={comment.data.id} comment={comment} onChange={this.onCurrentCommentChange.bind(this)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"options\">\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" checked={comment.enabled} onChange={() => this.toggleCurrent.bind(this)(1)} />\n\t\t\t\t\t\t\t\tEnable\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<div className={this.state.tooTall ? 'tooTall' : ''}>Height: {this.state.height} (max=450)</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"controls\">\n\t\t\t\t\t\t\t<button disabled={this.state.current <= 0} onClick={this.goPrev.bind(this)}>Prev</button>\n\t\t\t\t\t\t\t<input style={{ width: 60 }} type=\"number\" max={this.props.comments.length} min={1} value={this.state.current + 1} onChange={e => this.setState({ current: Math.max(0, parseInt(e.target.value) - 1 || 0) })} />\n\t\t\t\t\t\t\t<button disabled={this.state.current > this.props.comments.length} onClick={this.goNext.bind(this)}>Next</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"controls\">\n\t\t\t\t\t\t\t<span>Total time: {this.toMinSec(this.calculateTotalTime())}, {selectedComments} {selectedComments === 1 ? 'comment' : 'comments'} selected</span>\n\t\t\t\t\t\t\t<button onClick={this.onSubmit}>Finish</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"fake-container\" ref={this.fakecomments}>\n\t\t\t\t\t\t<FakeComment comment={comment} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default connect(state =>\n\t({\n\t\tcomments: state.comments,\n\t}),\n\t{\n\t\tsetProcessed,\n\t\tsetComments,\n\t\tnextStage\n\t}\n)(PickComments);","import React from 'react';\nimport { connect } from 'react-redux';\nimport { setTitle, nextStage } from './redux/actions';\n\nclass PickComments extends React.Component {\n\tonSubmit(e) {\n\t\te.preventDefault()\n\t\tthis.props.nextStage()\n\t}\n\tonChange(e) {\n\t\tthis.props.setTitle(e.target.value)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"Question\">\n\t\t\t\t<h1>Edit question</h1>\n\t\t\t\t<form onSubmit={this.onSubmit.bind(this)}>\n\t\t\t\t\t<textarea defaultValue={this.props.title} className=\"question-title\" onChange={this.onChange.bind(this)} style={{ width: 500, fontFamily: 'Noto Sans' }} />\n\t\t\t\t\t<br />\n\t\t\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttitle: state.question.title,\n}), { setTitle, nextStage })(PickComments);","import store from './redux/store'\nimport { setQuestion, setComments, setOptions } from './redux/actions';\n\nlet apiurl = process.env.NODE_ENV ? 'http://localhost:5566/api' : '/api' // use current web page as host\n\nfunction toQueryString(object) {\n\treturn Object.keys(object)\n\t\t.map(key => {\n\t\t\tlet val = object[key]\n\t\t\tif (val === true) {\n\t\t\t\treturn key\n\t\t\t} else if (val != null) {\n\t\t\t\treturn key + '=' + val\n\t\t\t}\n\t\t\treturn null\n\t\t})\n\t\t.filter(d => d != null)\n\t\t.join('&')\n}\n\nexport let loadLastSettings = function () {\n\treturn fetch(apiurl + '/get-last-edit/')\n\t\t.then(r => {\n\t\t\tif (r.ok) {\n\t\t\t\treturn r.json()\n\t\t\t} else {\n\t\t\t\treturn r.json()\n\t\t\t\t\t.then(j => {\n\t\t\t\t\t\tthrow j\n\t\t\t\t\t})\n\t\t\t}\n\t\t})\n\t\t.then(({ questionData, commentData, options }) => {\n\t\t\tsetQuestion(questionData)\n\t\t\tsetComments(commentData)\n\t\t\tsetOptions(options)\n\t\t})\n}\n\nexport let getThread = function (thread) {\n\tlet state = store.getState()\n\tlet query = toQueryString({ sort: state.sort })\n\n\treturn fetch(apiurl + '/get-thread/' + thread + '?' + query)\n\t\t.then(r => {\n\t\t\tif (r.ok) {\n\t\t\t\treturn r.json()\n\t\t\t} else {\n\t\t\t\treturn r.json()\n\t\t\t\t\t.then(j => {\n\t\t\t\t\t\tthrow j\n\t\t\t\t\t})\n\t\t\t}\n\t\t})\n}\n\nexport let getSongs = function () {\n\treturn fetch(apiurl + '/get-songs')\n\t\t.then(r => r.json())\n}\n\nexport let getThemes = function () {\n\treturn fetch(apiurl + '/get-themes')\n\t\t.then(r => r.json())\n}\n\nexport let postRender = function (questionData, commentData, options) {\n\treturn fetch(apiurl + '/render-video', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({\n\t\t\tquestionData,\n\t\t\tcommentData,\n\t\t\toptions,\n\t\t})\n\t})\n\t\t.then(r => r.json())\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport { getThread, loadLastSettings } from './api';\nimport { nextStage, setComments, setQuestion, setSort } from './redux/actions';\n\nclass Thread extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tinput: '',\n\t\t\tloading: null,\n\t\t\terror: null,\n\t\t}\n\t\tthis.fetchThread = this.fetchThread.bind(this)\n\t\tthis.onSubmit = this.onSubmit.bind(this)\n\t\tthis.handle = this.handle.bind(this)\n\t}\n\tfetchThread(thread) {\n\t\tthis.setState({ error: null, loading: true })\n\n\t\tgetThread(thread)\n\t\t\t.then(json => {\n\t\t\t\tlet mapping = comment => {\n\t\t\t\t\tlet newcomment = Object.assign({}, comment)\n\n\t\t\t\t\tif (Array.isArray(newcomment.replies)) {\n\t\t\t\t\t\tnewcomment.replies = newcomment.replies.map(mapping)\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tenabled: false,\n\t\t\t\t\t\tdata: newcomment\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet comments = json.commentData.map(mapping)\n\n\t\t\t\tthis.props.setQuestion(json.questionData)\n\t\t\t\tthis.props.setComments(comments)\n\t\t\t\tthis.props.nextStage()\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error(err)\n\t\t\t\tthis.setState({ error: err.message, loading: false })\n\t\t\t})\n\t}\n\tonSubmit(e) {\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\n\t\tlet thread = this.state.input\n\n\t\tif (thread.indexOf('comments') !== -1) {\n\t\t\tlet pattern = /\\/comments\\/([\\w]+)/\n\t\t\tlet match = thread.match(pattern)\n\n\t\t\tif (match) {\n\t\t\t\tthread = match[1]\n\t\t\t}\n\t\t}\n\n\t\tlet onlythread = thread.replace(/[^\\w\\d]/g, '')\n\n\t\tthis.fetchThread(onlythread)\n\t}\n\tloadLast() {\n\t\tloadLastSettings().then(d => {\n\t\t\tthis.props.nextStage()\n\t\t})\n\t}\n\thandle(e) {\n\t\tthis.setState({ input: e.target.value })\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"def-container\">\n\t\t\t\t<h1>Choose a thread</h1>\n\t\t\t\t<div>\n\t\t\t\t\t<form onSubmit={this.onSubmit}>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<input className=\"full\" value={this.state.input} onChange={this.handle} placeholder=\"Put thread ID or url\" autoFocus />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<select defaultValue={this.props.sortBy} onChange={elem => elem.target.value && this.props.setSort(elem.target.value)} className=\"full\">\n\t\t\t\t\t\t\t\t<option value=\"top\">Top</option>\n\t\t\t\t\t\t\t\t<option value=\"best\">Best</option>\n\t\t\t\t\t\t\t\t<option value=\"new\">New</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<button className=\"big\" type=\"submit\">OK</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t\t{/* <div>\n\t\t\t\t\t\t<button onClick={this.loadLast.bind(this)}>Load last settings</button>\n\t\t\t\t\t</div> */}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{this.state.loading && <p className=\"loader\">Loading...</p>}\n\t\t\t\t\t{this.state.error && <p style={{ color: 'red' }}>{this.state.error}</p>}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\tsortBy: state.sortBy,\n}), {\n\tsetComments,\n\tsetQuestion,\n\tnextStage,\n\tsetSort,\n})(Thread);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { getThemes, postRender } from './api';\nimport { setOptions, nextStage } from './redux/actions'\n\nclass Settings extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { themes: [] }\n\n\t\tgetThemes()\n\t\t\t.then(themes => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tthemes,\n\t\t\t\t})\n\t\t\t})\n\n\t\tthis.onSubmit = this.onSubmit.bind(this)\n\t\tthis.changeSong = this.changeSong.bind(this)\n\t\tthis.changeTheme = this.changeTheme.bind(this)\n\t}\n\tonSubmit(e) {\n\t\te.preventDefault()\n\n\t\tpostRender(this.props.question, this.props.processed, this.props.options)\n\n\t\tthis.props.nextStage()\n\t}\n\tchangeSong(e) {\n\t\tlet newOptions = {\n\t\t\tsong: e.target.value,\n\t\t\ttheme: this.props.options.theme,\n\t\t}\n\t\tthis.props.setOptions(newOptions)\n\t}\n\tchangeTheme(e) {\n\t\tlet newOptions = {\n\t\t\tsong: null,\n\t\t\ttheme: e.target.value,\n\t\t}\n\t\tthis.props.setOptions(newOptions)\n\t}\n\trender() {\n\t\tlet chosenTheme = this.state.themes.find(t => t.name === this.props.options.theme)\n\n\t\treturn (\n\t\t\t<div className=\"Thread\">\n\t\t\t\t<form onSubmit={this.onSubmit}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<select value={this.props.options.theme || ''} style={{ display: 'block', margin: '0 auto' }} onChange={this.changeTheme}>\n\t\t\t\t\t\t\t<option value={''}>Select a theme</option>\n\t\t\t\t\t\t\t{this.state.themes.map(theme => <option value={theme.name} key={theme.name}>{theme.name}</option>)}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<select value={this.props.options.song || ''} disabled={!this.props.options.theme} style={{ display: 'block', margin: '10px auto' }} onChange={this.changeSong}>\n\t\t\t\t\t\t\t<option value={''}>Select a song</option>\n\t\t\t\t\t\t\t{chosenTheme &&\n\t\t\t\t\t\t\t\tchosenTheme.songs.map(song => <option value={song} key={song}>{song}</option>)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button type=\"submit\" disabled={!this.props.options.theme || !this.props.options.song}>Send to the slaughterhouse</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\tquestion: state.question,\n\tprocessed: state.processed,\n\toptions: state.options,\n}), { setOptions, nextStage })(Settings);","import React from 'react';\nimport PickComments from './PickComments/index';\nimport Question from './Question';\nimport SelectThread from './SelectThread';\nimport Settings from './Settings';\nimport { connect } from 'react-redux'\nimport { prevStage, nextStage } from './redux/actions'\nimport './App.css';\nimport 'draft-js-inline-toolbar-plugin/lib/plugin.css'\n\nclass App extends React.Component {\n\trender() {\n\t\treturn <div className=\"App\">\n\t\t\t{this.props.stage === 0 ?\n\t\t\t\t<SelectThread /> :\n\t\t\t\tthis.props.stage === 1 ?\n\t\t\t\t\t<Question /> :\n\t\t\t\t\tthis.props.stage === 2 ?\n\t\t\t\t\t\t<PickComments /> :\n\t\t\t\t\t\tthis.props.stage === 3 ?\n\t\t\t\t\t\t\t<Settings /> :\n\t\t\t\t\t\t\tthis.props.stage === 4 ?\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h1>rendering atm bro</h1>\n\t\t\t\t\t\t\t\t\t<p>You may close this tab</p>\n\t\t\t\t\t\t\t\t</div> :\n\t\t\t\t\t\t\t\tnull\n\t\t\t}\n\t\t\t<br />\n\t\t\t{this.props.stage !== 0 &&\n\t\t\t\t<div>\n\t\t\t\t\t<button style={{ fontSize: 12, marginTop: '1rem' }} onClick={this.props.prevStage}>GO BACK!</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</div>\n\t}\n}\n\nlet mapStateToProps = store => {\n\treturn {\n\t\tquestion: store.question,\n\t\tprocessed: store.processed,\n\t\tstage: store.stage,\n\t\toptions: store.options,\n\t}\n}\n\nexport default connect(mapStateToProps, {\n\n\n\tprevStage,\n\tnextStage,\n\n})(App);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport store from './redux/store'\nimport { Provider } from 'react-redux'\n\nimport App from './App';\n\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App />\n\t</Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}