(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{359:function(e,t,a){e.exports=a(697)},476:function(e,t,a){},617:function(e,t,a){},618:function(e,t,a){},696:function(e,t,a){},697:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(29),l=a.n(r),i=a(14),o=a(56),c=(a(368),a(116),a(15)),h=a(706),m=a(723),d=a(721),u=a(722),p=a(718),g=a(711);const E=e=>({type:"SET_QUESTION",val:e}),b=e=>({type:"SET_COMMENTS",val:e});var C=a(319),v=a(49);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}const y={comments:[],question:null,processed:null,song:null,theme:null,credits:null,themes:[],videos:[],songs:[],user:{},users:[],loggedIn:"true"===localStorage.getItem("loggedIn")};var S=Object(v.d)(function(e=y,t){switch(t.type){case"RESET_VIDEOSTATE":return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach(function(t){Object(C.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{question:null,processed:null,comments:[],theme:null,song:null});case"SET_COMMENTS":return Object.assign({},e,{comments:t.val});case"SET_USER":return Object.assign({},e,{user:t.val});case"SET_USERS":return Object.assign({},e,{users:t.val});case"SET_PROCESSED":return Object.assign({},e,{processed:t.val});case"SET_QUESTION":return Object.assign({},e,{question:t.val});case"SET_TITLE":{let a=Object.assign({},e.question,{title:t.val});return Object.assign({},e,{question:a})}case"SET_SELFTEXT":{let a=Object.assign({},e.question,{selftext_html:t.val});return Object.assign({},e,{question:a})}case"SET_INCLUDE_SELFTEXT":{let a=Object.assign({},e.question,{includeSelftext:t.val});return Object.assign({},e,{question:a})}case"SET_THEME":return Object.assign({},e,{theme:t.val});case"SET_SONG":return Object.assign({},e,{song:t.val});case"SET_CREDITS":return Object.assign({},e,{credits:t.val});case"SET_THEMES":return Object.assign({},e,{themes:t.val});case"SET_SONGS":return Object.assign({},e,{songs:t.val});case"SET_VIDEOS":return Object.assign({},e,{videos:t.val});case"LOGIN":return localStorage.setItem("loggedIn","true"),Object.assign({},e,{loggedIn:!0});case"LOGOUT":return localStorage.removeItem("loggedIn"),Object.assign({},e,{loggedIn:!1});default:return e}});const w=(e,t={})=>("string"===typeof e&&(e="/api"+e),t.method&&"GET"!==t.method&&(t.headers||(t.headers={"Content-Type":"application/json"})),t.credentials="include",fetch(e,t).then(e=>e.ok?e.json():(401===e.status&&S.dispatch({type:"LOGOUT"}),e.json().then(e=>{throw e&&e.error?o.b.error(e.error):o.b.error("Something went wrong, try again later"),console.error(e),e.error}))));let O=function(){return w("/admin/users").then(e=>{S.dispatch((e=>({type:"SET_USERS",val:e}))(e))})},T=function(e){return w("/admin/users",{method:"POST",body:JSON.stringify(e)})},x=function(e,t){return w(`/admin/users/${e}/set-multiplier`,{method:"PUT",body:JSON.stringify({multiplier:t})})},k=function(e,t){return w(`/admin/users/${e}/change-password`,{method:"PUT",body:JSON.stringify({password:t})})},I=function(e,t){return w(`/admin/users/${e}/add-credits`,{method:"PUT",body:JSON.stringify({quantity:t})})},j=function(){return w("/me").then(e=>{S.dispatch((e=>({type:"SET_USER",val:e}))(e))})},P=function(e,t){return w("/me/change-password",{method:"POST",body:{passwordCurrent:e,passwordNew:t}})},_=function(){return w("/credits").then(e=>(S.dispatch((e=>({type:"SET_CREDITS",val:e}))(e.credits)),e))},D=function(e){return w("/credits/check-price",{method:"POST",body:JSON.stringify({quantity:e})})},N=function(e){return w("/credits/buy",{method:"POST",body:JSON.stringify({quantity:e})})},M=function(){return w("/songs").then(e=>(S.dispatch((e=>({type:"SET_SONGS",val:e}))(e)),e))},A=function(e){return w("/songs",{method:"POST",body:e,headers:{}}).then(e=>(M(),e))},U=function(e){return w("/songs/"+e,{method:"DELETE"})},B=function(e,t){return w(`/thread/${e}?sort=${t}`).then(e=>{let t=e=>{let a=Object.assign({},e);return Array.isArray(a.replies)&&(a.replies=a.replies.map(t)),{enabled:!1,data:a}},a=e[1].map(t);return S.dispatch(E(e[0])),S.dispatch(b(a)),e})},q=function(){return w("/themes").then(e=>(S.dispatch((e=>({type:"SET_THEMES",val:e}))(e)),e))},R=function(e){return w("/themes/"+e)},L=function(e){return w("/themes",{method:"POST",body:JSON.stringify(e)})},F=function(e,t){return w("/themes/"+e,{method:"PUT",body:JSON.stringify(t)})},G=function(e,t){return w("/themes/"+e+"/files",{method:"POST",body:t,headers:{}})},W=function(e){return w("/themes/"+e,{method:"DELETE"})},z=function(e,t={intro:!1,transition:!1,outro:!1}){return w("/themes/"+e+"/files",{method:"DELETE",body:JSON.stringify(t)})},H=function(e){return w("/long-poll-video/"+e)},J=function(e,t){return w("/preview",{method:"POST",body:JSON.stringify({options:{theme:e,song:t}})})},$=function(){let e=S.getState(),t=e.question,a=e.processed,n=e.theme,s=e.song;return t.includeSelftext||delete t.selftext_html,w("/videos",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({questionData:t,commentData:a,options:{theme:n,song:s}})})},V=function(e){let t=e.questionData,a=e.commentData,n=e.options;return t.includeSelftext||delete t.selftext_html,w("/videos",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({questionData:t,commentData:a,options:n})})};const Q=function(){return w("/videos").then(e=>(S.dispatch((e=>({type:"SET_VIDEOS",val:e}))(e)),e))};let K=function(e,t){return w("/auth",{headers:new Headers({authorization:(a=e,n=t,`Basic ${btoa(a+":"+n)}`)}),method:"POST"}).then(e=>(S.dispatch({type:"LOGIN"}),e));var a,n},X=function(e,t){return w("/register",{body:JSON.stringify({email:e,password:t}),method:"POST"})},Y=function(){return w("/logout").then(e=>{S.dispatch({type:"LOGOUT"})})};var Z=a(705);var ee=Object(i.b)(e=>({credits:e.credits}))(class extends s.a.Component{constructor(...e){super(...e),this.handleChange=((e,{name:t,value:a})=>this.setState({[t]:a}))}componentDidMount(){_()}render(){return s.a.createElement(d.a,{textAlign:"center",secondary:!0},s.a.createElement(u.a,{size:"huge"},s.a.createElement(u.a.Subheader,null,"Your Credits"),s.a.createElement(u.a.Content,null,null!=this.props.credits?this.props.credits:s.a.createElement(Z.a,{active:!0}))))}}),te=a(720),ae=a(716);var ne=Object(i.b)(e=>({user:e.user}))(class extends s.a.Component{render(){return s.a.createElement(te.a,null,s.a.createElement(te.a.Item,{header:!0},"Reddit Video Maker"),s.a.createElement(te.a.Item,{as:c.a,to:"/"},"Dashboard"),s.a.createElement(te.a.Item,{as:c.a,to:"/support"},"Contact us"),s.a.createElement(te.a.Menu,{position:"right"},s.a.createElement(ae.a,{item:!0,text:"Account"},s.a.createElement(ae.a.Menu,null,s.a.createElement(ae.a.Item,{as:c.a,to:"/account"},"My Account"),this.props.user.isAdmin&&s.a.createElement(ae.a.Item,{as:c.a,to:"/admin"},"Admin"),s.a.createElement(ae.a.Item,{as:c.a,to:"/logout"},"Log out")))))}});let se="pk_live_Dh8aRBNWH73HfNvlOVb4cOJE00eX9d9CAv";var re=Object(i.b)(e=>({credits:e.credits}))(class extends s.a.Component{constructor(...e){super(...e),this.state={credits:10,custom:!1,currentPrice:null,stripe:null,timeout:null,perCredit:null},this.handleChange=((e,{name:t,value:a})=>this.setState({[t]:a})),this.onPurchase=(async()=>{let e=(await N(this.state.credits)).session;this.state.stripe.redirectToCheckout({sessionId:e.id}).then(e=>{console.log(e)})}),this.changeQuantity=((e,{value:t})=>{this.setState({credits:t}),null!==this.state.timeout&&clearTimeout(this.state.timeout);let a=setTimeout(async()=>{let e=(await D(t)).total;this.setState({currentPrice:e,perCredit:e/t,timeout:null})},200);this.setState({timeout:a})})}componentDidMount(){this.setState({stripe:window.Stripe(se)}),this.changeQuantity(null,{value:this.state.credits})}render(){return s.a.createElement(h.a,null,s.a.createElement(ne,null),s.a.createElement(ee,null),s.a.createElement(m.a,null,s.a.createElement(m.a.Column,null,s.a.createElement(d.a,null,s.a.createElement(u.a,null,"Buy credits"),s.a.createElement(p.a,null,"Credits are a one-time purchase. We do not save your payment information after your purchase."),s.a.createElement("p",null,"One credit can be used to create one video."),s.a.createElement(g.a,null,s.a.createElement(g.a.Radio,{name:"credits",label:"10 Credits",value:10,checked:10===this.state.credits,onChange:this.changeQuantity}),s.a.createElement(g.a.Radio,{name:"credits",label:"25 Credits",value:25,checked:25===this.state.credits,onChange:this.changeQuantity}),s.a.createElement(g.a.Radio,{name:"credits",label:"50 Credits",value:50,checked:50===this.state.credits,onChange:this.changeQuantity}),s.a.createElement(g.a.Radio,{name:"credits",label:"100 Credits",value:100,checked:100===this.state.credits,onChange:this.changeQuantity}),s.a.createElement(g.a.Input,{name:"credits",label:"Custom amount",value:this.state.credits,onChange:this.changeQuantity,type:"number",min:1}),s.a.createElement(u.a,null,s.a.createElement(u.a.Content,null,"\u20ac",this.state.currentPrice),s.a.createElement(u.a.Subheader,null,"\u20ac",Math.round(100*this.state.perCredit)/100,"/Credit")),s.a.createElement(g.a.Button,{onClick:this.onPurchase,size:"large"},"Buy"))))))}}),le=a(708),ie=a(698),oe=a(717),ce=a(58),he=a(707);var me=class extends s.a.Component{render(){let e=this.props.buttonOnly,t=s.a.createElement(ie.a,{icon:!this.props.label,style:{position:"relative"},onClick:()=>this.fileInput.click()},s.a.createElement("input",{name:this.props.name,type:"file",accept:this.props.accept||null,ref:e=>this.fileInput=e,style:{display:"none"},onChange:this.props.onChange}),s.a.createElement(ce.a,{name:this.props.icon||"file",size:this.props.size}),this.props.label&&this.props.label);return e?t:s.a.createElement(he.a,Object.assign({},this.props,{placeholder:this.props.placeholder||"No file",value:this.props.file?this.props.file.name:"",label:t,labelPosition:"left",readOnly:!0,size:this.props.size,onClick:()=>this.fileInput.click()}))}};a(476);var de=Object(i.b)(e=>({songs:e.songs}))(class extends s.a.Component{constructor(...e){super(...e),this.uploadSong=(async e=>{let t=e.target.files[0],a=new FormData;a.append("song",t),await A(a)}),this.deleteSong=(async e=>{await U(e._id),M()}),this.handleChange=((e,{name:t,value:a})=>this.setState({[t]:a})),this.handleFileChange=((e,{name:t})=>this.setState({[t]:e.target.files[0]}))}componentDidMount(){M()}render(){return s.a.createElement(h.a,{textAlign:"left"},s.a.createElement(oe.a,{relaxed:!0,verticalAlign:"middle"},this.props.songs?this.props.songs.map(e=>s.a.createElement(oe.a.Item,{className:"song-item",key:e._id},s.a.createElement(oe.a.Content,{className:"song-icon",floated:"right",as:"a",onClick:()=>this.deleteSong(e),title:"Delete song"},s.a.createElement(ce.a,{name:"delete"})),s.a.createElement(oe.a.Content,null,s.a.createElement(oe.a.Header,null,e.file.origname)))):s.a.createElement(Z.a,{active:!0})),s.a.createElement(le.a,null),s.a.createElement(me,{icon:"music",accept:"audio/*",buttonOnly:!0,name:"song",label:"Upload song",onChange:this.uploadSong}))}}),ue=a(714);var pe=Object(i.b)(e=>({themes:e.themes}))(class extends s.a.Component{constructor(...e){super(...e),this.createTheme=(async()=>{const e=(await L({name:this.state.name})).theme;Object(c.d)(`/themes/${e}`)}),this.handleChange=((e,{name:t,value:a})=>this.setState({[t]:a}))}componentDidMount(){q()}render(){return s.a.createElement(h.a,{textAlign:"left"},s.a.createElement(oe.a,{selection:!0},this.props.themes?this.props.themes.length>0?this.props.themes.map(e=>s.a.createElement(oe.a.Item,{key:e._id,onClick:()=>Object(c.d)("/themes/"+e._id)},s.a.createElement(oe.a.Content,null,s.a.createElement(oe.a.Header,null,e.name)))):s.a.createElement("p",null,'You need to create a theme to get started. Click "New theme" below'):s.a.createElement(Z.a,{active:!0})),s.a.createElement(le.a,null),s.a.createElement(ue.a,{trigger:s.a.createElement(ie.a,null,"New theme"),on:"click",position:"bottom center"},s.a.createElement(h.a,{fluid:!0,textAlign:"center"},s.a.createElement(g.a,{onSubmit:this.createTheme},s.a.createElement(u.a,null,"Create new theme"),s.a.createElement(g.a.Input,{name:"name",onChange:this.handleChange,placeholder:"Name"}),s.a.createElement(g.a.Button,{type:"submit"},"Create")))))}});var ge=Object(i.b)(e=>({videos:e.videos}))(class extends s.a.Component{constructor(...e){super(...e),this.getVideos=(()=>isNaN(this.props.limit)?this.props.videos:this.props.videos.slice(0,this.props.limit))}componentDidMount(){Q()}render(){return s.a.createElement(h.a,null,s.a.createElement(oe.a,{selection:!0},this.props.videos?this.getVideos().map(e=>s.a.createElement(oe.a.Item,{disabled:!e.finished,key:e._id,as:"a",href:"/api/videos/"+e.file},s.a.createElement(oe.a.Content,null,s.a.createElement(oe.a.Header,null,e.name||"Unnamed video"),e.finished?function(e){let t=e=>("0"+e).slice(-2),a=new Date(e);return`${a.getFullYear()}-${t(a.getMonth()+1)}-${t(a.getDate())} ${t(a.getHours())}:${t(a.getMinutes())}`}(e.finished):"Rendering..."))):s.a.createElement(oe.a.Item,null,s.a.createElement(Z.a,{active:!0}))))}});var Ee=Object(i.b)(e=>({songs:e.songs,themes:e.themes}))(class extends s.a.Component{constructor(...e){super(...e),this.handleChange=((e,{name:t,value:a})=>this.setState({[t]:a})),this.state={song:null,theme:null,rendering:!1},this.preview=(()=>{this.setState({rendering:!0}),J(this.state.theme,this.state.song).then(e=>(Q(),H(e.file))).then(e=>{o.b.info("Preview is ready",{onClick:()=>window.open(e.url,"_blank")})})})}render(){let e=this.props.songs.map(e=>({value:e._id,key:e._id,text:e.file.origname})),t=this.props.themes.map(e=>({value:e._id,key:e._id,text:e.name}));return e.unshift({value:null,key:"",text:"No song"}),s.a.createElement(g.a,null,s.a.createElement(u.a,null,"Preview"),s.a.createElement("p",null,"You can render a preview of a theme and song. It will take about 20 seconds to render, and will not cost any credits. It will show up in your videos. "),s.a.createElement(g.a.Select,{label:"Theme",required:!0,disabled:this.state.rendering,placeholder:"Select a theme",value:this.props.theme,name:"theme",options:t,onChange:this.handleChange}),s.a.createElement(g.a.Select,{label:"Song",clearable:!0,disabled:this.state.rendering,placeholder:"No song",value:this.props.song,name:"song",options:e,onChange:this.handleChange}),s.a.createElement(g.a.Button,{disabled:this.state.rendering||!this.state.theme,onClick:this.preview},"Preview"))}});var be=class extends s.a.Component{render(){return s.a.createElement(h.a,null,s.a.createElement(ne,null),s.a.createElement(u.a,{textAlign:"center",as:"h1"},"Dashboard"),s.a.createElement(m.a,{stackable:!0},s.a.createElement(m.a.Column,{width:8},s.a.createElement(le.a,{horizontal:!0},"Credits"),s.a.createElement(d.a,null,s.a.createElement(ee,null),s.a.createElement(ie.a,{as:c.a,to:"/buy-credits"},"Get more credits")),s.a.createElement(le.a,{horizontal:!0},"Videos"),s.a.createElement(d.a,null,s.a.createElement(ge,{limit:8}),s.a.createElement(le.a,null),s.a.createElement(ie.a,{as:c.a,to:"/video"},"Make video"))),s.a.createElement(m.a.Column,{width:8},s.a.createElement(le.a,{horizontal:!0},"Themes"),s.a.createElement(d.a,null,s.a.createElement(pe,null)),s.a.createElement(le.a,{horizontal:!0},"Songs"),s.a.createElement(d.a,null,s.a.createElement(de,null)),s.a.createElement(le.a,{horizontal:!0},"Preview"),s.a.createElement(d.a,null,s.a.createElement(Ee,null)))))}};class Ce extends s.a.Component{componentWillMount(){this.logout()}logout(){Y().then(e=>{Object(c.d)("/login",{replace:!0})})}render(){return s.a.createElement(s.a.Fragment,null)}}a(486);var ve=Object(i.b)(e=>({theme:e.theme,song:e.song,themes:e.themes,songs:e.songs}),{setTheme:e=>({type:"SET_THEME",val:e}),setSong:e=>({type:"SET_SONG",val:e})})(class extends n.Component{constructor(...e){super(...e),this.handleTheme=((e,{value:t})=>{this.props.setTheme(t)}),this.handleSong=((e,{value:t})=>{this.props.setSong(t)})}render(){let e=this.props.themes.map(e=>({value:e._id,key:e._id,text:e.name})),t=this.props.songs.map(e=>({value:e._id,key:e._id,text:e.file.origname}));return t.unshift({value:null,key:"",text:"No song"}),s.a.createElement(g.a,{onSubmit:this.props.onSubmit},s.a.createElement(g.a.Select,{label:"Theme",required:!0,placeholder:"Select a theme",value:this.props.theme,name:"theme",options:e,onChange:this.handleTheme}),s.a.createElement(g.a.Select,{label:"Song",clearable:!0,placeholder:"No song",value:this.props.song,name:"song",options:t,onChange:this.handleSong}))}});var fe=Object(i.b)(e=>({theme:e.theme}),{setComments:b,setQuestion:E,resetVideoState:e=>({type:"RESET_VIDEOSTATE",val:e})})(class extends s.a.Component{constructor(...e){super(...e),this.state={input:"",sort:"top",loading:null,error:null},this.fetchThread=((e,t)=>{this.setState({error:null,loading:!0}),B(e,t).then(()=>{this.setState({loading:!1}),Object(c.d)("/video/post")}).catch(e=>{this.setState({error:e,loading:!1})})}),this.onSubmit=(e=>{e.preventDefault();let t=this.state.input;if(-1!==t.indexOf("comments")){let e=/\/comments\/([\w]+)/,a=t.match(e);a&&(t=a[1])}let a=t.replace(/[^\w\d]/g,"");this.fetchThread(a,this.state.sort)}),this.handle=((e,{name:t,value:a})=>this.setState({[t]:a}))}componentWillMount(){this.props.resetVideoState()}render(){return s.a.createElement(d.a,null,s.a.createElement(ve,null),s.a.createElement(le.a,null),s.a.createElement(g.a,{onSubmit:this.onSubmit},s.a.createElement(g.a.Input,{label:"Thread",required:!0,value:this.state.input,onChange:this.handle,name:"input",placeholder:"Type a reddit thread ID or paste its URL",autoFocus:!0}),s.a.createElement(g.a.Select,{label:"Sort by",required:!0,value:this.state.sort,onChange:this.handle,name:"sort",options:[{text:"Top",value:"top"},{text:"Best",value:"best"},{text:"New",value:"new"}]}),s.a.createElement(g.a.Button,{primary:!0,loading:this.state.loading,disabled:!this.props.theme||!this.state.input},"OK",s.a.createElement(ce.a,{name:"angle right"})),this.state.error&&s.a.createElement(p.a,{negative:!0},this.state.error)))}});var ye=class extends n.Component{constructor(...e){super(...e),this.state={loading:!1,done:!1},this.send=(async()=>{this.setState({loading:!0,done:!1}),await $(),this.setState({loading:!1,done:!0})})}render(){return s.a.createElement(d.a,null,this.state.done?s.a.createElement("p",null,"The video is now rendering."):s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"Change settings if needed and then send to render video."),s.a.createElement(ve,null),s.a.createElement(le.a,null),s.a.createElement(ie.a,{primary:!0,size:"large",loading:this.state.loading,onClick:this.send},"Render")))}},Se=a(719);let we=13.163,Oe=.741;function Te(e){return e.reduce((e,t)=>e+t,0)+we+Oe*e.length}function xe(e){let t=e.replace(/<.+?>/g,"").trim(),a=(n=t,n.split(/<br>|(.+?[\.,?!]+["'\)\s]+)/g).filter(e=>e.replace("\u200b"," ").trim().length>0)).length;var n;let s=t.replace(/<.+?>/g,"").split(/\s+/g).length;return{words:s,splits:a,estimate:function(e,t){return.98*(.38152203637725923*e+.2767486833003453*t)}(a,s)}}var ke=Object(i.b)(e=>({comments:e.comments,question:e.question}))(class extends n.Component{render(){let e=function(e){let t=[],a=e=>{t.push(xe(e.data.body_html).estimate),Array.isArray(e.data.replies)&&e.data.replies.filter(e=>e.enabled).map(a)};return e.filter(e=>e.enabled).map(a),Math.round(100*Te(t))/100}(this.props.comments);return this.props.question.includeSelftext&&this.props.question.selftext_html&&(e+=xe(this.props.question.selftext_html).estimate),s.a.createElement("div",null,s.a.createElement(u.a,null,s.a.createElement(u.a.Content,null,"Estimated video length: ",function(e){let t=Math.floor(e/60),a=Math.floor(t/60),n="";return a>0&&(n+=a+" h, "),(t-=60*a)>0&&(n+=t+" m, "),n+=Math.floor(e)-60*t-60*a+" s"}(e))),"Comments selected: ",this.props.comments.filter(e=>e.enabled).length)}});var Ie=Object(i.b)(e=>({question:e.question}))(class extends s.a.PureComponent{render(){return s.a.createElement("div",null,this.props.question&&s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},s.a.createElement(Se.a.Group,null,s.a.createElement(Se.a,{active:"post"===this.props["*"],as:c.a,to:"post"},"Question title"),s.a.createElement(Se.a,{active:"selftext"===this.props["*"],as:c.a,to:"selftext"},"Body text"),s.a.createElement(Se.a,{active:"comments"===this.props["*"],as:c.a,to:"comments"},"Comments"),s.a.createElement(Se.a,{active:"final"===this.props["*"],as:c.a,to:"final"},"Finish"))),s.a.createElement(ke,null),s.a.createElement(u.a,{as:"h2"},this.props.question.title)),this.props.children)}}),je=a(350),Pe=a(24),_e=a(153),De=a.n(_e),Ne=a(157);const Me=[/(f)(uck)()/,/(sh)(it)()/,/(b)(it)(ch)/,/(c)(un)(t)/,/(ni)(gg)(a)/,/(ni)(gge)(r)/,/(p)(o)(rn)/,/((?:\W|^)d)(ic)(k)/,/((?:\W|^)a)(ss)(es)(?!\w)/,/((?:\W|^)a)(ss)(\W|$)/,/((?:\W|^)r)(ap)(e|ist|ing)/,/((?:\W|^)c)(u)(m)/,/((?:\W|^)t)(i)(ts)/,/(t)(it)(ties)/,/(c)(o)(ck[^an])/,/(wh)(or)(e)/,/(p)(us)(sy)/,/(s)(e)(x)/,/(d)(ic)(k)/,/(ret)(ar)(d)/,/(a)(ss)(hat|face|head|burger|hole)/,/((?:\W|^)a)(n)(al[^oy])/,/(pe)(n)(is)/,/(va)(gi)(na)/,/(dr)(u)(gs)/,/(mast)(urb)(at)/,/(dr)(u)(gs)/];var Ae=a(154),Ue=a.n(Ae),Be=a(155),qe=a.n(Be),Re=a(57);a(617);function Le(e,t,a){const n=t.getText();let s,r;for(;null!==(s=e.exec(n));)a(r=s.index,r+s[0].length)}let Fe=[{strategy:function(e,t){Me.forEach(a=>{Le(new RegExp(a,"ig"),e,t)})},component:e=>s.a.createElement("span",{className:"highlight-danger"},e.children)},{strategy:function(e,t){Le(/(?:^|\W)edit/gim,e,t)},component:e=>s.a.createElement("span",{className:"highlight-warn"},e.children)}];class Ge extends s.a.Component{constructor(e){super(e),this.propagateHtmlChange=(()=>{let e=Object(Ne.a)(this.state.editor.getCurrentContent());this.props.comment.data.body_html=e,this.props.onChange()}),this.onBlur=(e=>{this.propagateHtmlChange()}),this.onStateChange=(e=>this.setState({editor:e})),this.propagateEnableChange=(()=>{this.props.comment.enabled=!this.props.comment.enabled,this.props.onChange()}),this.inlineToolbarPlugin=qe()(),this.linkPlugin=Ue()(),this.plugins=[this.inlineToolbarPlugin,this.linkPlugin];let t=Object(Pe.convertFromHTML)(e.comment.data.body_html);this.state={editor:Pe.EditorState.createWithContent(Pe.ContentState.createFromBlockArray(t.contentBlocks,t.entityMap))}}handlePress(e){e.stopPropagation()}componentWillUnmount(){this.propagateHtmlChange()}render(){let e=this.props,t=e.comment,a=e.onChange;return s.a.createElement("div",{className:"Comment"},s.a.createElement("input",{className:"left-box",type:"checkbox",checked:t.enabled,onChange:this.propagateEnableChange}),s.a.createElement("div",{onKeyDown:this.handlePress},s.a.createElement("div",{onClick:this.propagateEnableChange},s.a.createElement("span",{style:{color:"blue",marginRight:5}},t.data.author),s.a.createElement("span",null,t.data.score>=1e3?Math.round(t.data.score/100)/10+"k":t.data.score," points"),s.a.createElement("span",null,t.data.all_awardings.map(e=>s.a.createElement("span",{key:e.count+e.icon_url},s.a.createElement("img",{src:e.icon_url,alt:"award",width:16}),e.count>1&&e.count)))),s.a.createElement(De.a,{editorState:this.state.editor,onChange:this.onStateChange,onBlur:this.onBlur,decorators:Fe,plugins:this.plugins}),s.a.createElement(this.inlineToolbarPlugin.InlineToolbar,null,e=>s.a.createElement(s.a.Fragment,null,s.a.createElement(Re.BoldButton,e),s.a.createElement(Re.ItalicButton,e),s.a.createElement(Re.UnderlineButton,e),s.a.createElement(this.linkPlugin.LinkButton,e))),Array.isArray(t.data.replies)&&t.data.replies.map(e=>s.a.createElement(Ge,{key:e.data.id,comment:e,onChange:a}))))}}var We=Ge,ze=a(159);a(618);let He=e=>Object.keys(e).filter(t=>e[t]).join(" ");var Je=class extends s.a.Component{constructor(...e){super(...e),this.onDragEnd=(e=>{e.destination&&this.props.reorder(e.source.index,e.destination.index)})}render(){return s.a.createElement(ze.a,{onDragEnd:this.onDragEnd},s.a.createElement(ze.c,{droppableId:"droppable"},e=>s.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,className:"draggable-container"}),this.props.items.map((e,t)=>s.a.createElement(ze.b,{key:e.data.id,draggableId:e.data.id,index:t},a=>s.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{className:He({draggable:!0,current:this.props.current===t,enabled:e.enabled}),onClick:()=>this.props.setCurrent(t)}),t+1))),e.placeholder)))}};var $e=Object(i.b)(e=>({comments:e.comments}),{setProcessed:e=>({type:"SET_PROCESSED",val:e}),setComments:b})(class extends s.a.Component{constructor(e){super(e),this.state={current:0},this.onSubmit=this.onSubmit.bind(this),this.handle=this.handle.bind(this),this.toggleCurrent=this.toggleCurrent.bind(this),this.handleKeyEvent=this.handleKeyEvent.bind(this),this.fakecomments=s.a.createRef()}handleKeyEvent(e){switch(e.code){case"KeyA":case"ArrowLeft":this.goPrev();break;case"KeyD":case"ArrowRight":this.goNext();break;case"Enter":this.onSubmit();break;default:if(0===e.code.indexOf("Digit")){let t=parseInt(e.code.replace("Digit",""));this.toggleCurrent(t)}}}componentDidMount(){window.addEventListener("keydown",this.handleKeyEvent)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyEvent)}goPrev(){this.state.current>0&&(this.topComment.scrollTo(0,0),this.setState({current:this.state.current-1}))}goNext(){this.state.current<this.props.comments.length-1&&(this.topComment.scrollTo(0,0),this.setState({current:this.state.current+1}))}onSubmit(){let e=function e(t){return t.filter(e=>e.enabled).map(e=>e.data).map(t=>{let a=Object.assign({},t);return a.replies&&(a.replies=e(a.replies)),a})}(this.props.comments);this.props.setProcessed(e),Object(c.d)("/video/final")}handle(e){this.state.chosen.has(e)?this.state.chosen.set(e):this.state.chosen.add(e),this.setState({chosen:this.state.chosen})}toggleCurrent(e){let t=Array.from(this.props.comments);if(e){let a=0,n=function t(n){if(++a===e)return n;if(Array.isArray(n.data.replies))for(let e=0;e<n.data.replies.length;e++){let a=t(n.data.replies[e]);if(a)return a}}(t[this.state.current]);if(!n)return;n.enabled=!n.enabled}else t[this.state.current].enabled=!t[this.state.current].enabled;this.props.setComments(t)}toMinSec(e){let t=Math.floor(e/60),a=("00"+Math.round(e-60*t)).slice(-2);return`${("00"+t).slice(-2)}:${a}`}calculateTotalTime(){let e=t=>{let a=t.data.body_html;return Array.isArray(t.data.replies)&&(a+=t.data.replies.filter(e=>e.enabled).map(e).reduce((e,t)=>e+t,"")),a},t=this.props.comments.filter(e=>e.enabled).map(e).map(e=>xe(e).estimate);return Math.round(100*Te(t))/100}onCurrentCommentChange(e){let t=Array.from(this.props.comments);this.props.setComments(t)}onReorder(e,t){this.props.setComments(((e,t,a)=>{const n=Array.from(e),s=n.splice(t,1),r=Object(je.a)(s,1)[0];return n.splice(a,0,r),n})(this.props.comments,e,t));let a=this.state.current;a===e?this.setState({current:t}):a<e&&a>t?this.setState({current:a+1}):a>e&&a<t&&this.setState({current:a-1})}render(){if(0===this.props.comments.length)return s.a.createElement(h.a,null,s.a.createElement(u.a,null,"No comments found for this thread"));let e=this.props.comments[this.state.current];return s.a.createElement(h.a,null,s.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},s.a.createElement(Je,{setCurrent:e=>this.setState({current:e}),current:this.state.current,reorder:this.onReorder.bind(this),items:this.props.comments}),s.a.createElement("div",{style:{flexGrow:1,paddingLeft:10}},s.a.createElement(d.a,null,s.a.createElement("div",{ref:e=>this.topComment=e},s.a.createElement(We,{key:e.data.id,comment:e,onChange:this.onCurrentCommentChange.bind(this)}))),s.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:10}},s.a.createElement(ie.a,{disabled:this.state.current<=0,onClick:this.goPrev.bind(this)},s.a.createElement(ce.a,{name:"arrow left"}),"Prev"),s.a.createElement(he.a,{type:"number",max:this.props.comments.length,min:1,value:this.state.current+1,onChange:e=>this.setState({current:Math.max(0,parseInt(e.target.value)-1||0)})}),s.a.createElement(ie.a,{disabled:this.state.current>this.props.comments.length,onClick:this.goNext.bind(this)},"Next",s.a.createElement(ce.a,{name:"arrow right"}))),s.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:10}},s.a.createElement(ie.a,{onClick:this.onSubmit,size:"huge",primary:!0},"Finish")))))}});var Ve=Object(i.b)(e=>({title:e.question.title}),{setTitle:e=>({type:"SET_TITLE",val:e})})(class extends n.Component{constructor(...e){super(...e),this.onSubmit=(e=>{e.preventDefault(),Object(c.d)("selftext")}),this.onChange=(e=>{this.props.setTitle(e.target.value)})}render(){return s.a.createElement(d.a,null,s.a.createElement(g.a,{onSubmit:this.onSubmit},s.a.createElement(u.a,{size:"large"},"Edit question"),s.a.createElement(g.a.Input,{value:this.props.title,onChange:this.onChange}),s.a.createElement(g.a.Button,{primary:!0,type:"submit"},"Continue")))}});function Qe(e,t,a){const n=t.getText();let s,r;for(;null!==(s=e.exec(n));)a(r=s.index,r+s[0].length)}let Ke=[{strategy:function(e,t){Me.forEach(a=>{Qe(new RegExp(a,"ig"),e,t)})},component:e=>s.a.createElement("span",{className:"highlight-danger"},e.children)},{strategy:function(e,t){Qe(/(?:^|\W)edit/gim,e,t)},component:e=>s.a.createElement("span",{className:"highlight-warn"},e.children)}];var Xe=class extends n.Component{constructor(e){super(e),this.handlePress=(e=>{e.stopPropagation()}),this.onChange=(e=>{this.setState({editor:e});let t=Object(Ne.a)(this.state.editor.getCurrentContent());this.props.data!==t&&this.props.onChange(t)}),this.inlineToolbarPlugin=qe()(),this.linkPlugin=Ue()(),this.plugins=[this.inlineToolbarPlugin,this.linkPlugin];let t=Object(Pe.convertFromHTML)(e.data);this.state={editor:t.contentBlocks?Pe.EditorState.createWithContent(Pe.ContentState.createFromBlockArray(t.contentBlocks,t.entityMap)):Pe.EditorState.createEmpty()}}render(){return s.a.createElement("div",null,s.a.createElement(De.a,{editorState:this.state.editor,onChange:this.onChange,decorators:Ke,plugins:this.plugins}),s.a.createElement(this.inlineToolbarPlugin.InlineToolbar,null,e=>s.a.createElement(s.a.Fragment,null,s.a.createElement(Re.BoldButton,e),s.a.createElement(Re.ItalicButton,e),s.a.createElement(Re.UnderlineButton,e),s.a.createElement(this.linkPlugin.LinkButton,e))))}};var Ye=Object(i.b)(e=>({selftext:e.question.selftext_html||"",includeSelftext:e.question.includeSelftext}),{setSelftext:e=>({type:"SET_SELFTEXT",val:e}),setIncludeSelftext:e=>({type:"SET_INCLUDE_SELFTEXT",val:e})})(class extends n.Component{constructor(...e){super(...e),this.onSubmit=(e=>{e.preventDefault(),Object(c.d)("/video/comments")}),this.onChangeSelftext=(e=>{this.props.setSelftext(e)}),this.onChangeInclude=((e,{checked:t})=>{this.props.setIncludeSelftext(t)})}render(){return s.a.createElement(d.a,null,s.a.createElement(g.a,{onSubmit:this.onSubmit},s.a.createElement(u.a,{size:"large"},"Edit selftext"),s.a.createElement(g.a.Checkbox,{label:"Include selftext?",checked:this.props.includeSelftext,onChange:this.onChangeInclude}),s.a.createElement(d.a,{style:{display:this.props.includeSelftext?"block":"none"}},s.a.createElement(Xe,{onChange:this.onChangeSelftext,data:this.props.selftext})),s.a.createElement(g.a.Button,{primary:!0,type:"submit"},"Continue")))}});var Ze=Object(i.b)(e=>({question:e.question}))(class extends n.Component{componentDidMount(){q(),M()}render(){return s.a.createElement(h.a,null,s.a.createElement("div",{style:{display:"flex",alignItems:"center"}},s.a.createElement(u.a,{style:{paddingTop:10},as:"h1"},s.a.createElement(u.a.Content,null,"Reddit Video Maker"),s.a.createElement(u.a.Subheader,null,"Create video")),s.a.createElement(ie.a,{style:{marginLeft:20},basic:!0,as:c.a,to:"/"},"Go back")),s.a.createElement(c.c,null,s.a.createElement(Ie,{path:"/"},s.a.createElement(fe,{path:"/"}),this.props.question&&s.a.createElement(Ve,{path:"post"}),this.props.question&&s.a.createElement(Ye,{path:"selftext"}),this.props.question&&s.a.createElement($e,{path:"comments"}),this.props.question&&s.a.createElement(ye,{path:"final"}),s.a.createElement(c.b,{default:!0,from:"*",to:"/video/",noThrow:!0}))))}});var et=class extends s.a.Component{constructor(...e){super(...e),this.state={text:"",message:null},this.onChange=((e,{name:t,value:a})=>this.setState({[t]:a})),this.sendRender=(()=>{let e=JSON.parse(this.state.text);V(e).then(()=>{this.setState({message:"Rendering..."})})})}render(){return s.a.createElement(h.a,null,s.a.createElement(d.a,null,s.a.createElement(g.a,null,s.a.createElement(g.a.TextArea,{value:this.state.text,name:"text",onChange:this.onChange}),s.a.createElement(g.a.Button,{onClick:this.sendRender},"Render"),this.state.message&&s.a.createElement(p.a,null,this.state.message))))}};let tt=[{value:"daniel",text:"Daniel UK"},{value:"google-us",text:"Google US"}];var at=Object(i.b)((e,t)=>({theme:e.themes.find(e=>e._id===t.themeId)}))(class extends s.a.Component{constructor(...e){super(...e),this.state={name:"",voice:"",voiceSpeed:1,intro:null,transition:null,outro:null,loading:!0,previewSong:!1},this.delete=(async()=>{await W(this.props.themeId),Object(c.d)("/",{replace:!0})}),this.handleChange=((e,{name:t,value:a})=>this.setState({[t]:a})),this.handleFileChange=(e=>{e.preventDefault(),this.setState({[e.target.name]:e.target.files[0]})}),this.submit=(()=>{this.setState({loading:!0}),F(this.props.themeId,{name:this.state.name,voice:this.state.voice,voiceSpeed:this.state.voiceSpeed}).then(async()=>{const e=this.state,t=e.intro,a=e.transition,n=e.outro;if(t||a||n){const e=new FormData;t&&e.append("intro",t),n&&e.append("outro",n),a&&e.append("transition",a),await G(this.props.themeId,e),this.setState({loading:!1})}else this.setState({loading:!1})})}),this.removeFile=(e=>{z(this.props.themeId,{[e]:!0})})}componentDidMount(){R(this.props.themeId).then(e=>{this.setState(e)})}render(){return s.a.createElement(h.a,null,s.a.createElement(ne,null),s.a.createElement(g.a,{onSubmit:e=>e.preventDefault()},s.a.createElement(d.a,null,s.a.createElement(u.a,null,"Edit theme"),s.a.createElement("p",null,"Themes consist of an intro, a transition, an outro, and a voice. You can have several themes on one account. The files can be a maximum of 25MB each. All files are optional."),s.a.createElement(le.a,null),s.a.createElement(g.a.Group,{inline:!0},s.a.createElement(g.a.Input,{name:"name",type:"text",placeholder:"Name",value:this.state.name,onChange:this.handleChange}),s.a.createElement(g.a.Select,{name:"voice",placeholder:"Voice",value:this.state.voice,options:tt,onChange:this.handleChange})),s.a.createElement(g.a.Group,{grouped:!0},s.a.createElement(u.a,null,"Intro"),s.a.createElement(g.a.Field,{inline:!0},s.a.createElement(me,{accept:"video/*",name:"intro",buttonOnly:!0,label:this.state.intro?"Change intro":"No intro",onChange:this.handleFileChange}),s.a.createElement("label",null,this.state.intro&&this.state.intro.origname))),s.a.createElement(g.a.Group,{grouped:!0},s.a.createElement(u.a,null,"Transition"),s.a.createElement(g.a.Field,{inline:!0},s.a.createElement(me,{accept:"video/*",name:"transition",buttonOnly:!0,label:this.state.transition?"Change transition":"No transition",onChange:this.handleFileChange}),s.a.createElement("label",null,this.state.transition&&this.state.transition.origname))),s.a.createElement(g.a.Group,{grouped:!0},s.a.createElement(u.a,null,"Outro"),s.a.createElement(g.a.Field,{inline:!0},s.a.createElement(me,{accept:"video/*",name:"outro",buttonOnly:!0,label:this.state.outro?"Change outro":"No outro",onChange:this.handleFileChange}),s.a.createElement("label",null,this.state.outro&&this.state.outro.origname))),s.a.createElement(le.a,null),s.a.createElement(g.a.Group,{inline:!0},s.a.createElement(g.a.Button,{floated:"right",onClick:this.submit,type:"submit"},"Save"),s.a.createElement(g.a.Button,{floated:"right",type:"button",color:"red",onClick:this.delete},"Delete")))))}}),nt=a(115),st=a(712);var rt=Object(i.b)(e=>({users:e.users}))(class extends s.a.Component{constructor(...e){super(...e),this.state={addingUser:!1,editingUser:!1,selectedUser:null,email:"",username:"",password:"",multiplier:0,creditsToGive:0,loading:!1},this.createUser=(async()=>{this.setState({loading:!0}),await T({email:this.state.email||null,username:this.state.username||null,password:this.state.password}),this.setState({loading:!1}),O(),this.closeAddModal()}),this.openAddModal=(()=>this.setState({addingUser:!0,editingUser:!1,loading:!1,username:"",email:"",password:""})),this.closeAddModal=(()=>this.setState({addingUser:!1})),this.setMultiplier=(async()=>{this.setState({loading:!0}),await x(this.state.selectedUser._id,this.state.multiplier),this.setState({loading:!1}),O(),this.closeEditModal()}),this.changeUserPass=(async()=>{this.setState({loading:!0}),await k(this.state.selectedUser._id,this.state.password),this.setState({loading:!1}),this.closeEditModal()}),this.giveCredits=(async()=>{this.setState({loading:!0}),await I(this.state.selectedUser._id,this.state.creditsToGive),this.setState({loading:!1,creditsToGive:0}),O(),this.closeEditModal()}),this.openEditModal=(e=>this.setState({addingUser:!1,editingUser:!0,loading:!1,email:e.email,username:e.username,password:e.password,selectedUser:e,multiplier:e.multiplier})),this.closeEditModal=(()=>this.setState({editingUser:!1})),this.handleChange=((e,{name:t,value:a})=>this.setState({[t]:a}))}componentDidMount(){O()}render(){return s.a.createElement(h.a,{textAlign:"left"},s.a.createElement(oe.a,{selection:!0},this.props.users?this.props.users.map(e=>s.a.createElement(oe.a.Item,{key:e._id,onClick:()=>this.openEditModal(e)},s.a.createElement(oe.a.Content,null,s.a.createElement(oe.a.Header,null,e.email||e.username," ",e.isAdmin&&s.a.createElement(nt.a,{size:"tiny",color:"red"},"admin")),s.a.createElement(oe.a.Description,null,e.credits," credits"),s.a.createElement(oe.a.Description,null,e.videoCount," videos made")))):s.a.createElement(Z.a,{active:!0})),s.a.createElement(le.a,null),s.a.createElement(ie.a,{onClick:this.openAddModal},"Create user"),s.a.createElement(st.a,{open:this.state.addingUser,onClose:this.closeAddModal},s.a.createElement(st.a.Content,null,s.a.createElement(u.a,null,"Add user")),s.a.createElement(st.a.Content,null,s.a.createElement(g.a,null,s.a.createElement(g.a.Input,{placeholder:"Username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),s.a.createElement(g.a.Input,{placeholder:"Email",type:"email",name:"email",value:this.state.email,onChange:this.handleChange}),s.a.createElement(g.a.Input,{placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),s.a.createElement(st.a.Actions,null,s.a.createElement(g.a.Button,{primary:!0,onClick:this.createUser},"Create"))),s.a.createElement(st.a,{open:this.state.editingUser,onClose:this.closeEditModal},s.a.createElement(st.a.Content,null,s.a.createElement(u.a,null,"Give credits")),s.a.createElement(st.a.Content,null,s.a.createElement(g.a,{loading:this.state.loading},s.a.createElement(u.a,null,"Current credits: ",this.state.selectedUser&&this.state.selectedUser.credits),s.a.createElement(g.a.Input,{type:"number",name:"creditsToGive",step:1,value:this.state.creditsToGive,onChange:this.handleChange}))),s.a.createElement(st.a.Actions,null,s.a.createElement(g.a.Button,{primary:!0,onClick:this.giveCredits,loading:this.state.loading},"Give credits")),s.a.createElement(le.a,null),s.a.createElement(st.a.Content,null,s.a.createElement(u.a,null,"Change user password")),s.a.createElement(st.a.Content,null,s.a.createElement(g.a,null,s.a.createElement(g.a.Input,{disabled:!0,placeholder:"Email or username",type:"text",name:"email",value:this.state.email||this.state.username,onChange:this.handleChange}),s.a.createElement(g.a.Input,{placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),s.a.createElement(st.a.Actions,null,s.a.createElement(g.a.Button,{primary:!0,onClick:this.changeUserPass,loading:this.state.loading},"Change password")),s.a.createElement(le.a,null),s.a.createElement(st.a.Content,null,s.a.createElement(u.a,null,"Set price modifier")),s.a.createElement(st.a.Content,null,this.state.multiplier>1&&s.a.createElement(p.a,{color:"negative"},"This should probably be less than 1"),s.a.createElement(g.a,null,s.a.createElement(g.a.Input,{placeholder:"Price multiplier",type:"number",name:"multiplier",min:0,step:.01,value:this.state.multiplier,onChange:this.handleChange}))),s.a.createElement(st.a.Actions,null,s.a.createElement(g.a.Button,{primary:!0,onClick:this.setMultiplier,loading:this.state.loading},"Set modifier"))))}});var lt=class extends s.a.Component{render(){return s.a.createElement(h.a,null,s.a.createElement(ne,null),s.a.createElement(u.a,{textAlign:"center",as:"h1"},"Admin Dashboard"),s.a.createElement(m.a,{stackable:!0},s.a.createElement(m.a.Column,{width:8},s.a.createElement(le.a,{horizontal:!0},"Credits"),s.a.createElement(d.a,null,s.a.createElement(ee,null),s.a.createElement(ie.a,{as:c.a,to:"/buy-credits"},"Buy credits"))),s.a.createElement(m.a.Column,{width:8},s.a.createElement(le.a,{horizontal:!0},"Users"),s.a.createElement(d.a,null,s.a.createElement(rt,null)))))}};var it=Object(i.b)(e=>({user:e.user}))(class extends s.a.Component{constructor(...e){super(...e),this.handleChange=((e,{name:t,value:a})=>this.setState({[t]:a})),this.state={current:"",password:"",passwordConfirm:"",changedPass:!1,loading:!1},this.changePass=(async()=>{this.setState({loading:!0}),await P(this.state.current,this.state.password).catch(e=>{o.b.error("Something went wrong")}),this.setState({changePass:!0,loading:!1})})}render(){let e=this.state.passwordConfirm.length>0&&this.state.password!==this.state.passwordConfirm;return s.a.createElement(h.a,null,s.a.createElement(ne,null),s.a.createElement(d.a,null,s.a.createElement(u.a,null,"Change password"),this.state.changedPass?s.a.createElement("p",null,"Password updated!"):s.a.createElement(g.a,{onSubmit:this.changePass},s.a.createElement(g.a.Input,{label:"Email",name:"email",value:this.props.user.email,disabled:!0}),this.props.user.username&&s.a.createElement(g.a.Input,{label:"Username",name:"username",value:this.props.user.username,disabled:!0}),s.a.createElement(g.a.Input,{placeholder:"Current password",label:"Current password",name:"current",type:"password",onChange:this.handleChange,required:!0}),s.a.createElement(g.a.Input,{placeholder:"New password",label:"New password",name:"password",type:"password",onChange:this.handleChange,required:!0}),s.a.createElement(g.a.Input,{placeholder:"Confirm password",label:"Confirm password",name:"passwordConfirm",type:"password",onChange:this.handleChange,required:!0}),e&&s.a.createElement(p.a,{negative:!0},"Passwords do not match"),s.a.createElement(g.a.Button,{primary:!0,type:"submit",disabled:!this.state.current||!this.state.passwordConfirm||e},"Change password"))))}});var ot=Object(i.b)(e=>({user:e.user}))(class extends s.a.Component{constructor(...e){super(...e),this.handleChange=((e,{name:t,value:a})=>this.setState({[t]:a}))}render(){return s.a.createElement(h.a,null,s.a.createElement(ne,null),s.a.createElement(d.a,null,s.a.createElement(u.a,null,"Contact us"),s.a.createElement("p",null,"For support, bug reports or business proposals, don't hesitate contacting us at ",s.a.createElement("a",{href:"mailto:support@redditvideomaker.com"},"support@redditvideomaker.com"))))}});const ct=({redirect:e="/"})=>s.a.createElement(c.b,{noThrow:!0,from:"*",to:e}),ht=e=>s.a.createElement("div",null,e.children);var mt=Object(i.b)(e=>({user:e.user}))(class extends s.a.Component{componentWillMount(){j()}render(){return s.a.createElement(c.c,null,s.a.createElement(be,{path:"/"}),s.a.createElement(ot,{path:"/support"}),s.a.createElement(re,{path:"/buy-credits"}),s.a.createElement(Ze,{path:"/video/*"}),s.a.createElement(at,{path:"/themes/:themeId"}),s.a.createElement(Ce,{path:"/logout"}),s.a.createElement(it,{path:"/account"}),s.a.createElement(et,{path:"/__testing_ground"}),s.a.createElement(ht,{path:"/admin"},s.a.createElement(lt,{path:"/"})),s.a.createElement(ct,{default:!0}))}});var dt=class extends s.a.Component{constructor(e){super(e),this.state={email:"",password:"",error:null,loading:!1},this.login=this.login.bind(this)}login(){this.setState({error:null,loading:!0}),K(this.state.email,this.state.password).catch(e=>{this.setState({loading:!1}),"string"===typeof e?this.setState({error:e}):console.error(e)}).then(e=>{Object(c.e)("/dashboard")})}render(){return s.a.createElement(m.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},s.a.createElement(m.a.Column,{style:{maxWidth:450}},s.a.createElement(u.a,{as:"h2"},"Log in"),s.a.createElement(g.a,{onSubmit:this.login},s.a.createElement(d.a,null,s.a.createElement(g.a.Input,{fluid:!0,placeholder:"Email",disabled:this.state.loading,type:"text",value:this.state.email,onChange:e=>this.setState({email:e.target.value})}),s.a.createElement(g.a.Input,{fluid:!0,placeholder:"Password",disabled:this.state.loading,type:"password",value:this.state.password,onChange:e=>this.setState({password:e.target.value})}),s.a.createElement(g.a.Button,{fluid:!0,type:"submit",size:"large",disabled:this.state.loading,color:"teal"},"Log in"),s.a.createElement("div",null,s.a.createElement(c.a,{to:"/register"},"Register")))),s.a.createElement(p.a,{size:"small"},"Forgot password?"),this.state.error&&s.a.createElement(p.a,{error:!0},this.state.error)))}},ut=a(715);var pt=class extends s.a.Component{constructor(e){super(e),this.state={email:"",password:""},this.register=this.register.bind(this)}register(){X(this.state.email,this.state.password)}render(){return s.a.createElement(m.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},s.a.createElement(m.a.Column,{style:{maxWidth:450}},s.a.createElement(u.a,{as:"h2"},"Register"),s.a.createElement(g.a,{onSubmit:this.register},s.a.createElement(d.a,null,s.a.createElement(g.a.Input,{fluid:!0,placeholder:"Email",type:"email",value:this.state.email,onChange:e=>this.setState({email:e.target.value})}),s.a.createElement(g.a.Input,{fluid:!0,placeholder:"Password",type:"password",value:this.state.password,onChange:e=>this.setState({password:e.target.value})}),s.a.createElement(g.a.Button,{fluid:!0,type:"submit",size:"large",color:"teal"},"Register"),s.a.createElement(ut.a,null,s.a.createElement(c.a,{to:"/login"},"Log in"))))))}};const gt=({redirect:e="/login"})=>s.a.createElement(c.b,{noThrow:!0,from:"*",to:e});var Et=Object(i.b)(e=>({loggedIn:e.loggedIn}))(class extends s.a.Component{render(){return s.a.createElement(c.c,null,s.a.createElement(pt,{path:"/register"}),s.a.createElement(dt,{path:"/login"}),s.a.createElement(gt,{default:!0}))}});var bt=Object(i.b)(e=>({loggedIn:e.loggedIn}))(class extends s.a.Component{render(){return this.props.loggedIn?s.a.createElement(mt,null):s.a.createElement(Et,null)}});a(696);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(i.a,{store:S},s.a.createElement(bt,null),s.a.createElement(o.a,{position:"bottom-right"})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[359,1,2]]]);
//# sourceMappingURL=main.17a1b5bc.chunk.js.map