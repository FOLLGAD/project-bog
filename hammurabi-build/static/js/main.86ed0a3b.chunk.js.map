{"version":3,"sources":["redux/store.js","render/serviceWorker.js","redux/actions.js","api.js","FileInput.js","Songs/index.js","Themes/index.js","Videos.js","Credits.js","Dashboard/index.js","Login.js","Register.js","Logout.js","render/Settings.js","render/ChooseThread.js","render/Final.js","render/estimate.js","render/sanitize.js","render/PickComments/Comment.js","render/PickComments/SortableComments.js","render/PickComments/index.js","render/Question.js","render/EditorComponent.js","render/SelfText.js","render/TimeEstimator.js","render/Navbar.js","render/App.js","Themes/_id.js","BuyCredits/index.js","Router.js","index.js"],"names":["defaultState","comments","question","processed","song","theme","credits","themes","videos","songs","loggedIn","localStorage","getItem","process","createStore","state","action","type","_objectSpread","Object","assign","val","title","selftext_html","includeSelftext","setItem","removeItem","Boolean","window","location","hostname","match","setQuestion","content","setComments","jsonFetch","RequestInfo","RequestInit","method","headers","Content-Type","credentials","fetch","then","res","ok","json","status","store","dispatch","err","error","getCredits","data","setCreditsAction","checkPrice","quantity","body","JSON","stringify","buyCredits","getSongs","setSongsAction","uploadSong","formData","r","deleteSong","id","getThread","thread","mapping","comment","newcomment","Array","isArray","replies","map","enabled","getThemes","setThemesAction","getTheme","themeId","createTheme","editTheme","uploadThemeFiles","deleteTheme","longPollVideo","vidId","postPreview","options","postRender","_store$getState","getState","Accept","questionData","commentData","getVideos","setVideosAction","authorize","email","password","Headers","authorization","user","pass","btoa","register","FileInput","React","Component","render","buttonOnly","this","props","button","react_default","a","createElement","Button","icon","label","style","position","onClick","fileInput","click","name","accept","ref","display","onChange","Icon","size","Input","placeholder","value","file","labelPosition","readOnly","connect","[object Object]","args","super","async","e","target","files","FormData","append","_id","handleChange","setState","handleFileChange","componentDidMount","Container","i","fluid","key","Card","Content","basic","circular","floated","color","Loader","active","Divider","src_FileInput","navigate","textAlign","List","selection","Item","Header","Popup","trigger","on","Form","onSubmit","isNaN","limit","slice","video","jsdate","Date","created","datePad","date","getFullYear","getMonth","getDate","getHours","getMinutes","href","rel","Meta","Segment","secondary","Subheader","Dashboard","as","Grid","stackable","Column","width","horizontal","src_Credits","primary","Link","to","Videos","Themes","Songs","App","constructor","loading","login","bind","catch","console","d","redirectTo","height","verticalAlign","maxWidth","disabled","router_es","Message","Comment_Comment","Logout","replace","setTheme","setSong","handleTheme","handleSong","themeOptions","text","songOptions","unshift","Select","required","clearable","resetVideoState","input","fetchThread","log","preventDefault","indexOf","pattern","onlythread","handle","componentWillMount","render_Settings","autoFocus","negative","Final","done","send","Fragment","outroLen","transitionLen","getFull","commentTimes","reduce","b","length","estimateCommentHtml","noTags","trim","splits","str","split","filter","words","estimate","estimateComment","foulSpanArray","findWithRegex","regex","contentBlock","callback","getText","matchArr","start","exec","index","decorators","strategy","forEach","reg","RegExp","component","className","children","Comment","p","inlineToolbarPlugin","createInlineToolbarPlugin","linkPlugin","createLinkPlugin","plugins","convertFromHTML","body_html","editor","EditorState","createWithContent","ContentState","createFromBlockArray","contentBlocks","entityMap","handlePress","stopPropagation","propagateHtmlChange","html","stateToHTML","getCurrentContent","propagateEnableChange","_this$props","checked","onKeyDown","marginRight","author","score","Math","round","all_awardings","award","count","icon_url","src","alt","lib_default","editorState","InlineToolbar","extProps","draft_js_buttons_lib","LinkButton","PickComments_Comment_Comment","toClass","classes","keys","join","SortableComments","onDragEnd","result","destination","reorder","source","react_beautiful_dnd_esm","droppableId","provided","droppableProps","innerRef","items","item","draggableId","draggableProps","dragHandleProps","draggable","current","setCurrent","setProcessed","toggleCurrent","handleKeyEvent","fakecomments","createRef","code","goPrev","goNext","num","parseInt","addEventListener","componentWillUnmount","removeEventListener","topComment","scrollTo","filt","recFilter","commentArr","h","newS","chosen","has","set","add","commentNum","from","currentNum","reqComment","traverseOnce","toMinSec","seconds","fullMins","floor","restSecs","calculateTotalTime","recAdd","fullHtml","onCurrentCommentChange","s","onReorder","end","list","startIndex","endIndex","_result$splice","splice","removed","slicedToArray","flexDirection","justifyContent","render_PickComments_SortableComments","flexGrow","paddingLeft","render_PickComments_Comment","padding","max","min","marginTop","setTitle","EditorComponent","createEmpty","selftext","setSelftext","setIncludeSelftext","onChangeSelftext","onChangeInclude","Checkbox","render_EditorComponent","time","total","push","calculateCommentList","timeInSeconds","mins","hours","readableTime","c","PureComponent","Step","Group","render_TimeEstimator","alignItems","paddingTop","marginLeft","render_Navbar","path","ChooseThread","render_Question","SelfText","render_PickComments","render_Final","default","noThrow","voices","voice","intro","transition","outro","delete","submit","_this$state","preview","open","inline","Field","custom","currentPrice","stripe","timeout","perCredit","onPurchase","session","redirectToCheckout","sessionId","changeQuantity","_","clearTimeout","setTimeout","Stripe","Radio","NotFound","redirect","src_Dashboard","src_BuyCredits","render_App","Register","Login","ReactDOM","react_stripe_elements_es","apiKey","es","Router","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.86ed0a3b.chunk.js","sourcesContent":["import { createStore } from 'redux'\n\nconst defaultState = {\n\t// Video rendering\n\tcomments: [],\n\tquestion: null,\n\tprocessed: null,\n\tsong: null,\n\ttheme: null,\n\n\t// Dashboard\n\tcredits: null,\n\tthemes: [],\n\tvideos: [],\n\tsongs: [],\n\n\tloggedIn: localStorage.getItem('loggedIn') === 'true',\n}\n\nfunction state(state = defaultState, action) {\n\tswitch (action.type) {\n\t\tcase 'RESET_VIDEOSTATE':\n\t\t\treturn { ...state, question: null, processed: null, comments: [], theme: null, song: null }\n\t\tcase 'SET_COMMENTS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tcomments: action.val,\n\t\t\t})\n\t\tcase 'SET_PROCESSED':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tprocessed: action.val,\n\t\t\t})\n\t\tcase 'SET_QUESTION':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion: action.val,\n\t\t\t})\n\t\tcase 'SET_TITLE': {\n\t\t\tlet question = Object.assign({}, state.question, { title: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion: question,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_SELFTEXT': {\n\t\t\tlet question = Object.assign({}, state.question, { selftext_html: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_INCLUDE_SELFTEXT': {\n\t\t\tlet question = Object.assign({}, state.question, { includeSelftext: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_THEME':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\ttheme: action.val,\n\t\t\t})\n\t\tcase 'SET_SONG':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tsong: action.val,\n\t\t\t})\n\t\tcase 'SET_CREDITS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tcredits: action.val,\n\t\t\t})\n\t\tcase 'SET_THEMES':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tthemes: action.val,\n\t\t\t})\n\t\tcase 'SET_SONGS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tsongs: action.val,\n\t\t\t})\n\t\tcase 'SET_VIDEOS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tvideos: action.val,\n\t\t\t})\n\t\tcase 'LOGIN':\n\t\t\tlocalStorage.setItem('loggedIn', 'true')\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tloggedIn: true,\n\t\t\t})\n\t\tcase 'LOGOUT':\n\t\t\tlocalStorage.removeItem('loggedIn')\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tloggedIn: false,\n\t\t\t})\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default process.env.NODE_ENV === \"development\" ?\n\tcreateStore(state, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()) :\n\tcreateStore(state)","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const resetVideoState = content => ({\n\ttype: 'RESET_VIDEOSTATE',\n\tval: content,\n})\nexport const setProcessed = content => ({\n\ttype: 'SET_PROCESSED',\n\tval: content,\n})\nexport const setQuestion = content => ({\n\ttype: 'SET_QUESTION',\n\tval: content,\n})\nexport const setComments = content => ({\n\ttype: 'SET_COMMENTS',\n\tval: content,\n})\nexport const setTheme = content => ({\n\ttype: 'SET_THEME',\n\tval: content,\n})\nexport const setSong = content => ({\n\ttype: 'SET_SONG',\n\tval: content,\n})\nexport const setCredits = content => ({\n\ttype: 'SET_CREDITS',\n\tval: content,\n})\nexport const setThemes = content => ({\n\ttype: 'SET_THEMES',\n\tval: content,\n})\nexport const setSongs = content => ({\n\ttype: 'SET_SONGS',\n\tval: content,\n})\nexport const setVideos = content => ({\n\ttype: 'SET_VIDEOS',\n\tval: content,\n})\nexport const setTitle = content => ({\n\ttype: 'SET_TITLE',\n\tval: content,\n})\nexport const setSelftext = content => ({\n\ttype: 'SET_SELFTEXT',\n\tval: content,\n})\nexport const setIncludeSelftext = content => ({\n\ttype: 'SET_INCLUDE_SELFTEXT',\n\tval: content,\n})\nexport const login = () => ({\n\ttype: 'LOGIN',\n})\nexport const logout = () => ({\n\ttype: 'LOGOUT',\n})","import {\n\tlogin as loginAction,\n\tlogout as logoutAction,\n\tsetCredits as setCreditsAction,\n\tsetSongs as setSongsAction,\n\tsetThemes as setThemesAction,\n\tsetVideos as setVideosAction,\n\tsetQuestion,\n\tsetComments\n} from './redux/actions'\nimport store from './redux/store'\n\nlet apiurl = process.env.NODE_ENV === \"development\" ?\n\t'http://192.168.1.19:8000/api' :\n\t'/api'\n\n// The jsonFetch function is a wrapper around the native fetch().\n// It returns the response in json, and removes the \"loggedIn\" item\n// from localStorage if the response status code is 401.\n// Returns a promise that throws if the status code is not in the 200-399 range\nconst jsonFetch = (RequestInfo, RequestInit = {}) => {\n\tif (typeof RequestInfo === 'string') {\n\t\tRequestInfo = apiurl + RequestInfo\n\t}\n\tif (RequestInit.method && RequestInit.method !== \"GET\") {\n\t\tif (!RequestInit.headers) {\n\t\t\tRequestInit.headers = {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t}\n\t\t}\n\t}\n\n\tRequestInit.credentials = 'include'\n\n\treturn fetch(RequestInfo, RequestInit)\n\t\t.then(res => {\n\t\t\tif (res.ok) {\n\t\t\t\treturn res.json()\n\t\t\t} else if (res.status === 401) {\n\t\t\t\tstore.dispatch(logoutAction())\n\t\t\t}\n\t\t\treturn res.json()\n\t\t\t\t.then(err => {\n\t\t\t\t\tthrow err.error // Parse as json, then throw.\n\t\t\t\t})\n\t\t})\n}\n\nexport let getCredits = function () {\n\treturn jsonFetch('/credits')\n\t\t.then(data => {\n\t\t\tstore.dispatch(setCreditsAction(data.credits))\n\t\t\treturn data\n\t\t})\n}\n\n// Returns { total: Number }\nexport let checkPrice = function (quantity) {\n\treturn jsonFetch('/credits/check-price', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ quantity }),\n\t})\n}\n\n// Use stripe to buy credits\n// Returns { session: String }\nexport let buyCredits = function (quantity) {\n\treturn jsonFetch('/credits/buy', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ quantity }),\n\t})\n}\n\nexport let getSongs = function () {\n\treturn jsonFetch('/songs')\n\t\t.then(songs => {\n\t\t\tstore.dispatch(setSongsAction(songs))\n\t\t\treturn songs\n\t\t})\n}\n\nexport let uploadSong = function (formData) {\n\treturn jsonFetch('/songs', {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t\theaders: {\n\t\t}\n\t})\n\t\t.then(r => {\n\t\t\tgetSongs()\n\t\t\treturn r\n\t\t})\n}\n\nexport let deleteSong = function (id) {\n\treturn jsonFetch('/songs/' + id, {\n\t\tmethod: 'DELETE',\n\t})\n}\n\nexport let getThread = function (thread) {\n\treturn jsonFetch('/thread/' + thread)\n\t\t.then(json => {\n\t\t\tlet mapping = comment => {\n\t\t\t\tlet newcomment = Object.assign({}, comment)\n\n\t\t\t\tif (Array.isArray(newcomment.replies)) {\n\t\t\t\t\tnewcomment.replies = newcomment.replies.map(mapping)\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tenabled: false,\n\t\t\t\t\tdata: newcomment\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet comments = json[1].map(mapping)\n\n\t\t\tstore.dispatch(setQuestion(json[0]))\n\t\t\tstore.dispatch(setComments(comments))\n\n\t\t\treturn json\n\t\t})\n}\n\nexport let getThemes = function () {\n\treturn jsonFetch('/themes')\n\t\t.then(themes => {\n\t\t\tstore.dispatch(setThemesAction(themes))\n\t\t\treturn themes\n\t\t})\n}\n\nexport let getTheme = function (themeId) {\n\treturn jsonFetch('/themes/' + themeId)\n}\n\nexport let createTheme = function (data) {\n\treturn jsonFetch('/themes', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(data),\n\t})\n}\n\nexport let editTheme = function (id, data) {\n\treturn jsonFetch('/themes/' + id, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify(data),\n\t})\n}\n\nexport let uploadThemeFiles = function (id, formData) {\n\treturn jsonFetch('/themes/' + id + '/files', {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t\theaders: {\n\t\t}\n\t})\n}\n\nexport let deleteTheme = function (id) {\n\treturn jsonFetch('/themes/' + id, {\n\t\tmethod: 'DELETE',\n\t})\n}\n\nexport let longPollVideo = function (vidId) {\n\treturn jsonFetch('/check-on-video/' + vidId)\n}\n\nexport let postPreview = function (theme, song) {\n\treturn jsonFetch('/preview', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({\n\t\t\toptions: {\n\t\t\t\ttheme,\n\t\t\t\tsong,\n\t\t\t}\n\t\t}),\n\t})\n}\n\nexport let postRender = function () {\n\tlet { question, processed, theme, song } = store.getState()\n\n\tif (!question.includeSelftext) {\n\t\tdelete question.selftext_html\n\t}\n\n\treturn jsonFetch('/videos', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tquestionData: question,\n\t\t\tcommentData: processed,\n\t\t\toptions: {\n\t\t\t\ttheme,\n\t\t\t\tsong,\n\t\t\t},\n\t\t})\n\t})\n}\n\nexport const getVideos = function () {\n\treturn jsonFetch('/videos')\n\t\t.then(r => {\n\t\t\tstore.dispatch(setVideosAction(r))\n\t\t\treturn r\n\t\t})\n}\n\nexport const openVideoLink = function (videoId) {\n\treturn window.open('/videos/' + videoId, '_blank')\n}\n\n// btoa: Binary to Ascii (Base64 only contains ascii characters)\n\n// Basic toBase64(username:password)\nconst toBasicAuth = (user, pass) => `Basic ${btoa(user + ':' + pass)}`\n\nexport let authorize = function (email, password) {\n\treturn jsonFetch('/auth', {\n\t\theaders: new Headers({\n\t\t\tauthorization: toBasicAuth(email, password),\n\t\t}),\n\t\tmethod: 'POST',\n\t}).then(r => {\n\t\tstore.dispatch(loginAction())\n\t\treturn r\n\t})\n}\n\nexport let register = function (email, password) {\n\treturn jsonFetch('/register', {\n\t\tbody: JSON.stringify({ email, password }),\n\t\tmethod: 'POST',\n\t})\n}\n\nexport let logout = function () {\n\treturn jsonFetch('/logout').then(r => {\n\t\tstore.dispatch(logoutAction())\n\t})\n}","import React from 'react'\nimport { Button, Icon, Input } from 'semantic-ui-react'\n\nclass FileInput extends React.Component {\n    render() {\n        let buttonOnly = this.props.buttonOnly\n\n        let button =\n            <Button\n                icon={!this.props.label}\n                style={{ position: 'relative' }}\n                onClick={() => this.fileInput.click()}>\n                <input\n                    name={this.props.name}\n                    type=\"file\"\n                    accept={this.props.accept || null}\n                    ref={r => this.fileInput = r}\n                    style={{ display: 'none' }}\n                    onChange={this.props.onChange} />\n                <Icon name=\"file\"\n                    size={this.props.size} />\n                {this.props.label && this.props.label}\n            </Button>\n        return (\n            <div>\n                {\n                    buttonOnly ? button :\n                        <Input\n                            {...this.props}\n                            placeholder={this.props.placeholder || \"No file\"}\n                            value={this.props.file ? this.props.file.name : ''}\n                            label={button}\n                            labelPosition=\"left\"\n                            readOnly={true}\n                            size={this.props.size}\n                            onClick={() => this.fileInput.click()} />}\n            </div>\n        )\n    }\n}\n\nexport default FileInput;","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Card, Container, Divider, Loader } from 'semantic-ui-react'\nimport { getSongs, uploadSong, deleteSong } from '../api'\nimport FileInput from '../FileInput'\n\nclass ThemesList extends React.Component {\n    uploadSong = async (e) => {\n        let file = e.target.files[0]\n        let formData = new FormData()\n        formData.append('song', file)\n        await uploadSong(formData)\n    }\n    deleteSong = async song => {\n        await deleteSong(song._id)\n        getSongs()\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    handleFileChange = (e, { name }) => this.setState({ [name]: e.target.files[0] })\n    componentDidMount() {\n        getSongs()\n    }\n    render() {\n        return (\n            <Container>\n                <div>\n                    {this.props.songs ? this.props.songs.map((song, i) =>\n                        <Container fluid key={song._id}>\n                            <Card fluid>\n                                <Card.Content>\n                                    {song.name}\n                                    <Button\n                                        basic\n                                        circular\n                                        floated=\"right\"\n                                        onClick={() => this.deleteSong(song)}\n                                        color=\"red\"\n                                        icon=\"delete\" />\n                                </Card.Content>\n                            </Card>\n                        </Container>\n                    ) :\n                        <Loader active />}\n                </div>\n                <Divider></Divider>\n\n                <FileInput accept=\"audio/*\" buttonOnly name=\"song\" label=\"Upload song\" onChange={this.uploadSong} />\n                {/* <Popup trigger={<Button>Upload song</Button>}\n                    on=\"click\"\n                    position=\"bottom center\">\n                    <Container fluid textAlign=\"center\">\n                        <Form onSubmit={this.uploadSong}>\n                            <Header>Upload song</Header>\n                            <Form.Input name=\"name\" onChange={this.handleChange} placeholder=\"Name\" />\n                            <Form.Button type=\"submit\">Upload</Form.Button>\n                            <Message size=\"tiny\" color=\"yellow\">\n                                Songs that are too short will be repeated\n                            </Message>\n                        </Form>\n                    </Container>\n                </Popup> */}\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        songs: store.songs,\n    }\n}\n\nexport default connect(mapStateToProps)(ThemesList);","import { Link, navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Card, Container, Divider, Form, Header, Popup, Loader, List } from 'semantic-ui-react'\nimport { createTheme, getThemes } from '../api'\n\nclass ThemesList extends React.Component {\n    createTheme = async () => {\n        const { theme } = await createTheme({ name: this.state.name })\n        navigate(`/themes/${theme}`)\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        getThemes()\n    }\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List selection>\n                    {this.props.themes ? this.props.themes.map(theme =>\n                        <List.Item key={theme._id} onClick={() => navigate(\"/themes/\" + theme._id)}>\n                            {/* <Link to={\"/themes/\" + theme._id}> */}\n                                <List.Content>\n                                    <List.Header>{theme.name}</List.Header>\n                                </List.Content>\n                            {/* </Link> */}\n                        </List.Item>\n                    ) :\n                        <Loader active />}\n                </List>\n                <Divider></Divider>\n                <Popup trigger={<Button>New theme</Button>} on=\"click\" position=\"bottom center\">\n                    <Container fluid textAlign=\"center\">\n                        <Form onSubmit={this.createTheme}>\n                            <Header>Create new theme</Header>\n                            <Form.Input name=\"name\" onChange={this.handleChange} placeholder=\"Name\"></Form.Input>\n                            <Form.Button type=\"submit\">Create</Form.Button>\n                        </Form>\n                    </Container>\n                </Popup>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        themes: store.themes,\n    }\n}\n\nexport default connect(mapStateToProps)(ThemesList);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Card, Container, Loader } from 'semantic-ui-react'\nimport { getVideos } from './api'\n\nclass VideosList extends React.Component {\n    componentDidMount() {\n        getVideos()\n    }\n    getVideos = () => {\n        return isNaN(this.props.limit) ? this.props.videos : this.props.videos.slice(0, this.props.limit)\n    }\n    render() {\n        return (\n            <Container>\n                {this.props.videos ? this.getVideos().map(video => {\n                    let jsdate = new Date(video.created)\n                    let datePad = date => (\"0\" + date).slice(-2)\n                    let date = `${jsdate.getFullYear()}-${datePad(jsdate.getMonth())}-${datePad(jsdate.getDate())} ${datePad(jsdate.getHours())}:${datePad(jsdate.getMinutes())}`\n                    return (\n                        <a key={video._id} href={\"/api/videos/\" + video.file} target=\"_blank\" rel=\"noopener noreferrer\">\n                            <Card fluid>\n                                <Card.Content>{date}</Card.Content>\n                                <Card.Meta>{video._id}</Card.Meta>\n                            </Card>\n                        </a>\n                    )\n                }) :\n                    <Loader active />}\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        videos: store.videos,\n    }\n}\n\nexport default connect(mapStateToProps)(VideosList);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Header, Segment, Loader } from 'semantic-ui-react'\nimport { getCredits } from './api'\n\nclass Credits extends React.Component {\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        getCredits()\n    }\n    render() {\n        return (\n            <Segment textAlign=\"center\" secondary>\n                <Header size=\"huge\">\n                    <Header.Subheader>Credits</Header.Subheader>\n                    <Header.Content>\n                        {this.props.credits != null ?\n                            this.props.credits :\n                            <Loader active />}\n                    </Header.Content>\n                </Header>\n            </Segment>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        credits: store.credits,\n    }\n}\n\nexport default connect(mapStateToProps)(Credits);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Button, Container, Divider, Grid, Header, Segment } from 'semantic-ui-react'\nimport Songs from '../Songs'\nimport Themes from '../Themes/index'\nimport Videos from '../Videos'\nimport Credits from '../Credits'\n\nclass Dashboard extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Container textAlign=\"center\">\n\t\t\t\t<Header as=\"h1\">Dashboard</Header>\n\t\t\t\t<Grid stackable>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Credits</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Credits />\n\t\t\t\t\t\t\t<Button primary as={Link} to=\"/buy-credits\">Buy credits</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Videos</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Videos limit={8} />\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t<Button primary size=\"big\" as={Link} to=\"/video\">Make video</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Themes</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Themes />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Songs</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Songs />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t</Grid>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default Dashboard","import React from 'react';\nimport { Grid, Header, Segment, Form, Message } from 'semantic-ui-react'\nimport { authorize } from './api'\nimport { Link, redirectTo } from '@reach/router'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            email: \"\",\n            password: \"\",\n            error: null,\n            loading: false,\n        }\n\n        this.login = this.login.bind(this)\n    }\n    login() {\n        this.setState({ error: null, loading: true })\n        authorize(this.state.email, this.state.password)\n            .catch(err => {\n                this.setState({ loading: false })\n                if (typeof err === \"string\") {\n                    this.setState({ error: err })\n                } else {\n                    console.error(err)\n                }\n            })\n            .then(d => {\n                redirectTo('/dashboard')\n            })\n    }\n    render() {\n        return (\n            <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n                <Grid.Column style={{ maxWidth: 450 }}>\n                    <Header as=\"h2\">Log in</Header>\n                    <Form onSubmit={this.login}>\n                        <Segment>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Email\"\n                                disabled={this.state.loading}\n                                type=\"email\"\n                                value={this.state.email}\n                                onChange={d => this.setState({ email: d.target.value })}>\n                            </Form.Input>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Password\"\n                                disabled={this.state.loading}\n                                type=\"password\"\n                                value={this.state.password}\n                                onChange={d => this.setState({ password: d.target.value })}>\n                            </Form.Input>\n                            <Form.Button\n                                fluid\n                                type=\"submit\"\n                                size=\"large\"\n                                disabled={this.state.loading}\n                                color=\"teal\">\n                                Log in\n                            </Form.Button>\n                            <div><Link to=\"/register\">Register</Link></div>\n                        </Segment>\n                    </Form>\n                    <Message size=\"small\">Forgot password?</Message>\n                    {this.state.error && <Message error>{this.state.error}</Message>}\n                </Grid.Column>\n            </Grid>\n        )\n    }\n}\n\nexport default App;","import React from 'react';\nimport { Grid, Header, Segment, Form, Message,Comment } from 'semantic-ui-react'\nimport { register } from './api'\nimport { Link } from '@reach/router'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            email: \"\",\n            password: \"\",\n        }\n\n        this.register = this.register.bind(this)\n    }\n    register() {\n        register(this.state.email, this.state.password)\n    }\n    render() {\n        return (\n            <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n                <Grid.Column style={{ maxWidth: 450 }}>\n                    <Header as=\"h2\">Register</Header>\n                    <Form onSubmit={this.register}>\n                        <Segment>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Email\"\n                                type=\"email\"\n                                value={this.state.email}\n                                onChange={d => this.setState({ email: d.target.value })}>\n                            </Form.Input>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Password\"\n                                type=\"password\"\n                                value={this.state.password}\n                                onChange={d => this.setState({ password: d.target.value })}>\n                            </Form.Input>\n                            <Form.Button\n                                fluid\n                                type=\"submit\"\n                                size=\"large\"\n                                color=\"teal\">\n                                Register\n                            </Form.Button>\n                            <Comment><Link to=\"/login\">Log in</Link></Comment>\n                        </Segment>\n                    </Form>\n                </Grid.Column>\n            </Grid>\n        )\n    }\n}\n\nexport default App;","import React from 'react'\nimport { logout } from './api'\nimport { navigate } from '@reach/router'\n\nexport default function () {\n    logout()\n        .then(r => {\n            navigate('/', { replace: true })\n        })\n\n    return <div>Logging out...</div>\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form } from 'semantic-ui-react';\nimport { setSong, setTheme } from '../redux/actions';\n\nclass Settings extends Component {\n\thandleTheme = (e, { value }) => {\n\t\tthis.props.setTheme(value)\n\t}\n\thandleSong = (e, { value }) => {\n\t\tthis.props.setSong(value)\n\t}\n\trender() {\n\t\tlet themeOptions = this.props.themes.map(theme => ({ value: theme._id, key: theme._id, text: theme.name }))\n\t\tlet songOptions = this.props.songs.map(song => ({ value: song._id, key: song._id, text: song.name }))\n\t\tsongOptions.unshift({ value: null, key: \"\", text: \"No song\" })\n\n\t\treturn (\n\t\t\t<Form onSubmit={this.props.onSubmit}>\n\t\t\t\t<Form.Select\n\t\t\t\t\tlabel=\"Theme\"\n\t\t\t\t\trequired\n\t\t\t\t\tplaceholder=\"Select a theme\"\n\t\t\t\t\tvalue={this.props.theme}\n\t\t\t\t\tname=\"theme\"\n\t\t\t\t\toptions={themeOptions}\n\t\t\t\t\tonChange={this.handleTheme}\n\t\t\t\t/>\n\t\t\t\t<Form.Select\n\t\t\t\t\tlabel=\"Song\"\n\t\t\t\t\tclearable\n\t\t\t\t\tplaceholder=\"No song\"\n\t\t\t\t\tvalue={this.props.song}\n\t\t\t\t\tname=\"song\"\n\t\t\t\t\toptions={songOptions}\n\t\t\t\t\tonChange={this.handleSong}\n\t\t\t\t/>\n\t\t\t</Form>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttheme: state.theme,\n\tsong: state.song,\n\tthemes: state.themes,\n\tsongs: state.songs,\n}), { setTheme, setSong })(Settings);","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Divider, Form, Icon, Message, Segment } from 'semantic-ui-react'\nimport { getThread } from '../api'\nimport { setComments, setQuestion, resetVideoState } from '../redux/actions'\nimport Settings from './Settings'\n\nclass Thread extends React.Component {\n\tstate = {\n\t\tinput: '',\n\t\tloading: null,\n\t\terror: null,\n\t}\n\tcomponentWillMount() {\n\t\tthis.props.resetVideoState()\n\t}\n\tfetchThread = thread => {\n\t\tthis.setState({ error: null, loading: true })\n\n\t\tgetThread(thread)\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({ loading: false })\n\t\t\t\tnavigate('/video/post')\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(\"Here?\")\n\t\t\t\tthis.setState({ error: err, loading: false })\n\t\t\t})\n\t}\n\tonSubmit = e => {\n\t\te.preventDefault()\n\n\t\tlet thread = this.state.input\n\n\t\tif (thread.indexOf('comments') !== -1) {\n\t\t\tlet pattern = /\\/comments\\/([\\w]+)/\n\t\t\tlet match = thread.match(pattern)\n\n\t\t\tif (match) {\n\t\t\t\tthread = match[1]\n\t\t\t}\n\t\t}\n\n\t\tlet onlythread = thread.replace(/[^\\w\\d]/g, '')\n\n\t\tthis.fetchThread(onlythread)\n\t}\n\thandle = e => {\n\t\tthis.setState({ input: e.target.value })\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Settings />\n\t\t\t\t<Divider />\n\t\t\t\t<Form onSubmit={this.onSubmit}>\n\t\t\t\t\t<Form.Input label=\"Thread\" required value={this.state.input} onChange={this.handle} placeholder=\"Type a reddit thread ID or paste its URL\" autoFocus />\n\t\t\t\t\t<Form.Button primary loading={this.state.loading} disabled={!this.props.theme || !this.state.input}>OK<Icon name=\"angle right\" /></Form.Button>\n\t\t\t\t\t{this.state.error && <Message negative>{this.state.error}</Message>}\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttheme: state.theme,\n}), {\n\tsetComments,\n\tsetQuestion,\n\tresetVideoState,\n})(Thread);","import React, { Component } from 'react';\nimport { Button, Divider, Segment } from 'semantic-ui-react';\nimport { postRender } from '../api';\nimport Settings from './Settings';\n\nclass Final extends Component {\n    state = { loading: false, done: false }\n    send = async () => {\n        this.setState({ loading: true, done: false })\n        await postRender()\n        this.setState({ loading: false, done: true })\n    }\n    render() {\n\n        return (\n            <Segment>\n                {this.state.done ?\n                    <p>The video is now rendering.</p> :\n                    <>\n                        <p>Change settings if needed and then send to render video.</p>\n                        <Settings />\n                        <Divider />\n                        <Button primary size=\"large\" loading={this.state.loading} onClick={this.send}>Render</Button>\n                    </>\n                }\n            </Segment>\n        )\n    }\n}\n\nexport default Final","// ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 transition.mkv\n\n// Outro 13.163 s\n// Transition bright 0.843 s\n// Transition 0.741 s\n// Number of splits * X\n// Number of words * Y\n\nlet outroLen = 13.163\nlet transitionLen = 0.741\n\nfunction splitString(str) {\n\treturn str\n\t\t.split(/<br>|(.+?[\\.,?!]+[\"'\\)\\s]+)/g) // eslint-disable-line no-useless-escape\n\t\t.filter(d => d.replace('\\u200B', ' ').trim().length > 0)\n}\n\nexport function getFull(commentTimes) {\n\tlet comments = commentTimes.reduce((a, b) => a + b, 0)\n\treturn comments + outroLen + transitionLen * commentTimes.length\n}\n\nexport function estimateComment(splits, words) {\n\treturn (splits * 0.38152203637725923 + words * 0.2767486833003453) * 1.08\n}\n\nexport function estimateCommentHtml(comment) {\n\tlet noTags = comment.replace(/<.+?>/g, '').trim()\n\tlet splits = splitString(noTags).length\n\tlet words = noTags.replace(/<.+?>/g, '').split(/\\s+/g).length\n\tlet estimate = estimateComment(splits, words)\n\n\treturn {\n\t\twords,\n\t\tsplits,\n\t\testimate,\n\t}\n}\n\nexport function calculateCommentList(commentArr) {\n\tlet total = []\n\tlet recAdd = comment => {\n\t\ttotal.push(estimateCommentHtml(comment.data.body_html).estimate)\n\n\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\tcomment.data.replies\n\t\t\t\t.filter(r => r.enabled)\n\t\t\t\t.map(recAdd)\n\t\t}\n\t}\n\tcommentArr\n\t\t.filter(d => d.enabled)\n\t\t.map(recAdd)\n\n\treturn Math.round(1e2 * getFull(total)) / 1e2\n}","// These will hide the middle of the three regex groups\nexport const foulSpanArray = [\n\t/(f)(uck)()/,\n\t/(sh)(it)()/,\n\t/(b)(it)(ch)/,\n\t/(c)(un)(t)/,\n\t/(ni)(gg)(a)/,\n\t/(ni)(gge)(r)/,\n\t/(p)(o)(rn)/,\n\t/((?:\\W|^)d)(ic)(k)/,\n\t/((?:\\W|^)a)(ss)(es)(?!\\w)/,\n\t/((?:\\W|^)a)(ss)(\\W|$)/,\n\t/((?:\\W|^)r)(ap)(e|ist|ing)/,\n\t/((?:\\W|^)c)(u)(m)/,\n\t/((?:\\W|^)t)(i)(ts)/,\n\t/(t)(it)(ties)/,\n\t/(c)(o)(ck[^an])/, // doesnt match 'cockney', 'cockatrice'\n\t/(wh)(or)(e)/,\n\t/(p)(us)(sy)/,\n\t/(s)(e)(x)/,\n\t/(d)(ic)(k)/,\n\t/(ret)(ar)(d)/,\n\t/(a)(ss)(hat|face|head|burger|hole)/,\n\t/((?:\\W|^)a)(n)(al[^oy])/,\n\t/(pe)(n)(is)/,\n\t/(va)(gi)(na)/,\n\t/(dr)(u)(gs)/,\n\t/(mast)(urb)(at)/,\n\t/(dr)(u)(gs)/,\n]","import React from 'react'\nimport { EditorState, ContentState, convertFromHTML } from 'draft-js'\nimport Editor from 'draft-js-plugins-editor'\nimport { stateToHTML } from 'draft-js-export-html'\nimport { foulSpanArray } from '../sanitize'\nimport createLinkPlugin from 'draft-js-anchor-plugin'\nimport createInlineToolbarPlugin from 'draft-js-inline-toolbar-plugin'\nimport { ItalicButton, BoldButton, UnderlineButton } from 'draft-js-buttons'\n\nimport './Comment.css'\n\nfunction handleStrategy(contentBlock, callback) {\n\tfoulSpanArray.forEach(reg => {\n\t\tfindWithRegex(new RegExp(reg, 'ig'), contentBlock, callback)\n\t})\n}\n\nfunction editStrategy(contentBlock, callback) {\n\tfindWithRegex(/(?:^|\\W)edit/img, contentBlock, callback)\n}\n\nlet handleSpan = props => {\n\treturn <span className=\"highlight-danger\">{props.children}</span>\n}\n\nlet editSpan = props => {\n\treturn <span className=\"highlight-warn\">{props.children}</span>\n}\n\nfunction findWithRegex(regex, contentBlock, callback) {\n\tconst text = contentBlock.getText()\n\tlet matchArr, start\n\twhile ((matchArr = regex.exec(text)) !== null) {\n\t\tstart = matchArr.index\n\t\tcallback(start, start + matchArr[0].length)\n\t}\n}\n\nlet decorators = [\n\t{\n\t\tstrategy: handleStrategy,\n\t\tcomponent: handleSpan,\n\t},\n\t{\n\t\tstrategy: editStrategy,\n\t\tcomponent: editSpan,\n\t},\n]\n\nclass Comment extends React.Component {\n\tconstructor(p) {\n\t\tsuper(p)\n\n\t\tthis.inlineToolbarPlugin = createInlineToolbarPlugin()\n\t\tthis.linkPlugin = createLinkPlugin()\n\t\tthis.plugins = [\n\t\t\tthis.inlineToolbarPlugin,\n\t\t\tthis.linkPlugin,\n\t\t]\n\n\t\tlet d = convertFromHTML(p.comment.data.body_html)\n\t\tthis.state = { editor: EditorState.createWithContent(ContentState.createFromBlockArray(d.contentBlocks, d.entityMap)) }\n\t}\n\thandlePress(e) {\n\t\te.stopPropagation()\n\t}\n\tpropagateHtmlChange(val) {\n\t\tthis.setState({ editor: val })\n\n\t\tlet html = stateToHTML(this.state.editor.getCurrentContent())\n\t\tthis.props.comment.data.body_html = html\n\n\t\tthis.props.onChange()\n\t}\n\tpropagateEnableChange() {\n\t\tthis.props.comment.enabled = !this.props.comment.enabled\n\t\tthis.props.onChange()\n\t}\n\trender() {\n\t\tlet { comment, onChange } = this.props\n\n\t\treturn (\n\t\t\t<div className=\"Comment\">\n\t\t\t\t<input className=\"left-box\" type=\"checkbox\" checked={comment.enabled} onChange={this.propagateEnableChange.bind(this)} />\n\t\t\t\t<div onKeyDown={this.handlePress}>\n\t\t\t\t\t<div onClick={this.propagateEnableChange.bind(this)}>\n\t\t\t\t\t\t<span style={{ color: \"blue\", marginRight: 5 }}>{comment.data.author}</span>\n\t\t\t\t\t\t<span>{comment.data.score >= 1e3 ? Math.round(comment.data.score / 1e2) / 1e1 + 'k' : comment.data.score} points</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{comment.data.all_awardings.map(award => <span key={award.count + award.icon_url}><img src={award.icon_url} alt=\"award\" width={16} />{award.count > 1 && award.count}</span>)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Editor\n\t\t\t\t\t\teditorState={this.state.editor}\n\t\t\t\t\t\tonChange={this.propagateHtmlChange.bind(this)}\n\t\t\t\t\t\tdecorators={decorators}\n\t\t\t\t\t\tplugins={this.plugins}\n\t\t\t\t\t/>\n\t\t\t\t\t<this.inlineToolbarPlugin.InlineToolbar>\n\t\t\t\t\t\t{extProps => <>\n\t\t\t\t\t\t\t<BoldButton {...extProps} />\n\t\t\t\t\t\t\t<ItalicButton {...extProps} />\n\t\t\t\t\t\t\t<UnderlineButton {...extProps} />\n\t\t\t\t\t\t\t<this.linkPlugin.LinkButton {...extProps} />\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</this.inlineToolbarPlugin.InlineToolbar>\n\t\t\t\t\t{Array.isArray(comment.data.replies) && comment.data.replies.map(d => <Comment key={d.data.id} comment={d} onChange={onChange} />)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Comment;","import React from 'react'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\nimport './SortableComments.css'\n\nlet toClass = classes => Object.keys(classes).filter(d => classes[d]).join(' ')\n\nclass SortableComments extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.onDragEnd = this.onDragEnd.bind(this)\n\t}\n\tonDragEnd(result) {\n\t\tif (!result.destination) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.props.reorder(result.source.index, result.destination.index)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<DragDropContext onDragEnd={this.onDragEnd}>\n\t\t\t\t<Droppable droppableId=\"droppable\">\n\t\t\t\t\t{provided => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\tclassName=\"draggable-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.props.items.map((item, index) => (\n\t\t\t\t\t\t\t\t<Draggable key={item.data.id} draggableId={item.data.id} index={index}>\n\t\t\t\t\t\t\t\t\t{provided => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.dragHandleProps}\n\t\t\t\t\t\t\t\t\t\t\tclassName={toClass({\n\t\t\t\t\t\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent: this.props.current === index,\n\t\t\t\t\t\t\t\t\t\t\t\tenabled: item.enabled,\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.props.setCurrent(index)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Droppable>\n\t\t\t</DragDropContext>\n\t\t)\n\t}\n}\n\nexport default SortableComments","import { navigate } from '@reach/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setComments, setProcessed } from '../../redux/actions';\nimport { estimateCommentHtml, getFull } from '../estimate';\nimport Comment from './Comment';\nimport SortableComments from './SortableComments';\nimport { Segment, Container, Header, Button, Input, Icon } from 'semantic-ui-react';\n\nfunction recFilter(commentArr) {\n\tlet news = commentArr.filter(h => h.enabled)\n\t\t.map(d => d.data)\n\t\t.map(d => {\n\t\t\tlet newS = Object.assign({}, d)\n\t\t\tif (newS.replies) {\n\t\t\t\tnewS.replies = recFilter(newS.replies)\n\t\t\t}\n\t\t\treturn newS\n\t\t})\n\treturn news\n}\n\nclass PickComments extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { current: 0 }\n\t\tthis.onSubmit = this.onSubmit.bind(this)\n\t\tthis.handle = this.handle.bind(this)\n\t\tthis.toggleCurrent = this.toggleCurrent.bind(this)\n\t\tthis.handleKeyEvent = this.handleKeyEvent.bind(this)\n\n\t\tthis.fakecomments = React.createRef()\n\t}\n\thandleKeyEvent(e) {\n\t\tswitch (e.code) {\n\t\t\tcase \"KeyA\":\n\t\t\tcase \"ArrowLeft\":\n\t\t\t\tthis.goPrev()\n\t\t\t\tbreak;\n\t\t\tcase \"KeyD\":\n\t\t\tcase \"ArrowRight\":\n\t\t\t\tthis.goNext()\n\t\t\t\tbreak\n\t\t\tcase \"Enter\":\n\t\t\t\tthis.onSubmit()\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tif (e.code.indexOf('Digit') === 0) {\n\t\t\t\t\tlet num = parseInt(e.code.replace('Digit', ''))\n\t\t\t\t\tthis.toggleCurrent(num)\n\t\t\t\t}\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeyEvent)\n\t}\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeyEvent)\n\t}\n\tgoPrev() {\n\t\tif (this.state.current > 0) {\n\t\t\tthis.topComment.scrollTo(0, 0)\n\t\t\tthis.setState({ current: this.state.current - 1 })\n\t\t}\n\t}\n\tgoNext() {\n\t\tif (this.state.current < this.props.comments.length - 1) {\n\t\t\tthis.topComment.scrollTo(0, 0)\n\t\t\tthis.setState({ current: this.state.current + 1 })\n\t\t}\n\t}\n\tonSubmit() {\n\t\tlet filt = recFilter(this.props.comments)\n\n\t\tthis.props.setProcessed(filt)\n\n\t\tnavigate('/video/final')\n\t}\n\thandle(id) {\n\t\tif (this.state.chosen.has(id)) {\n\t\t\tthis.state.chosen.set(id)\n\t\t} else {\n\t\t\tthis.state.chosen.add(id)\n\t\t}\n\t\tthis.setState({\n\t\t\tchosen: this.state.chosen,\n\t\t})\n\t}\n\ttoggleCurrent(commentNum) {\n\t\tlet set = Array.from(this.props.comments)\n\n\t\tif (commentNum) {\n\t\t\tlet currentNum = 0\n\n\t\t\t// Used for checking the N:th visible comment in the tree\n\t\t\tfunction traverseOnce(comment) {\n\t\t\t\tcurrentNum++\n\t\t\t\tif (currentNum === commentNum) {\n\t\t\t\t\treturn comment\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\t\t\tfor (let i = 0; i < comment.data.replies.length; i++) {\n\t\t\t\t\t\tconst element = comment.data.replies[i];\n\t\t\t\t\t\tlet res = traverseOnce(element)\n\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\treturn res\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet reqComment = traverseOnce(set[this.state.current])\n\t\t\tif (!reqComment) {\n\t\t\t\treturn // Could not find a comment with inputted number\n\t\t\t}\n\t\t\treqComment.enabled = !reqComment.enabled\n\t\t} else {\n\t\t\tset[this.state.current].enabled = !set[this.state.current].enabled\n\t\t}\n\n\t\tthis.props.setComments(set)\n\t}\n\ttoMinSec(seconds) {\n\t\tlet fullMins = Math.floor(seconds / 60) // No. full mins\n\t\tlet restSecs = ('00' + Math.round(seconds - 60 * fullMins)).slice(-2)\n\t\tlet mins = ('00' + fullMins).slice(-2)\n\t\treturn `${mins}:${restSecs}`\n\t}\n\tcalculateTotalTime() {\n\t\tlet recAdd = comment => {\n\t\t\tlet fullHtml = comment.data.body_html\n\n\t\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\t\tfullHtml += comment.data.replies\n\t\t\t\t\t.filter(r => r.enabled)\n\t\t\t\t\t.map(recAdd)\n\t\t\t\t\t.reduce((a, b) => a + b, '')\n\t\t\t}\n\n\t\t\treturn fullHtml\n\t\t}\n\t\tlet commentTimes = this.props.comments\n\t\t\t.filter(d => d.enabled)\n\t\t\t.map(recAdd)\n\t\t\t.map(b => estimateCommentHtml(b).estimate)\n\n\t\treturn Math.round(1e2 * getFull(commentTimes)) / 1e2\n\t}\n\tonCurrentCommentChange(comment) {\n\t\tlet s = Array.from(this.props.comments)\n\t\tthis.props.setComments(s)\n\t}\n\tonReorder(start, end) {\n\t\tconst reorder = (list, startIndex, endIndex) => {\n\t\t\tconst result = Array.from(list)\n\t\t\tconst [removed] = result.splice(startIndex, 1)\n\t\t\tresult.splice(endIndex, 0, removed)\n\n\t\t\treturn result\n\t\t}\n\n\t\tthis.props.setComments(reorder(this.props.comments, start, end))\n\n\t\tlet current = this.state.current\n\n\t\tif (current === start) {\n\t\t\tthis.setState({ current: end })\n\t\t} else if (current < start && current > end) {\n\t\t\tthis.setState({ current: current + 1 })\n\t\t} else if (current > start && current < end) {\n\t\t\tthis.setState({ current: current - 1 })\n\t\t}\n\t}\n\trender() {\n\t\tif (this.props.comments.length === 0) {\n\t\t\treturn (<Container>\n\t\t\t\t<Header>No comments found for this thread</Header>\n\t\t\t</Container>)\n\t\t}\n\t\tlet comment = this.props.comments[this.state.current]\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'center' }}>\n\t\t\t\t\t<SortableComments setCurrent={i => this.setState({ current: i })} current={this.state.current} reorder={this.onReorder.bind(this)} items={this.props.comments} />\n\t\t\t\t\t<div style={{ flexGrow: 1, paddingLeft: 10 }}>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<div ref={ref => this.topComment = ref}>\n\t\t\t\t\t\t\t\t<Comment key={comment.data.id} comment={comment} onChange={this.onCurrentCommentChange.bind(this)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\", padding: 10 }}>\n\t\t\t\t\t\t\t<Button disabled={this.state.current <= 0} onClick={this.goPrev.bind(this)}>\n\t\t\t\t\t\t\t\t<Icon name=\"arrow left\" />\n\t\t\t\t\t\t\t\tPrev\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Input type=\"number\" max={this.props.comments.length} min={1} value={this.state.current + 1} onChange={e => this.setState({ current: Math.max(0, parseInt(e.target.value) - 1 || 0) })} />\n\t\t\t\t\t\t\t<Button disabled={this.state.current > this.props.comments.length} onClick={this.goNext.bind(this)}>\n\t\t\t\t\t\t\t\tNext\n\t\t\t\t\t\t\t<Icon name=\"arrow right\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-around\", marginTop: 10 }}>\n\t\t\t\t\t\t\t<Button onClick={this.onSubmit} size=\"huge\" primary>Finish</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\tcomments: state.comments,\n}), {\n\tsetProcessed,\n\tsetComments\n})(PickComments);","import { navigate } from '@reach/router';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Header, Segment } from 'semantic-ui-react';\nimport { setTitle } from '../redux/actions';\n\nclass Question extends Component {\n\tonSubmit = e => {\n\t\te.preventDefault()\n\n\t\tnavigate('selftext')\n\t}\n\tonChange = e => {\n\t\tthis.props.setTitle(e.target.value)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Form onSubmit={this.onSubmit}>\n\t\t\t\t\t<Header size=\"large\">Edit question</Header>\n\t\t\t\t\t<Form.Input value={this.props.title} onChange={this.onChange} />\n\t\t\t\t\t<Form.Button primary type=\"submit\">Continue</Form.Button>\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttitle: state.question.title,\n}), { setTitle })(Question);","import React, { Component } from 'react'\nimport { foulSpanArray } from './sanitize'\n\nimport { EditorState, ContentState, convertFromHTML } from 'draft-js'\nimport Editor from 'draft-js-plugins-editor'\nimport { stateToHTML } from 'draft-js-export-html'\nimport createLinkPlugin from 'draft-js-anchor-plugin'\nimport createInlineToolbarPlugin from 'draft-js-inline-toolbar-plugin'\nimport { ItalicButton, BoldButton, UnderlineButton } from 'draft-js-buttons'\n\nfunction findWithRegex(regex, contentBlock, callback) {\n    const text = contentBlock.getText()\n    let matchArr, start\n    while ((matchArr = regex.exec(text)) !== null) {\n        start = matchArr.index\n        callback(start, start + matchArr[0].length)\n    }\n}\n\nfunction handleStrategy(contentBlock, callback) {\n    foulSpanArray.forEach(reg => {\n        findWithRegex(new RegExp(reg, 'ig'), contentBlock, callback)\n    })\n}\nfunction editStrategy(contentBlock, callback) {\n    findWithRegex(/(?:^|\\W)edit/img, contentBlock, callback)\n}\n\nlet handleSpan = props => {\n    return <span className=\"highlight-danger\">{props.children}</span>\n}\n\nlet editSpan = props => {\n    return <span className=\"highlight-warn\">{props.children}</span>\n}\n\nlet decorators = [\n    {\n        strategy: handleStrategy,\n        component: handleSpan,\n    },\n    {\n        strategy: editStrategy,\n        component: editSpan,\n    },\n]\n\nclass EditorComponent extends Component {\n    constructor(p) {\n        super(p)\n\n        this.inlineToolbarPlugin = createInlineToolbarPlugin()\n        this.linkPlugin = createLinkPlugin()\n        this.plugins = [\n            this.inlineToolbarPlugin,\n            this.linkPlugin,\n        ]\n\n        let d = convertFromHTML(p.data)\n        \n        this.state = {\n            editor: d.contentBlocks ? EditorState.createWithContent(\n                ContentState.createFromBlockArray(d.contentBlocks, d.entityMap)\n            ) : EditorState.createEmpty(),\n        }\n    }\n    handlePress = e => {\n        e.stopPropagation()\n    }\n    onChange = val => {\n        this.setState({ editor: val })\n\n        let html = stateToHTML(this.state.editor.getCurrentContent())\n\n        if (this.props.data !== html) {\n            this.props.onChange(html)\n        }\n    }\n    render() {\n        return <div>\n            <Editor\n                editorState={this.state.editor}\n                onChange={this.onChange}\n                decorators={decorators}\n                plugins={this.plugins}\n            />\n            <this.inlineToolbarPlugin.InlineToolbar>\n                {extProps => <>\n                    <BoldButton {...extProps} />\n                    <ItalicButton {...extProps} />\n                    <UnderlineButton {...extProps} />\n                    <this.linkPlugin.LinkButton {...extProps} />\n                </>}\n            </this.inlineToolbarPlugin.InlineToolbar>\n        </div>\n    }\n}\n\nexport default EditorComponent","import { navigate } from '@reach/router';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Header, Segment } from 'semantic-ui-react';\nimport { setSelftext, setIncludeSelftext } from '../redux/actions';\nimport EditorComponent from './EditorComponent';\n\nclass Selftext extends Component {\n    onSubmit = e => {\n        e.preventDefault()\n\n        navigate('/video/comments')\n    }\n    onChangeSelftext = value => {\n        this.props.setSelftext(value)\n    }\n    onChangeInclude = (e, { checked }) => {\n        this.props.setIncludeSelftext(checked)\n    }\n    render() {\n        return (\n            <Segment>\n                <Form onSubmit={this.onSubmit}>\n                    <Header size=\"large\">Edit selftext</Header>\n                    <Form.Checkbox label=\"Include selftext?\" checked={this.props.includeSelftext} onChange={this.onChangeInclude} />\n                    <Segment style={{ display: this.props.includeSelftext ? 'block' : 'none' }}>\n                        <EditorComponent onChange={this.onChangeSelftext} data={this.props.selftext} />\n                    </Segment>\n                    <Form.Button primary type=\"submit\">Continue</Form.Button>\n                </Form>\n            </Segment>\n        )\n    }\n}\n\nexport default connect(state => ({\n    selftext: state.question.selftext_html || \"\",\n    includeSelftext: state.question.includeSelftext,\n}), { setSelftext, setIncludeSelftext })(Selftext);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Header } from 'semantic-ui-react';\nimport { calculateCommentList, estimateCommentHtml } from './estimate';\n\nfunction readableTime(timeInSeconds) {\n    let mins = Math.floor(timeInSeconds / 60)\n    let hours = Math.floor(mins / 60)\n    mins -= hours * 60\n\n    let seconds = Math.floor(timeInSeconds) - mins * 60 - hours * 60\n\n    let str = \"\"\n    if (hours > 0) {\n        str += hours + \" h, \"\n    }\n    if (mins > 0) {\n        str += mins + \" m, \"\n    }\n    str += seconds + \" s\"\n\n    return str\n}\n\nclass TimeEstimator extends Component {\n    render() {\n        let time = calculateCommentList(this.props.comments)\n\n        if (this.props.question.includeSelftext && this.props.question.selftext_html) {\n            let selftext = this.props.question.selftext_html\n            time += estimateCommentHtml(selftext).estimate\n        }\n\n        return (\n            <div>\n                <Header>\n                    <Header.Content>Current time: {readableTime(time)}</Header.Content>\n                </Header>\n                Comments: {this.props.comments.filter(c => c.enabled).length}\n            </div>\n        )\n    }\n}\n\nexport default connect(state => ({\n    comments: state.comments,\n    question: state.question,\n}))(TimeEstimator);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Header, Step } from 'semantic-ui-react'\nimport TimeEstimator from './TimeEstimator'\nimport { connect } from 'react-redux'\n\nclass Navbar extends React.PureComponent {\n    render() {\n        return (\n            <div>\n                {this.props.question && \n                    <div style={{ textAlign: 'center' }}>\n                        <div style={{ display: 'flex', justifyContent: 'center' }}>\n                            <Step.Group>\n                                <Step active={this.props[\"*\"] === \"post\"} as={Link} to=\"post\">Question title</Step>\n                                <Step active={this.props[\"*\"] === \"selftext\"} as={Link} to=\"selftext\">Body text</Step>\n                                <Step active={this.props[\"*\"] === \"comments\"} as={Link} to=\"comments\">Comments</Step>\n                                <Step active={this.props[\"*\"] === \"final\"} as={Link} to=\"final\">Finish</Step>\n                            </Step.Group>\n                        </div>\n                        <TimeEstimator />\n                        <Header as=\"h2\">{this.props.question.title}</Header>\n                    </div>\n                }\n                {this.props.children}\n            </div>\n        )\n    }\n}\n\nexport default connect(state => ({\n    question: state.question,\n}))(Navbar)","import { Link, Redirect, Router } from '@reach/router'\nimport 'draft-js-inline-toolbar-plugin/lib/plugin.css'\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Header, Step } from 'semantic-ui-react'\nimport { getSongs, getThemes } from '../api'\nimport SelectThread from './ChooseThread'\nimport Final from './Final'\nimport PickComments from './PickComments/index'\nimport Question from './Question'\nimport SelfText from './SelfText'\nimport Navbar from './Navbar'\n\n\nclass App extends Component {\n\tcomponentDidMount() {\n\t\tgetThemes()\n\t\tgetSongs()\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<div style={{ display: 'flex', alignItems: 'center' }}>\n\t\t\t\t\t<Header style={{ paddingTop: 10 }} as=\"h1\">\n\t\t\t\t\t\t<Header.Content>Project BOG</Header.Content>\n\t\t\t\t\t\t<Header.Subheader>Create video</Header.Subheader>\n\t\t\t\t\t</Header>\n\t\t\t\t\t<Button style={{ marginLeft: 20 }} basic as={Link} to=\"/\">Go back</Button>\n\t\t\t\t</div>\n\t\t\t\t<Router>\n\t\t\t\t\t<Navbar path=\"/\">\n\t\t\t\t\t\t<SelectThread path=\"/\" />\n\t\t\t\t\t\t{/* Can't have fragments in Router element */}\n\t\t\t\t\t\t{this.props.question && <Question path=\"post\" />}\n\t\t\t\t\t\t{this.props.question && <SelfText path=\"selftext\" />}\n\t\t\t\t\t\t{this.props.question && <PickComments path=\"comments\" />}\n\t\t\t\t\t\t{this.props.question && <Final path=\"final\" />}\n\t\t\t\t\t\t<Redirect default from=\"*\" to=\"/video/\" noThrow />\n\t\t\t\t\t</Navbar>\n\t\t\t\t</Router>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nlet mapStateToProps = store => {\n\treturn {\n\t\tquestion: store.question,\n\t}\n}\n\nexport default connect(mapStateToProps)(App)","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Form, Header, Segment } from 'semantic-ui-react'\nimport { deleteTheme, editTheme, getTheme, longPollVideo, postPreview, uploadThemeFiles } from '../api'\nimport FileInput from '../FileInput'\nimport { getForkTsCheckerWebpackPluginHooks } from 'fork-ts-checker-webpack-plugin/lib/hooks'\n\nlet voices = [\n    {\n        value: \"daniel\",\n        text: \"Daniel UK\"\n    },\n    {\n        value: \"google-us\",\n        text: \"Google US\"\n    },\n]\n\nclass Theme extends React.Component {\n    state = {\n        name: \"\",\n        voice: \"\",\n\n        // Files\n        intro: null,\n        transition: null,\n        outro: null,\n\n        loading: true,\n    }\n    componentDidMount() {\n        getTheme(this.props.themeId)\n            .then(theme => {\n                this.setState(theme)\n            })\n    }\n    delete = async () => {\n        await deleteTheme(this.props.themeId)\n        navigate('/', { replace: true })\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    handleFileChange = e => {\n        e.preventDefault()\n        this.setState({ [e.target.name]: e.target.files[0] })\n    }\n    submit = () => {\n        this.setState({ loading: true })\n        editTheme(this.props.themeId, {\n            name: this.state.name,\n            voice: this.state.voice,\n        }).then(async () => {\n            const { intro, transition, outro } = this.state\n\n            // If at least one file has been selected, upload it/them.\n            if (intro || transition || outro) {\n                const data = new FormData()\n\n                intro && data.append('intro', intro)\n                outro && data.append('outro', outro)\n                transition && data.append('transition', transition)\n\n                await uploadThemeFiles(this.props.themeId, data)\n\n                this.setState({ loading: false })\n            } else {\n                this.setState({ loading: false })\n            }\n        })\n    }\n    preview = () => {\n        postPreview(this.props.themeId)\n            .then(res => {\n                console.log(res)\n                return longPollVideo(res.id)\n            })\n            .then(res => {\n                let file = res.file\n                window.open('/api/videos/' + file, '_blank')\n            })\n    }\n    render() {\n        return (\n            <Container>\n                <Form onSubmit={e => e.preventDefault()}>\n                    <Segment>\n                        <Form.Group inline>\n                            <Form.Input\n                                name=\"name\"\n                                type=\"text\"\n                                placeholder=\"Name\"\n                                value={this.state.name}\n                                onChange={this.handleChange}>\n                            </Form.Input>\n                            <Form.Select\n                                name=\"voice\"\n                                placeholder=\"Voice\"\n                                value={this.state.voice}\n                                options={voices}\n                                onChange={this.handleChange}>\n                            </Form.Select>\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Field>\n                                <Header>Intro</Header>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"intro\"\n                                    buttonOnly\n                                    label={this.state.intro ? \"Change intro\" : \"No intro\"}\n                                    onChange={this.handleFileChange}\n                                />\n                            </Form.Field>\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Field>\n                                <Header>Transition</Header>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"transition\"\n                                    buttonOnly\n                                    label={this.state.transition ? \"Change transition\" : \"No transition\"}\n                                    onChange={this.handleFileChange}\n                                />\n                            </Form.Field>\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Field>\n                                <Header>Outro</Header>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"outro\"\n                                    buttonOnly\n                                    label={this.state.outro ? \"Change outro\" : \"No outro\"}\n                                    onChange={this.handleFileChange}\n                                />\n                            </Form.Field>\n                        </Form.Group>\n                        <Form.Group inline>\n                            <Form.Button onClick={this.submit} type=\"submit\">Save</Form.Button>\n                            <Form.Button type=\"button\" color=\"red\" onClick={this.delete}>Delete</Form.Button>\n                        </Form.Group>\n                    </Segment>\n                </Form>\n                <Segment>\n                    <Button onClick={this.preview}>Preview</Button>\n                </Segment>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        themes: store.themes,\n    }\n}\n\nexport default connect(mapStateToProps)(Theme);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Form, Grid, Header, Message, Segment } from 'semantic-ui-react'\nimport { buyCredits, checkPrice } from '../api'\nimport Credits from '../Credits'\n\nclass BuyCredits extends React.Component {\n    state = {\n        credits: 10,\n        custom: false,\n        currentPrice: null,\n        stripe: null,\n\n        timeout: null,\n        perCredit: null,\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        // getCredits()\n        this.setState({ stripe: window.Stripe('pk_test_L7TCDB8LinfbSK3OzvaoaXEj00z2dt6HgK') })\n        this.changeQuantity(null, { value: this.state.credits })\n    }\n    onPurchase = async () => {\n        let { session } = await buyCredits(this.state.credits)\n        this.state.stripe.redirectToCheckout({\n            sessionId: session.id,\n        }).then(res => {\n            console.log(res)\n        })\n    }\n    changeQuantity = (_, { value }) => {\n        this.setState({ credits: value })\n\n        if (this.state.timeout !== null) {\n            clearTimeout(this.state.timeout)\n        }\n        let timeout = setTimeout(async () => {\n            let { total } = await checkPrice(value)\n            this.setState({ currentPrice: total, perCredit: total / value, timeout: null })\n        }, 200)\n        this.setState({ timeout })\n    }\n    render() {\n        return (\n            <Container>\n                <Credits />\n                <Grid>\n                    <Grid.Column>\n                        <Segment>\n                            <Header>Buy credits</Header>\n                            <Message>This is a message to show how much one credit is worth</Message>\n                            <Form>\n                                <Form.Radio name=\"credits\" label=\"10 Credits\" value={10} checked={this.state.credits === 10} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"25 Credits\" value={25} checked={this.state.credits === 25} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"50 Credits\" value={50} checked={this.state.credits === 50} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"100 Credits\" value={100} checked={this.state.credits === 100} onChange={this.changeQuantity} />\n                                <Form.Input name=\"credits\" label=\"Custom amount\" value={this.state.credits} onChange={this.changeQuantity} type=\"number\" min={1} />\n                                <Header>\n                                    <Header.Content>\n                                        €{this.state.currentPrice}\n                                    </Header.Content>\n                                    <Header.Subheader>\n                                        €{this.state.perCredit}/Credit\n                                    </Header.Subheader>\n                                </Header>\n                                <Form.Button onClick={this.onPurchase} size=\"large\">Buy</Form.Button>\n                            </Form>\n                        </Segment>\n                    </Grid.Column>\n                </Grid>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        credits: store.credits,\n    }\n}\n\nexport default connect(mapStateToProps)(BuyCredits);","import React from 'react';\n\nimport { connect } from 'react-redux'\nimport { Router, Redirect } from '@reach/router'\n\nimport Dashboard from './Dashboard/index'\nimport Login from './Login'\nimport Register from './Register'\nimport Logout from './Logout'\nimport App from './render/App'\nimport ThemeEdit from './Themes/_id'\nimport 'semantic-ui-css/semantic.min.css'\nimport BuyCredits from './BuyCredits';\n\nconst NotFound = ({ redirect = \"/\" }) => <Redirect noThrow from=\"*\" to={redirect} />\n\nclass BogRouter extends React.Component {\n    render() {\n        return (\n            this.props.loggedIn ?\n                <Router>\n                    <Dashboard path=\"/\" />\n                    <BuyCredits path=\"/buy-credits\" />\n                    <App path=\"/video/*\" />\n                    <ThemeEdit path=\"/themes/:themeId\" />\n                    <Logout path=\"/logout\" />\n                    <NotFound default />\n                </Router> :\n                <Router>\n                    <Register path=\"/register\" />\n                    <Login path=\"/login\" />\n                    <NotFound default redirect=\"/login\" />\n                </Router>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    loggedIn: state.loggedIn,\n})\n\nexport default connect(mapStateToProps)(BogRouter)","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport 'semantic-ui-css/semantic.min.css';\nimport store from './redux/store';\nimport * as serviceWorker from './render/serviceWorker';\nimport Router from './Router';\nimport { StripeProvider } from 'react-stripe-elements';\n\nReactDOM.render(\n\t<StripeProvider apiKey=\"pk_test_L7TCDB8LinfbSK3OzvaoaXEj00z2dt6HgK\">\n\t\t<Provider store={store}>\n\t\t\t<Router />\n\t\t</Provider>\n\t</StripeProvider>,\n\tdocument.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}