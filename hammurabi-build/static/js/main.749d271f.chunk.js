(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{294:function(e,t,a){e.exports=a(597)},559:function(e,t,a){},560:function(e,t,a){},595:function(e,t,a){},597:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(30),l=a.n(r),i=a(42);const o={comments:[],question:null,processed:null,stage:0,options:{song:null,theme:null},themes:[],videos:[],songs:[],loggedIn:"true"===localStorage.getItem("loggedIn")};var c=Object(i.d)(function(e=o,t){switch(t.type){case"SET_STAGE":return Object.assign({},e,{stage:t.val});case"INC_STAGE":return Object.assign({},e,{stage:e.stage+t.val});case"SET_COMMENTS":return Object.assign({},e,{comments:t.val});case"SET_PROCESSED":return Object.assign({},e,{processed:t.val});case"SET_QUESTION":return Object.assign({},e,{question:t.val});case"SET_TITLE":let a=Object.assign({},e.question,{title:t.val});return Object.assign({},e,{question:a});case"SET_OPTIONS":return Object.assign({},e,{options:t.val});case"SET_THEMES":return Object.assign({},e,{themes:t.val});case"SET_SONGS":return Object.assign({},e,{songs:t.val});case"SET_VIDEOS":return Object.assign({},e,{videos:t.val});case"LOGIN":return localStorage.setItem("loggedIn","true"),Object.assign({},e,{loggedIn:!0});case"LOGOUT":return localStorage.removeItem("loggedIn"),Object.assign({},e,{loggedIn:!1});default:return e}},!1),h=a(18),m=a(23),d=a(604),u=a(613),p=a(614),g=a(605),E=a(615),b=a(598),v=a(611),S=a(608),f=a(607);const C=()=>({type:"INC_STAGE",val:1}),y=e=>({type:"SET_COMMENTS",val:e}),T=e=>({type:"SET_THEMES",val:e});const O=(e,t={})=>("string"===typeof e&&(e="/api"+e),t.method&&"GET"!==t.method&&(t.headers||(t.headers={"Content-Type":"application/json"})),t.credentials="include",fetch(e,t).then(e=>e.ok?e.json():(401===e.status&&c.dispatch({type:"LOGOUT"}),e.json().then(e=>{throw e.error}))));let w=function(){return O("/songs").then(e=>(c.dispatch((e=>({type:"SET_SONGS",val:e}))(e)),e))},x=function(e){return O("/songs",{method:"POST",body:e,headers:{}}).then(e=>(w(),e))},k=function(e){return O("/songs/"+e,{method:"DELETE"})},I=function(e){return O("/thread/"+e)},j=function(){return O("/themes").then(e=>(c.dispatch(T(e)),e))},N=function(e){return O("/themes/"+e)},_=function(e){return O("/themes",{method:"POST",body:JSON.stringify(e)})},D=function(e,t){return O("/themes/"+e,{method:"PUT",body:JSON.stringify(t)})},P=function(e,t){return O("/themes/"+e+"/files",{method:"POST",body:t,headers:{}})},A=function(e){return O("/themes/"+e,{method:"DELETE"})},M=function(e,t,a){return O("/videos",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({questionData:e,commentData:t,options:a})})};const L=function(){return O("/videos").then(e=>(c.dispatch((e=>({type:"SET_VIDEOS",val:e}))(e)),e))};let F=function(e,t){return O("/auth",{headers:new Headers({authorization:(a=e,n=t,`Basic ${btoa(a+":"+n)}`)}),method:"POST"}).then(e=>(c.dispatch({type:"LOGIN"}),e));var a,n},B=function(e,t){return O("/register",{body:JSON.stringify({email:e,password:t}),method:"POST"})};var G=Object(h.b)(e=>({themes:e.themes}),{setThemes:T})(class extends s.a.Component{constructor(...e){super(...e),this.createTheme=(async()=>{const e=(await _({name:this.state.name})).theme;Object(m.d)(`/themes/${e}`)}),this.handleChange=((e,{name:t,value:a})=>this.setState({[t]:a}))}componentDidMount(){j()}render(){return s.a.createElement(d.a,null,s.a.createElement("div",null,this.props.themes.map(e=>s.a.createElement(m.a,{key:e._id,to:"/themes/"+e._id},s.a.createElement(v.a,{fluid:!0},s.a.createElement(v.a.Content,null,e.name))))),s.a.createElement(g.a,null),s.a.createElement(S.a,{trigger:s.a.createElement(b.a,null,"New theme"),on:"click",position:"bottom center"},s.a.createElement(d.a,{fluid:!0,textAlign:"center"},s.a.createElement(f.a,{onSubmit:this.createTheme},s.a.createElement(u.a,null,"Create new theme"),s.a.createElement(f.a.Input,{name:"name",onChange:this.handleChange,placeholder:"Name"}),s.a.createElement(f.a.Button,{type:"submit"},"Create")))))}}),W=a(62),q=a(606);var R=class extends s.a.Component{constructor(...e){super(...e),this.handleFileChange=((e,{name:t})=>this.setState({[t]:e.target.files[0]}))}render(){let e=this.props.buttonOnly;return s.a.createElement("div",null,s.a.createElement(b.a,{attached:e?null:"left",icon:!this.props.label,style:{position:"relative"}},s.a.createElement("input",{name:this.props.name,type:"file",accept:this.props.accept||null,ref:e=>this.fileInput=e,style:{opacity:0,cursor:"pointer",position:"absolute",top:0,right:0,left:0,bottom:0,width:"100%",height:"100%"},onChange:this.props.onChange}),s.a.createElement(W.a,{name:"file",size:"large"}),this.props.label&&s.a.createElement(s.a.Fragment,null,this.props.label)),!e&&s.a.createElement(q.a,{placeholder:"No file",value:this.props.file?this.props.file.name:"",readOnly:!0,onClick:()=>this.fileInput.click()}))}};var U=Object(h.b)(e=>({songs:e.songs}))(class extends s.a.Component{constructor(...e){super(...e),this.uploadSong=(async e=>{let t=e.target.files[0],a=new FormData;a.append("song",t),await x(a)}),this.deleteSong=(async e=>{await k(e._id),w()}),this.handleChange=((e,{name:t,value:a})=>this.setState({[t]:a})),this.handleFileChange=((e,{name:t})=>this.setState({[t]:e.target.files[0]}))}componentDidMount(){w()}render(){return s.a.createElement(d.a,null,s.a.createElement("div",null,this.props.songs.map((e,t)=>s.a.createElement(d.a,{fluid:!0,key:e._id},s.a.createElement(v.a,{fluid:!0},s.a.createElement(v.a.Content,null,e.name,s.a.createElement(b.a,{basic:!0,circular:!0,floated:"right",onClick:()=>this.deleteSong(e),color:"red",icon:"delete"})))))),s.a.createElement(g.a,null),s.a.createElement(R,{accept:"audio/*",buttonOnly:!0,name:"song",label:"Upload song",onChange:this.uploadSong}))}}),K=a(125);var z=Object(h.b)(e=>({videos:e.videos}))(class extends s.a.Component{componentDidMount(){L()}render(){return s.a.createElement(d.a,null,this.props.videos&&this.props.videos.map(e=>{let t=e.created.split("T"),a=Object(K.a)(t,2),n=a[0],r=a[1];return r=r.split(".")[0],s.a.createElement("a",{href:"/videos/"+e._id,target:"_blank",rel:"noopener noreferrer"},s.a.createElement(v.a,{fluid:!0},s.a.createElement(v.a.Content,null,n," ",r),s.a.createElement(v.a.Meta,null,e._id)))}))}});var H=Object(h.b)(e=>({}),{})(class extends s.a.Component{render(){return s.a.createElement(d.a,{textAlign:"center"},s.a.createElement(u.a,{as:"h1"},"Dashboard"),s.a.createElement(p.a,null,s.a.createElement(p.a.Column,{width:5},s.a.createElement(g.a,{horizontal:!0},"Videos"),s.a.createElement(E.a,null,s.a.createElement(z,null),s.a.createElement(g.a,null),s.a.createElement(m.a,{to:"/video"},s.a.createElement(b.a,{size:"big"},"Make video")))),s.a.createElement(p.a.Column,{floated:"right",width:8},s.a.createElement(g.a,{horizontal:!0},"Themes"),s.a.createElement(E.a,null,s.a.createElement(G,null)),s.a.createElement(g.a,{horizontal:!0},"Songs"),s.a.createElement(E.a,null,s.a.createElement(U,null)))))}}),J=a(612);var $=class extends s.a.Component{constructor(e){super(e),this.state={email:"",password:"",error:null,loading:!1},this.login=this.login.bind(this)}login(){this.setState({error:null,loading:!0}),F(this.state.email,this.state.password).catch(e=>{this.setState({loading:!1}),"string"===typeof e?this.setState({error:e}):console.error(e)}).then(e=>{Object(m.e)("/dashboard")})}render(){return s.a.createElement(p.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},s.a.createElement(p.a.Column,{style:{maxWidth:450}},s.a.createElement(u.a,{as:"h2"},"Log in"),s.a.createElement(f.a,{onSubmit:this.login},s.a.createElement(E.a,null,s.a.createElement(f.a.Input,{fluid:!0,placeholder:"Email",disabled:this.state.loading,type:"email",value:this.state.email,onChange:e=>this.setState({email:e.target.value})}),s.a.createElement(f.a.Input,{fluid:!0,placeholder:"Password",disabled:this.state.loading,type:"password",value:this.state.password,onChange:e=>this.setState({password:e.target.value})}),s.a.createElement(f.a.Button,{fluid:!0,type:"submit",size:"large",disabled:this.state.loading,color:"teal"},"Log in"),s.a.createElement("div",null,s.a.createElement(m.a,{to:"/register"},"Register")))),s.a.createElement(J.a,{size:"small"},"Forgot password?"),this.state.error&&s.a.createElement(J.a,{error:!0},this.state.error)))}},Q=a(610);var V=class extends s.a.Component{constructor(e){super(e),this.state={email:"",password:""},this.register=this.register.bind(this)}register(){B(this.state.email,this.state.password)}render(){return s.a.createElement(p.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},s.a.createElement(p.a.Column,{style:{maxWidth:450}},s.a.createElement(u.a,{as:"h2"},"Register"),s.a.createElement(f.a,{onSubmit:this.register},s.a.createElement(E.a,null,s.a.createElement(f.a.Input,{fluid:!0,placeholder:"Email",type:"email",value:this.state.email,onChange:e=>this.setState({email:e.target.value})}),s.a.createElement(f.a.Input,{fluid:!0,placeholder:"Password",type:"password",value:this.state.password,onChange:e=>this.setState({password:e.target.value})}),s.a.createElement(f.a.Button,{fluid:!0,type:"submit",size:"large",color:"teal"},"Register"),s.a.createElement(Q.a,null,s.a.createElement(m.a,{to:"/login"},"Log in"))))))}},Y=function(){return O("/logout").then(e=>{c.dispatch({type:"LOGOUT"})}).then(e=>{Object(m.d)("/",{replace:!0})}),s.a.createElement("div",null,"Logging out...")},X=a(25),Z=a(276),ee=a.n(Z),te=a(282);const ae=[/(f)(uck)()/,/(sh)(it)()/,/(b)(it)(ch)/,/(c)(un)(t)/,/(ni)(gg)(a)/,/(ni)(gge)(r)/,/(p)(o)(rn)/,/((?:\W|^)d)(ic)(k)/,/((?:\W|^)a)(ss)(es)(?!\w)/,/((?:\W|^)a)(ss)(\W|$)/,/((?:\W|^)r)(ap)(e|ist|ing)/,/((?:\W|^)c)(u)(m)/,/((?:\W|^)t)(i)(ts)/,/(t)(it)(ties)/,/(c)(o)(ck[^an])/,/(wh)(or)(e)/,/(p)(us)(sy)/,/(s)(e)(x)/,/(d)(ic)(k)/,/(ret)(ar)(d)/,/(a)(ss)(hat|face|head|burger|hole)/,/((?:\W|^)a)(n)(al[^oy])/,/(pe)(n)(is)/,/(va)(gi)(na)/,/(dr)(u)(gs)/,/(mast)(urb)(at)/,/(dr)(u)(gs)/];var ne=a(277),se=a.n(ne),re=a(278),le=a.n(re),ie=a(92);function oe(e,t,a){const n=t.getText();let s,r;for(;null!==(s=e.exec(n));)a(r=s.index,r+s[0].length)}let ce=[{strategy:function(e,t){ae.forEach(a=>{oe(new RegExp(a,"ig"),e,t)})},component:e=>s.a.createElement("span",{className:"highlight-danger"},e.children)},{strategy:function(e,t){oe(/(?:^|\W)edit/gim,e,t)},component:e=>s.a.createElement("span",{className:"highlight-warn"},e.children)}];class he extends s.a.Component{constructor(e){super(e),this.inlineToolbarPlugin=le()(),this.linkPlugin=se()(),this.plugins=[this.inlineToolbarPlugin,this.linkPlugin];let t=Object(X.convertFromHTML)(e.comment.data.body_html);this.state={editor:X.EditorState.createWithContent(X.ContentState.createFromBlockArray(t.contentBlocks,t.entityMap))}}handlePress(e){e.stopPropagation()}propagateHtmlChange(e){this.setState({editor:e});let t=Object(te.a)(this.state.editor.getCurrentContent());this.props.comment.data.body_html=t,this.props.onChange()}propagateEnableChange(){this.props.comment.enabled=!this.props.comment.enabled,this.props.onChange()}render(){let e=this.props,t=e.comment,a=e.onChange;return s.a.createElement("div",{className:"Comment"},s.a.createElement("input",{className:"left-box",type:"checkbox",checked:t.enabled,onChange:this.propagateEnableChange.bind(this)}),s.a.createElement("div",{onKeyDown:this.handlePress},s.a.createElement("div",{onClick:this.propagateEnableChange.bind(this)},s.a.createElement("span",{style:{color:"blue",marginRight:5}},t.data.author),s.a.createElement("span",null,t.data.score>1e3?Math.round(t.data.score/100)/10+"k":t.data.score," points"),s.a.createElement("span",null,t.data.all_awardings.map(e=>s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{src:e.icon_url,alt:"award",width:16}),e.count>1&&e.count)))),s.a.createElement(ee.a,{editorState:this.state.editor,onChange:this.propagateHtmlChange.bind(this),decorators:ce,plugins:this.plugins}),s.a.createElement(this.inlineToolbarPlugin.InlineToolbar,null,e=>s.a.createElement(s.a.Fragment,null,s.a.createElement(ie.BoldButton,e),s.a.createElement(ie.ItalicButton,e),s.a.createElement(ie.UnderlineButton,e),s.a.createElement(this.linkPlugin.LinkButton,e))),Array.isArray(t.data.replies)&&t.data.replies.map(e=>s.a.createElement(he,{key:e.data.id,comment:e,onChange:a}))))}}var me=he;a(559);let de=13.163,ue=.741;a(560);class pe extends s.a.Component{render(){let e=this.props.comment;return s.a.createElement("div",{className:"FakeComment"},s.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.data.body_html}}),e.data.replies&&e.data.replies.filter&&e.data.replies.filter(e=>e.enabled).map(e=>s.a.createElement(pe,{key:e.data.id,comment:e})))}}var ge=pe,Ee=a(127);let be=e=>Object.keys(e).filter(t=>e[t]).join(" ");var ve=class extends s.a.Component{constructor(e){super(e),this.onDragEnd=this.onDragEnd.bind(this)}onDragEnd(e){e.destination&&this.props.reorder(e.source.index,e.destination.index)}render(){return s.a.createElement(Ee.a,{onDragEnd:this.onDragEnd},s.a.createElement(Ee.c,{droppableId:"droppable"},e=>s.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,className:"draggable-container"}),this.props.items.map((e,t)=>s.a.createElement(Ee.b,{key:e.data.id,draggableId:e.data.id,index:t},a=>s.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{className:be({draggable:!0,current:this.props.current===t,enabled:e.enabled}),onClick:()=>this.props.setCurrent(t)})))),e.placeholder)))}};var Se=Object(h.b)(e=>({comments:e.comments}),{setProcessed:e=>({type:"SET_PROCESSED",val:e}),setComments:y,nextStage:C})(class extends s.a.Component{constructor(e){super(e),this.state={current:0,tooTall:!1,height:0},this.onSubmit=this.onSubmit.bind(this),this.handle=this.handle.bind(this),this.toggleCurrent=this.toggleCurrent.bind(this),this.handleKeyEvent=this.handleKeyEvent.bind(this),this.fakecomments=s.a.createRef()}handleKeyEvent(e){switch(e.code){case"KeyA":case"ArrowLeft":this.goPrev();break;case"KeyD":case"ArrowRight":this.goNext();break;case"Enter":this.onSubmit();break;default:if(0===e.code.indexOf("Digit")){let t=parseInt(e.code.replace("Digit",""));this.toggleCurrent(t)}}}componentDidMount(){window.addEventListener("keydown",this.handleKeyEvent)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyEvent)}goPrev(){this.state.current>0&&this.setState({current:this.state.current-1})}goNext(){this.state.current<this.props.comments.length-1&&this.setState({current:this.state.current+1})}onSubmit(){let e=function e(t){return t.filter(e=>e.enabled).map(e=>e.data).map(t=>{let a=Object.assign({},t);return a.replies&&(a.replies=e(a.replies)),a})}(this.props.comments);this.props.setProcessed(e),this.props.nextStage()}handle(e){this.state.chosen.has(e)?this.state.chosen.set(e):this.state.chosen.add(e),this.setState({chosen:this.state.chosen})}toggleCurrent(e){let t=Array.from(this.props.comments);if(e){let a=0,n=function t(n){if(++a===e)return n;if(Array.isArray(n.data.replies))for(let e=0;e<n.data.replies.length;e++){let a=t(n.data.replies[e]);if(a)return a}}(t[this.state.current]);if(!n)return;n.enabled=!n.enabled}else t[this.state.current].enabled=!t[this.state.current].enabled;this.props.setComments(t)}toMinSec(e){let t=Math.floor(e/60),a=("00"+Math.round(e-60*t)).slice(-2);return`${("00"+t).slice(-2)}:${a}`}calculateTotalTime(){let e=t=>{let a=t.data.body_html;return Array.isArray(t.data.replies)&&(a+=t.data.replies.filter(e=>e.enabled).map(e).reduce((e,t)=>e+t,"")),a},t=this.props.comments.filter(e=>e.enabled).map(e).map(e=>(function(e){let t=e.replace(/<.+?>/g,"").trim(),a=(n=t,n.split(/<br>|(.+?[\.,?!]+["'\)\s]+)/g).filter(e=>e.replace("\u200b"," ").trim().length>0)).length;var n;let s=t.replace(/<.+?>/g,"").split(/\s+/g).length;return{words:s,splits:a,estimate:function(e,t){return.38152203637725923*e+.2767486833003453*t}(a,s)}})(e).estimate);return Math.round(100*function(e){return e.reduce((e,t)=>e+t,0)+de+ue*e.length}(t))/100}onCurrentCommentChange(e){let t=Array.from(this.props.comments);this.props.setComments(t)}componentDidUpdate(){let e=this.fakecomments.current.clientHeight,t={},a=!1;this.state.height!==e&&(t.height=e,a=!0),this.state.tooTall!==e>450&&(t.tooTall=e>450,a=!0),a&&this.setState(t)}onReorder(e,t){this.props.setComments(((e,t,a)=>{const n=Array.from(e),s=n.splice(t,1),r=Object(K.a)(s,1)[0];return n.splice(a,0,r),n})(this.props.comments,e,t));let a=this.state.current;a===e?this.setState({current:t}):a<e&&a>t?this.setState({current:a+1}):a>e&&a<t&&this.setState({current:a-1})}render(){let e=this.props.comments[this.state.current],t=this.props.comments.filter(e=>e.enabled).length;return s.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:5}},s.a.createElement(ve,{setCurrent:e=>this.setState({current:e}),current:this.state.current,reorder:this.onReorder.bind(this),items:this.props.comments}),s.a.createElement("div",{className:"Comments"},s.a.createElement("div",null,s.a.createElement("div",{className:"top-comment"},s.a.createElement(me,{key:e.data.id,comment:e,onChange:this.onCurrentCommentChange.bind(this)})),s.a.createElement("div",{className:"options"},s.a.createElement("label",null,s.a.createElement("input",{type:"checkbox",checked:e.enabled,onChange:()=>this.toggleCurrent.bind(this)(1)}),"Enable"),s.a.createElement("div",{className:this.state.tooTall?"tooTall":""},"Height: ",this.state.height," (max=450)")),s.a.createElement("div",{className:"controls"},s.a.createElement("button",{disabled:this.state.current<=0,onClick:this.goPrev.bind(this)},"Prev"),s.a.createElement("input",{style:{width:60},type:"number",max:this.props.comments.length,min:1,value:this.state.current+1,onChange:e=>this.setState({current:Math.max(0,parseInt(e.target.value)-1||0)})}),s.a.createElement("button",{disabled:this.state.current>this.props.comments.length,onClick:this.goNext.bind(this)},"Next")),s.a.createElement("div",{className:"controls"},s.a.createElement("span",null,"Total time: ",this.toMinSec(this.calculateTotalTime()),", ",t," ",1===t?"comment":"comments"," selected"),s.a.createElement("button",{onClick:this.onSubmit},"Finish"))),s.a.createElement("div",{className:"fake-container",ref:this.fakecomments},s.a.createElement(ge,{comment:e}))))}});var fe=Object(h.b)(e=>({title:e.question.title}),{setTitle:e=>({type:"SET_TITLE",val:e}),nextStage:C})(class extends s.a.Component{onSubmit(e){e.preventDefault(),this.props.nextStage()}onChange(e){this.props.setTitle(e.target.value)}render(){return s.a.createElement("div",{className:"Question"},s.a.createElement("h1",null,"Edit question"),s.a.createElement("form",{onSubmit:this.onSubmit.bind(this)},s.a.createElement("textarea",{defaultValue:this.props.title,className:"question-title",onChange:this.onChange.bind(this),style:{width:500,fontFamily:"Noto Sans"}}),s.a.createElement("br",null),s.a.createElement("button",{type:"submit"},"Submit")))}});var Ce=Object(h.b)(null,{setComments:y,setQuestion:e=>({type:"SET_QUESTION",val:e}),nextStage:C})(class extends s.a.Component{constructor(e){super(e),this.state={input:"",loading:null,error:null},this.fetchThread=this.fetchThread.bind(this),this.onSubmit=this.onSubmit.bind(this),this.handle=this.handle.bind(this)}fetchThread(e){this.setState({error:null,loading:!0}),I(e).then(e=>{let t=e=>{let a=Object.assign({},e);return Array.isArray(a.replies)&&(a.replies=a.replies.map(t)),{enabled:!1,data:a}},a=e[1].map(t);this.props.setQuestion(e[0]),this.props.setComments(a),this.props.nextStage()}).catch(e=>{console.log(e),this.setState({error:e.message,loading:!1})})}onSubmit(e){e.preventDefault();let t=this.state.input;if(-1!==t.indexOf("comments")){let e=/\/comments\/([\w]+)/,a=t.match(e);a&&(t=a[1])}let a=t.replace(/[^\w\d]/g,"");this.fetchThread(a)}handle(e){this.setState({input:e.target.value})}render(){return s.a.createElement("div",{className:"Thread"},s.a.createElement("h1",null,"Choose a thread"),s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("input",{value:this.state.input,onChange:this.handle,placeholder:"Put thread ID or url",autoFocus:!0}),s.a.createElement("button",null,"OK")),s.a.createElement("div",null,this.state.loading&&s.a.createElement("p",{className:"loader"},"Loading..."),this.state.error&&s.a.createElement("p",{style:{color:"red"}},this.state.error)))}});var ye=Object(h.b)(e=>({question:e.question,processed:e.processed,options:e.options,themes:e.themes,songs:e.songs}),{setOptions:e=>({type:"SET_OPTIONS",val:e}),nextStage:C})(class extends s.a.Component{constructor(e){super(e),this.onSubmit=(e=>{e.preventDefault();let t={song:this.state.song,theme:this.state.theme};M(this.props.question,this.props.processed,t),this.props.nextStage()}),this.handleChange=((e,{name:t,value:a})=>this.setState({[t]:a})),this.changeSong=(e=>{let t={song:e.target.value,theme:this.props.options.theme};this.props.setOptions(t)}),this.changeTheme=(e=>{let t={song:null,theme:e.target.value};this.props.setOptions(t)}),this.state={song:null,theme:null}}componentDidMount(){j(),w()}render(){let e=this.props.themes.map(e=>({value:e._id,key:e._id,text:e.name})),t=this.props.songs.map(e=>({value:e._id,key:e._id,text:e.name}));return s.a.createElement(f.a,{className:"Thread",onSubmit:this.onSubmit},s.a.createElement(f.a.Select,{value:this.state.theme,name:"theme",options:e,onChange:this.handleChange}),s.a.createElement(f.a.Select,{clearable:!0,value:this.state.song,name:"song",options:t,onChange:this.handleChange}),s.a.createElement(f.a.Button,{type:"submit",disabled:!this.state.theme},"Send to the slaughterhouse"))}});a(595),a(596);var Te=Object(h.b)(e=>({question:e.question,processed:e.processed,stage:e.stage,options:e.options}),{prevStage:()=>({type:"INC_STAGE",val:-1}),nextStage:C})(class extends s.a.Component{render(){return s.a.createElement(d.a,{textAlign:"center"},0===this.props.stage?s.a.createElement(Ce,null):1===this.props.stage?s.a.createElement(fe,null):2===this.props.stage?s.a.createElement(Se,null):3===this.props.stage?s.a.createElement(ye,null):4===this.props.stage?s.a.createElement("div",null,s.a.createElement("h1",null,"rendering atm bro"),s.a.createElement("p",null,"You may close this tab")):null,s.a.createElement("br",null),0!==this.props.stage&&s.a.createElement("button",{style:{fontSize:12},onClick:this.props.prevStage},"GO BACK!"))}});let Oe=[{value:"daniel",text:"Daniel UK"},{value:"google-us",text:"Google US"}];var we=Object(h.b)(e=>({themes:e.themes}))(class extends s.a.Component{constructor(e){super(e),this.delete=(async()=>{await A(this.props.themeId),Object(m.d)("/",{replace:!0})}),this.handleChange=((e,{name:t,value:a})=>this.setState({[t]:a})),this.handleFileChange=((e,{name:t})=>this.setState({[t]:e.target.files[0]})),this.submit=(()=>{this.setState({loading:!0}),D(this.props.themeId,{name:this.state.name,voice:this.state.voice}).then(async()=>{const e=this.state,t=e.intro,a=e.transition,n=e.outro;if(t||a||n){const e=new FormData;t&&e.append("intro",t),n&&e.append("outro",n),a&&e.append("transition",a),await P(this.props.themeId,e),this.setState({loading:!1})}else this.setState({loading:!1})})}),this.state={name:"",voice:"",intro:null,transition:null,outro:null,loading:!0}}componentDidMount(){N(this.props.themeId).then(e=>{console.log(e),this.setState(e)})}render(){return s.a.createElement(d.a,null,s.a.createElement(f.a,{onSubmit:this.submit},s.a.createElement(E.a,null,s.a.createElement(f.a.Group,{inline:!0},s.a.createElement(f.a.Input,{name:"name",type:"text",placeholder:"Name",value:this.state.name,onChange:this.handleChange}),s.a.createElement(f.a.Select,{name:"voice",placeholder:"Voice",value:this.state.voice,options:Oe,onChange:this.handleChange})),s.a.createElement(f.a.Group,{inline:!0},s.a.createElement(f.a.Input,{name:"intro",type:"file",label:"Intro",onChange:this.handleFileChange}),s.a.createElement(f.a.Input,{name:"transition",type:"file",label:"Transition",onChange:this.handleFileChange}),s.a.createElement(f.a.Input,{name:"outro",type:"file",label:"Outro",onChange:this.handleFileChange})),s.a.createElement(f.a.Group,{inline:!0},s.a.createElement(f.a.Button,{type:"submit"},"Save"),s.a.createElement(f.a.Button,{type:"button",color:"red",onClick:this.delete},"Delete")))))}});a(257);const xe=({redirect:e="/"})=>s.a.createElement(m.b,{noThrow:!0,from:"*",to:e});var ke=Object(h.b)(e=>({loggedIn:e.loggedIn}))(class extends s.a.Component{render(){return this.props.loggedIn?s.a.createElement(m.c,null,s.a.createElement(H,{path:"/"}),s.a.createElement(Te,{path:"/video"}),s.a.createElement(we,{path:"/themes/:themeId"}),s.a.createElement(Y,{path:"/logout"}),s.a.createElement(xe,{default:!0})):s.a.createElement(m.c,null,s.a.createElement(V,{path:"/register"}),s.a.createElement($,{path:"/login"}),s.a.createElement(xe,{default:!0,redirect:"/login"}))}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(h.a,{store:c},s.a.createElement(ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[294,1,2]]]);
//# sourceMappingURL=main.749d271f.chunk.js.map