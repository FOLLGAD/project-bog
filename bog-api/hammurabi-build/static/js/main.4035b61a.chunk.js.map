{"version":3,"sources":["../../../hammurabi/src/redux/actions.js","../../../hammurabi/src/redux/store.js","../../../hammurabi/src/api.js","../../../hammurabi/src/Credits.js","../../../hammurabi/src/FrontNav.js","../../../hammurabi/src/BuyCredits/index.js","../../../hammurabi/src/FileInput.js","../../../hammurabi/src/Songs/index.js","../../../hammurabi/src/Themes/index.js","../../../hammurabi/src/Videos.js","../../../hammurabi/src/Preview.js","../../../hammurabi/src/Dashboard/index.js","../../../hammurabi/src/Logout.js","../../../hammurabi/src/render/Settings.js","../../../hammurabi/src/render/ChooseThread.js","../../../hammurabi/src/render/Final.js","../../../hammurabi/src/render/estimate.js","../../../hammurabi/src/render/TimeEstimator.js","../../../hammurabi/src/render/Navbar.js","../../../hammurabi/src/render/sanitize.js","../../../hammurabi/src/render/PickComments/Comment.js","../../../hammurabi/src/render/PickComments/SortableComments.js","../../../hammurabi/src/render/PickComments/index.js","../../../hammurabi/src/render/Question.js","../../../hammurabi/src/render/EditorComponent.js","../../../hammurabi/src/render/SelfText.js","../../../hammurabi/src/render/App.js","../../../hammurabi/src/Testing.js","../../../hammurabi/src/Themes/_id.js","../../../hammurabi/src/Admin/UserList.js","../../../hammurabi/src/Admin/index.js","../../../hammurabi/src/Account.js","../../../hammurabi/src/Support.js","../../../hammurabi/src/AuthedRouter.js","../../../hammurabi/src/Login.js","../../../hammurabi/src/Register.js","../../../hammurabi/src/DefaultRouter.js","../../../hammurabi/src/App.js","../../../hammurabi/src/render/serviceWorker.js","../../../hammurabi/src/index.js"],"names":["setQuestion","content","type","val","setComments","defaultState","comments","question","processed","song","theme","credits","themes","videos","songs","user","users","loggedIn","localStorage","getItem","process","createStore","state","action","Object","assign","title","selftext_html","includeSelftext","setItem","removeItem","jsonFetch","RequestInfo","RequestInit","method","headers","Content-Type","credentials","fetch","then","res","ok","json","status","store","dispatch","err","error","toast","console","adminGetUsers","data","setUsers","adminCreateUser","body","JSON","stringify","adminSetMultiplier","id","multiplier","adminChangePass","password","adminGiveCredits","quantity","getUser","setUser","changePassword","current","newPassword","passwordCurrent","passwordNew","getCredits","setCreditsAction","checkPrice","buyCredits","getSongs","setSongsAction","uploadSong","formData","r","deleteSong","getThread","thread","sort","mapping","comment","newcomment","Array","isArray","replies","map","enabled","getThemes","setThemesAction","getTheme","themeId","createTheme","editTheme","uploadThemeFiles","deleteTheme","deleteThemeFile","intro","transition","outro","longPollVideo","fileId","postPreview","options","postRender","getState","Accept","questionData","commentData","_postRender","getVideos","setVideosAction","authorize","email","Headers","authorization","pass","btoa","register","logout","connect","React","Component","[object Object]","args","super","this","handleChange","e","name","value","setState","componentDidMount","render","react_default","a","createElement","Segment","textAlign","secondary","Header","size","Subheader","Content","props","Loader","active","Menu","Item","header","as","Link","to","position","Dropdown","item","text","isAdmin","stripekey","custom","currentPrice","stripe","timeout","perCredit","onPurchase","async","session","redirectToCheckout","sessionId","log","changeQuantity","_","clearTimeout","setTimeout","total","window","Stripe","Container","src_FrontNav","src_Credits","Grid","Column","Message","Form","Radio","label","checked","onChange","Input","min","Math","round","Button","onClick","FileInput","buttonOnly","button","icon","style","fileInput","click","accept","ref","display","Icon","placeholder","file","labelPosition","readOnly","target","files","FormData","append","_id","handleFileChange","List","relaxed","verticalAlign","className","key","floated","origname","Divider","src_FileInput","navigate","selection","length","Popup","trigger","on","fluid","onSubmit","isNaN","limit","slice","video","disabled","finished","failed","href","date","datePad","jsdate","Date","getFullYear","getMonth","getDate","getHours","getMinutes","formatDate","rendering","preview","info","open","url","songOptions","themeOptions","unshift","Select","required","clearable","Dashboard","stackable","width","horizontal","Videos","Themes","src_Songs","src_Preview","Logout","componentWillMount","replace","Fragment","setTheme","setSong","handleTheme","handleSong","resetVideoState","input","loading","fetchThread","catch","preventDefault","indexOf","pattern","match","onlythread","handle","render_Settings","autoFocus","primary","negative","Final","done","send","outroLen","transitionLen","getFull","commentTimes","reduce","b","estimateCommentHtml","noTags","trim","splits","str","split","filter","d","words","estimate","estimateComment","time","commentArr","recAdd","push","body_html","calculateCommentList","timeInSeconds","mins","floor","hours","readableTime","c","PureComponent","justifyContent","Step","Group","render_TimeEstimator","children","foulSpanArray","findWithRegex","regex","contentBlock","callback","getText","matchArr","start","exec","index","decorators","strategy","forEach","reg","RegExp","component","Comment","constructor","p","propagateHtmlChange","html","stateToHTML","editor","getCurrentContent","onBlur","onStateChange","propagateEnableChange","inlineToolbarPlugin","createInlineToolbarPlugin","linkPlugin","createLinkPlugin","plugins","convertFromHTML","EditorState","createWithContent","ContentState","createFromBlockArray","contentBlocks","entityMap","handlePress","stopPropagation","componentWillUnmount","onKeyDown","color","marginRight","author","score","all_awardings","award","count","icon_url","src","alt","lib_default","editorState","InlineToolbar","extProps","draft_js_buttons_lib","LinkButton","Comment_Comment","toClass","classes","keys","join","SortableComments","onDragEnd","result","destination","reorder","source","react_beautiful_dnd_esm","droppableId","provided","droppableProps","innerRef","items","draggableId","draggableProps","dragHandleProps","draggable","setCurrent","setProcessed","bind","toggleCurrent","handleKeyEvent","fakecomments","createRef","code","goPrev","goNext","num","parseInt","addEventListener","removeEventListener","topComment","scrollTo","filt","recFilter","h","newS","chosen","has","set","add","commentNum","from","currentNum","reqComment","traverseOnce","i","toMinSec","seconds","fullMins","restSecs","calculateTotalTime","fullHtml","onCurrentCommentChange","s","onReorder","end","list","startIndex","endIndex","removed","splice","flexDirection","render_PickComments_SortableComments","flexGrow","paddingLeft","render_PickComments_Comment","padding","max","marginTop","setTitle","EditorComponent","createEmpty","selftext","setSelftext","setIncludeSelftext","onChangeSelftext","onChangeInclude","Checkbox","render_EditorComponent","alignItems","paddingTop","marginLeft","basic","router_es","render_Navbar","path","ChooseThread","render_Question","SelfText","render_PickComments","render_Final","default","noThrow","Testing","message","sendRender","parse","TextArea","voices","find","th","voice","voiceSpeed","previewSong","delete","submit","removeFile","inline","grouped","Field","addingUser","editingUser","selectedUser","username","creditsToGive","createUser","closeAddModal","openAddModal","setMultiplier","closeEditModal","changeUserPass","giveCredits","openEditModal","Label","Description","videoCount","Modal","onClose","Actions","step","Admin_UserList","passwordConfirm","changedPass","changePass","inputerror","NotFound","redirect","AdminPath","src_Dashboard","Support","src_BuyCredits","render_App","Logout_Logout","src_Account","src_Testing","Admin","App","login","redirectTo","height","maxWidth","views_Comment_Comment","NotFoundLogin","Register","Login","src_AuthedRouter","DefaultRouter","Boolean","location","hostname","ReactDOM","es","src_App","react_toastify","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4035b61a.chunk.js","sourcesContent":["export const resetVideoState = content => ({\n\ttype: 'RESET_VIDEOSTATE',\n\tval: content,\n})\nexport const setProcessed = content => ({\n\ttype: 'SET_PROCESSED',\n\tval: content,\n})\nexport const setUser = content => ({\n\ttype: 'SET_USER',\n\tval: content,\n})\nexport const setUsers = content => ({\n\ttype: 'SET_USERS',\n\tval: content,\n})\nexport const setQuestion = content => ({\n\ttype: 'SET_QUESTION',\n\tval: content,\n})\nexport const setComments = content => ({\n\ttype: 'SET_COMMENTS',\n\tval: content,\n})\nexport const setTheme = content => ({\n\ttype: 'SET_THEME',\n\tval: content,\n})\nexport const setSong = content => ({\n\ttype: 'SET_SONG',\n\tval: content,\n})\nexport const setCredits = content => ({\n\ttype: 'SET_CREDITS',\n\tval: content,\n})\nexport const setThemes = content => ({\n\ttype: 'SET_THEMES',\n\tval: content,\n})\nexport const setSongs = content => ({\n\ttype: 'SET_SONGS',\n\tval: content,\n})\nexport const setVideos = content => ({\n\ttype: 'SET_VIDEOS',\n\tval: content,\n})\nexport const setTitle = content => ({\n\ttype: 'SET_TITLE',\n\tval: content,\n})\nexport const setSelftext = content => ({\n\ttype: 'SET_SELFTEXT',\n\tval: content,\n})\nexport const setIncludeSelftext = content => ({\n\ttype: 'SET_INCLUDE_SELFTEXT',\n\tval: content,\n})\nexport const login = () => ({\n\ttype: 'LOGIN',\n})\nexport const logout = () => ({\n\ttype: 'LOGOUT',\n})","import { createStore } from 'redux'\n\nconst defaultState = {\n\t// Video rendering\n\tcomments: [],\n\tquestion: null,\n\tprocessed: null,\n\tsong: null,\n\ttheme: null,\n\n\t// Dashboard\n\tcredits: null,\n\tthemes: [],\n\tvideos: [],\n\tsongs: [],\n\n\tuser: {},\n\n\n\t// Admin\n\tusers: [],\n\n\tloggedIn: localStorage.getItem('loggedIn') === 'true',\n}\n\nfunction state(state = defaultState, action) {\n\tswitch (action.type) {\n\t\tcase 'RESET_VIDEOSTATE':\n\t\t\treturn { ...state, question: null, processed: null, comments: [], theme: null, song: null }\n\t\tcase 'SET_COMMENTS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tcomments: action.val,\n\t\t\t})\n\t\tcase 'SET_USER':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tuser: action.val,\n\t\t\t})\n\t\tcase 'SET_USERS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tusers: action.val,\n\t\t\t})\n\t\tcase 'SET_PROCESSED':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tprocessed: action.val,\n\t\t\t})\n\t\tcase 'SET_QUESTION':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion: action.val,\n\t\t\t})\n\t\tcase 'SET_TITLE': {\n\t\t\tlet question = Object.assign({}, state.question, { title: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion: question,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_SELFTEXT': {\n\t\t\tlet question = Object.assign({}, state.question, { selftext_html: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_INCLUDE_SELFTEXT': {\n\t\t\tlet question = Object.assign({}, state.question, { includeSelftext: action.val })\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tquestion,\n\t\t\t})\n\t\t}\n\t\tcase 'SET_THEME':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\ttheme: action.val,\n\t\t\t})\n\t\tcase 'SET_SONG':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tsong: action.val,\n\t\t\t})\n\t\tcase 'SET_CREDITS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tcredits: action.val,\n\t\t\t})\n\t\tcase 'SET_THEMES':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tthemes: action.val,\n\t\t\t})\n\t\tcase 'SET_SONGS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tsongs: action.val,\n\t\t\t})\n\t\tcase 'SET_VIDEOS':\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tvideos: action.val,\n\t\t\t})\n\t\tcase 'LOGIN':\n\t\t\tlocalStorage.setItem('loggedIn', 'true')\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tloggedIn: true,\n\t\t\t})\n\t\tcase 'LOGOUT':\n\t\t\tlocalStorage.removeItem('loggedIn')\n\t\t\treturn Object.assign({}, state, {\n\t\t\t\tloggedIn: false,\n\t\t\t})\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default process.env.NODE_ENV === \"development\" ?\n\tcreateStore(state, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()) :\n\tcreateStore(state)","import {\n\tlogin as loginAction,\n\tlogout as logoutAction,\n\tsetCredits as setCreditsAction,\n\tsetSongs as setSongsAction,\n\tsetThemes as setThemesAction,\n\tsetVideos as setVideosAction,\n\tsetQuestion,\n\tsetComments,\n\tsetUser,\n\tsetUsers\n} from './redux/actions'\nimport store from './redux/store'\nimport { toast } from 'react-toastify'\n\nlet apiurl = process.env.NODE_ENV === \"development\" ?\n\t'http://localhost:4001/api' :\n\t'/api'\n\n// The jsonFetch function is a wrapper around the native fetch().\n// It returns the response in json, and removes the \"loggedIn\" item\n// from localStorage if the response status code is 401.\n// Returns a promise that throws if the status code is not in the 200-399 range\nconst jsonFetch = (RequestInfo, RequestInit = {}) => {\n\tif (typeof RequestInfo === 'string') {\n\t\tRequestInfo = apiurl + RequestInfo\n\t}\n\tif (RequestInit.method && RequestInit.method !== \"GET\") {\n\t\tif (!RequestInit.headers) {\n\t\t\tRequestInit.headers = {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t}\n\t\t}\n\t}\n\n\tRequestInit.credentials = 'include'\n\n\treturn fetch(RequestInfo, RequestInit)\n\t\t.then(res => {\n\t\t\tif (res.ok) {\n\t\t\t\treturn res.json()\n\t\t\t} else if (res.status === 401) {\n\t\t\t\tstore.dispatch(logoutAction())\n\t\t\t}\n\t\t\treturn res.json()\n\t\t\t\t.then(err => {\n\t\t\t\t\tif (err && err.error) {\n\t\t\t\t\t\ttoast.error(err.error)\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoast.error(\"Something went wrong, try again later\")\n\t\t\t\t\t}\n\t\t\t\t\tconsole.error(err)\n\t\t\t\t\tthrow err.error // Parse as json, then throw.\n\t\t\t\t})\n\t\t})\n}\n\n// ADMIN ROUTES\n\nexport let adminGetUsers = function () {\n\treturn jsonFetch('/admin/users')\n\t\t.then(data => {\n\t\t\tstore.dispatch(setUsers(data))\n\t\t})\n}\n\nexport let adminCreateUser = function (user) {\n\treturn jsonFetch('/admin/users', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(user)\n\t})\n}\n\nexport let adminSetMultiplier = function (id, multiplier) {\n\treturn jsonFetch(`/admin/users/${id}/set-multiplier`, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify({ multiplier })\n\t})\n}\n\nexport let adminChangePass = function (id, password) {\n\treturn jsonFetch(`/admin/users/${id}/change-password`, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify({ password })\n\t})\n}\n\nexport let adminGiveCredits = function (id, quantity) {\n\treturn jsonFetch(`/admin/users/${id}/add-credits`, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify({ quantity })\n\t})\n}\n\n// NORMAL ROUTES\n\nexport let getUser = function () {\n\treturn jsonFetch('/me')\n\t\t.then(data => {\n\t\t\tstore.dispatch(setUser(data))\n\t\t})\n}\n\nexport let changePassword = function (current, newPassword) {\n\treturn jsonFetch('/me/change-password', {\n\t\tmethod: 'POST',\n\t\tbody: {\n\t\t\tpasswordCurrent: current,\n\t\t\tpasswordNew: newPassword,\n\t\t}\n\t})\n}\n\nexport let getCredits = function () {\n\treturn jsonFetch('/credits')\n\t\t.then(data => {\n\t\t\tstore.dispatch(setCreditsAction(data.credits))\n\t\t\treturn data\n\t\t})\n}\n\n// Returns { total: Number }\nexport let checkPrice = function (quantity) {\n\treturn jsonFetch('/credits/check-price', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ quantity }),\n\t})\n}\n\n// Use stripe to buy credits\n// Returns { session: String }\nexport let buyCredits = function (quantity) {\n\treturn jsonFetch('/credits/buy', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ quantity }),\n\t})\n}\n\nexport let getSongs = function () {\n\treturn jsonFetch('/songs')\n\t\t.then(songs => {\n\t\t\tstore.dispatch(setSongsAction(songs))\n\t\t\treturn songs\n\t\t})\n}\n\nexport let uploadSong = function (formData) {\n\treturn jsonFetch('/songs', {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t\theaders: {\n\t\t}\n\t})\n\t\t.then(r => {\n\t\t\tgetSongs()\n\t\t\treturn r\n\t\t})\n}\n\nexport let deleteSong = function (id) {\n\treturn jsonFetch('/songs/' + id, {\n\t\tmethod: 'DELETE',\n\t})\n}\n\nexport let getThread = function (thread, sort) {\n\treturn jsonFetch(`/thread/${thread}?sort=${sort}`)\n\t\t.then(json => {\n\t\t\tlet mapping = comment => {\n\t\t\t\tlet newcomment = Object.assign({}, comment)\n\n\t\t\t\tif (Array.isArray(newcomment.replies)) {\n\t\t\t\t\tnewcomment.replies = newcomment.replies.map(mapping)\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tenabled: false,\n\t\t\t\t\tdata: newcomment\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet comments = json[1].map(mapping)\n\n\t\t\tstore.dispatch(setQuestion(json[0]))\n\t\t\tstore.dispatch(setComments(comments))\n\n\t\t\treturn json\n\t\t})\n}\n\nexport let getThemes = function () {\n\treturn jsonFetch('/themes')\n\t\t.then(themes => {\n\t\t\tstore.dispatch(setThemesAction(themes))\n\t\t\treturn themes\n\t\t})\n}\n\nexport let getTheme = function (themeId) {\n\treturn jsonFetch('/themes/' + themeId)\n}\n\nexport let createTheme = function (data) {\n\treturn jsonFetch('/themes', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(data),\n\t})\n}\n\nexport let editTheme = function (id, data) {\n\treturn jsonFetch('/themes/' + id, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify(data),\n\t})\n}\n\nexport let uploadThemeFiles = function (id, formData) {\n\treturn jsonFetch('/themes/' + id + '/files', {\n\t\tmethod: 'POST',\n\t\tbody: formData,\n\t\theaders: {\n\t\t}\n\t})\n}\n\nexport let deleteTheme = function (id) {\n\treturn jsonFetch('/themes/' + id, {\n\t\tmethod: 'DELETE',\n\t})\n}\n\nexport let deleteThemeFile = function (id, body = { intro: false, transition: false, outro: false }) {\n\treturn jsonFetch('/themes/' + id + '/files', {\n\t\tmethod: 'DELETE',\n\t\tbody: JSON.stringify(body),\n\t})\n}\n\nexport let longPollVideo = function (fileId) {\n\treturn jsonFetch('/long-poll-video/' + fileId)\n}\n\nexport let postPreview = function (theme, song) {\n\treturn jsonFetch('/preview', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({\n\t\t\toptions: {\n\t\t\t\ttheme,\n\t\t\t\tsong,\n\t\t\t}\n\t\t}),\n\t})\n}\n\nexport let postRender = function () {\n\tlet { question, processed, theme, song } = store.getState()\n\n\tif (!question.includeSelftext) {\n\t\tdelete question.selftext_html\n\t}\n\n\treturn jsonFetch('/videos', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tquestionData: question,\n\t\t\tcommentData: processed,\n\t\t\toptions: {\n\t\t\t\ttheme,\n\t\t\t\tsong,\n\t\t\t},\n\t\t})\n\t})\n}\n\nexport let _postRender = function (state) {\n\tlet { questionData, commentData, options } = state\n\n\tif (!questionData.includeSelftext) {\n\t\tdelete questionData.selftext_html\n\t}\n\n\treturn jsonFetch('/videos', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tquestionData,\n\t\t\tcommentData,\n\t\t\toptions,\n\t\t})\n\t})\n}\n\nexport const getVideos = function () {\n\treturn jsonFetch('/videos')\n\t\t.then(r => {\n\t\t\tstore.dispatch(setVideosAction(r))\n\t\t\treturn r\n\t\t})\n}\n\nexport const openVideoLink = function (videoId) {\n\treturn window.open('/videos/' + videoId, '_blank')\n}\n\n// btoa: Binary to Ascii (Base64 only contains ascii characters)\n\n// Basic toBase64(username:password)\nconst toBasicAuth = (user, pass) => `Basic ${btoa(user + ':' + pass)}`\n\nexport let authorize = function (email, password) {\n\treturn jsonFetch('/auth', {\n\t\theaders: new Headers({\n\t\t\tauthorization: toBasicAuth(email, password),\n\t\t}),\n\t\tmethod: 'POST',\n\t}).then(r => {\n\t\tstore.dispatch(loginAction())\n\t\treturn r\n\t})\n}\n\nexport let register = function (email, password) {\n\treturn jsonFetch('/register', {\n\t\tbody: JSON.stringify({ email, password }),\n\t\tmethod: 'POST',\n\t})\n}\n\nexport let logout = function () {\n\treturn jsonFetch('/logout').then(r => {\n\t\tstore.dispatch(logoutAction())\n\t})\n}","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Header, Segment, Loader } from 'semantic-ui-react'\nimport { getCredits } from './api'\n\nclass Credits extends React.Component {\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        getCredits()\n    }\n    render() {\n        return (\n            <Segment textAlign=\"center\" secondary>\n                <Header size=\"huge\">\n                    <Header.Subheader>Your Credits</Header.Subheader>\n                    <Header.Content>\n                        {this.props.credits != null ?\n                            this.props.credits :\n                            <Loader active />}\n                    </Header.Content>\n                </Header>\n            </Segment>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        credits: store.credits,\n    }\n}\n\nexport default connect(mapStateToProps)(Credits);","import React from 'react'\nimport { Link } from '@reach/router'\nimport { connect } from 'react-redux'\nimport { Menu, Dropdown } from 'semantic-ui-react'\n\nclass FrontNav extends React.Component {\n    render() {\n        return (\n            <Menu>\n                <Menu.Item header>Reddit Video Maker</Menu.Item>\n                <Menu.Item as={Link} to=\"/\">Dashboard</Menu.Item>\n                <Menu.Item as={Link} to=\"/support\">Contact us</Menu.Item>\n                <Menu.Menu position=\"right\">\n                    <Dropdown item text=\"Account\">\n                        <Dropdown.Menu>\n                            <Dropdown.Item as={Link} to=\"/account\">My Account</Dropdown.Item>\n                            {this.props.user.isAdmin && <Dropdown.Item as={Link} to=\"/admin\">Admin</Dropdown.Item>}\n                            <Dropdown.Item as={Link} to=\"/logout\">Log out</Dropdown.Item>\n                        </Dropdown.Menu>\n                    </Dropdown>\n                </Menu.Menu>\n            </Menu>\n        )\n    }\n}\n\nlet mapStateToProps = state => ({\n    user: state.user,\n})\n\nexport default connect(mapStateToProps)(FrontNav);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Form, Grid, Header, Message, Segment } from 'semantic-ui-react'\nimport { buyCredits, checkPrice } from '../api'\nimport Credits from '../Credits'\nimport FrontNav from '../FrontNav'\n\nlet stripekey = process.env.NODE_ENV === \"production\" ? \"pk_live_Dh8aRBNWH73HfNvlOVb4cOJE00eX9d9CAv\" : \"pk_test_L7TCDB8LinfbSK3OzvaoaXEj00z2dt6HgK\"\n\nclass BuyCredits extends React.Component {\n    state = {\n        credits: 10,\n        custom: false,\n        currentPrice: null,\n        stripe: null,\n\n        timeout: null,\n        perCredit: null,\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        // getCredits()\n        this.setState({ stripe: window.Stripe(stripekey) })\n        this.changeQuantity(null, { value: this.state.credits })\n    }\n    onPurchase = async () => {\n        let { session } = await buyCredits(this.state.credits)\n        this.state.stripe.redirectToCheckout({\n            sessionId: session.id,\n        }).then(res => {\n            console.log(res)\n        })\n    }\n    changeQuantity = (_, { value }) => {\n        this.setState({ credits: value })\n\n        if (this.state.timeout !== null) {\n            clearTimeout(this.state.timeout)\n        }\n        let timeout = setTimeout(async () => {\n            let { total } = await checkPrice(value)\n            this.setState({ currentPrice: total, perCredit: total / value, timeout: null })\n        }, 200)\n        this.setState({ timeout })\n    }\n    render() {\n        return (\n            <Container>\n                <FrontNav />\n                <Credits />\n                <Grid>\n                    <Grid.Column>\n                        <Segment>\n                            <Header>Buy credits</Header>\n                            <Message>Credits are a one-time purchase. We do not save your payment information after your purchase.</Message>\n                            <p>One credit can be used to create one video.</p>\n                            <Form>\n                                <Form.Radio name=\"credits\" label=\"10 Credits\" value={10} checked={this.state.credits === 10} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"25 Credits\" value={25} checked={this.state.credits === 25} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"50 Credits\" value={50} checked={this.state.credits === 50} onChange={this.changeQuantity} />\n                                <Form.Radio name=\"credits\" label=\"100 Credits\" value={100} checked={this.state.credits === 100} onChange={this.changeQuantity} />\n                                <Form.Input name=\"credits\" label=\"Custom amount\" value={this.state.credits} onChange={this.changeQuantity} type=\"number\" min={1} />\n                                <Header>\n                                    <Header.Content>\n                                        €{this.state.currentPrice}\n                                    </Header.Content>\n                                    <Header.Subheader>\n                                        €{Math.round(this.state.perCredit * 100) / 100}/Credit\n                                    </Header.Subheader>\n                                </Header>\n                                <Form.Button onClick={this.onPurchase} size=\"large\">Buy</Form.Button>\n                            </Form>\n                        </Segment>\n                    </Grid.Column>\n                </Grid>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        credits: store.credits,\n    }\n}\n\nexport default connect(mapStateToProps)(BuyCredits);","import React from 'react'\nimport { Button, Icon, Input } from 'semantic-ui-react'\n\nclass FileInput extends React.Component {\n    render() {\n        let buttonOnly = this.props.buttonOnly\n\n        let button =\n            <Button\n                icon={!this.props.label}\n                style={{ position: 'relative' }}\n                onClick={() => this.fileInput.click()}>\n                <input\n                    name={this.props.name}\n                    type=\"file\"\n                    accept={this.props.accept || null}\n                    ref={r => this.fileInput = r}\n                    style={{ display: 'none' }}\n                    onChange={this.props.onChange} />\n                <Icon name={this.props.icon || \"file\"}\n                    size={this.props.size} />\n                {this.props.label && this.props.label}\n            </Button>\n        return (\n            buttonOnly ? button :\n                <Input\n                    {...this.props}\n                    placeholder={this.props.placeholder || \"No file\"}\n                    value={this.props.file ? this.props.file.name : ''}\n                    label={button}\n                    labelPosition=\"left\"\n                    readOnly={true}\n                    size={this.props.size}\n                    onClick={() => this.fileInput.click()} />\n        )\n    }\n}\n\nexport default FileInput;","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Divider, Icon, List, Loader } from 'semantic-ui-react'\nimport { deleteSong, getSongs, uploadSong } from '../api'\nimport FileInput from '../FileInput'\nimport './index.css'\n\nclass ThemesList extends React.Component {\n    uploadSong = async (e) => {\n        let file = e.target.files[0]\n        let formData = new FormData()\n        formData.append('song', file)\n        await uploadSong(formData)\n    }\n    deleteSong = async song => {\n        await deleteSong(song._id)\n        getSongs()\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    handleFileChange = (e, { name }) => this.setState({ [name]: e.target.files[0] })\n    componentDidMount() {\n        getSongs()\n    }\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List relaxed verticalAlign=\"middle\">\n                    {this.props.songs ? this.props.songs.map(song =>\n                        <List.Item className=\"song-item\" key={song._id}>\n                            <List.Content className=\"song-icon\" floated=\"right\" as=\"a\" onClick={() => this.deleteSong(song)} title=\"Delete song\">\n                                <Icon name=\"delete\" />\n                            </List.Content>\n                            <List.Content>\n                                <List.Header>\n                                    {song.file.origname}\n                                </List.Header>\n                            </List.Content>\n                        </List.Item>\n                    ) :\n                        <Loader active />}\n                </List>\n                <Divider></Divider>\n\n                <FileInput icon=\"music\" accept=\"audio/*\" buttonOnly name=\"song\" label=\"Upload song\" onChange={this.uploadSong} />\n                {/* <Popup trigger={<Button>Upload song</Button>}\n                    on=\"click\"\n                    position=\"bottom center\">\n                    <Container fluid textAlign=\"center\">\n                        <Form onSubmit={this.uploadSong}>\n                            <Header>Upload song</Header>\n                            <Form.Input name=\"name\" onChange={this.handleChange} placeholder=\"Name\" />\n                            <Form.Button type=\"submit\">Upload</Form.Button>\n                            <Message size=\"tiny\" color=\"yellow\">\n                                Songs that are too short will be repeated\n                            </Message>\n                        </Form>\n                    </Container>\n                </Popup> */}\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        songs: store.songs,\n    }\n}\n\nexport default connect(mapStateToProps)(ThemesList);","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Divider, Form, Header, List, Loader, Popup } from 'semantic-ui-react'\nimport { createTheme, getThemes } from '../api'\n\nclass ThemesList extends React.Component {\n    createTheme = async () => {\n        const { theme } = await createTheme({ name: this.state.name })\n        navigate(`/themes/${theme}`)\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    componentDidMount() {\n        getThemes()\n    }\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List selection>\n                    {this.props.themes ? this.props.themes.length > 0 ? this.props.themes.map(theme =>\n                        <List.Item key={theme._id} onClick={() => navigate(\"/themes/\" + theme._id)}>\n                            {/* <Link to={\"/themes/\" + theme._id}> */}\n                            <List.Content>\n                                <List.Header>{theme.name}</List.Header>\n                            </List.Content>\n                            {/* </Link> */}\n                        </List.Item>\n                    ): \n                    <p>You need to create a theme to get started. Click \"New theme\" below</p> :\n                        <Loader active />}\n                </List>\n                <Divider></Divider>\n                <Popup trigger={<Button>New theme</Button>} on=\"click\" position=\"bottom center\">\n                    <Container fluid textAlign=\"center\">\n                        <Form onSubmit={this.createTheme}>\n                            <Header>Create new theme</Header>\n                            <Form.Input name=\"name\" onChange={this.handleChange} placeholder=\"Name\"></Form.Input>\n                            <Form.Button type=\"submit\">Create</Form.Button>\n                        </Form>\n                    </Container>\n                </Popup>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        themes: store.themes,\n    }\n}\n\nexport default connect(mapStateToProps)(ThemesList);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, List, Loader } from 'semantic-ui-react'\nimport { getVideos } from './api'\n\nfunction formatDate(date) {\n    let datePad = date => (\"0\" + date).slice(-2)\n    let jsdate = new Date(date)\n    return `${jsdate.getFullYear()}-${datePad(jsdate.getMonth() + 1)}-${datePad(jsdate.getDate())} ${datePad(jsdate.getHours())}:${datePad(jsdate.getMinutes())}`\n}\n\nclass VideosList extends React.Component {\n    componentDidMount() {\n        getVideos()\n    }\n    getVideos = () => {\n        return isNaN(this.props.limit) ? this.props.videos : this.props.videos.slice(0, this.props.limit)\n    }\n    render() {\n        return (\n            <Container>\n                <List selection>\n                    {this.props.videos ? this.getVideos().map(video => {\n                        return (\n                            <List.Item disabled={!video.finished || video.failed} key={video._id} as=\"a\" href={\"/api/videos/\" + video.file}>\n                                <List.Content>\n                                    <List.Header>{video.name || \"Unnamed video\"}</List.Header>\n                                    {video.failed ? \"Failed rendering\" : (video.finished ? formatDate(video.finished) : \"Rendering...\")}\n                                </List.Content>\n                            </List.Item>\n                        )\n                    }) : <List.Item><Loader active /></List.Item>}\n                </List>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        videos: store.videos,\n    }\n}\n\nexport default connect(mapStateToProps)(VideosList);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Form, Header } from 'semantic-ui-react'\nimport { longPollVideo, postPreview, getVideos } from './api'\nimport { toast } from 'react-toastify'\n\nclass Preview extends React.Component {\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    state = {\n        song: null,\n        theme: null,\n        rendering: false,\n    }\n    preview = () => {\n        this.setState({ rendering: true })\n\n        postPreview(this.state.theme, this.state.song)\n            .then(res => {\n                getVideos()\n                return longPollVideo(res.file)\n            })\n            .then(res => {\n                toast.info('Preview is ready', {\n                    onClick: () => window.open(res.url, '_blank'),\n                })\n            })\n    }\n    render() {\n        let songOptions = this.props.songs.map(song => ({ value: song._id, key: song._id, text: song.file.origname }))\n        let themeOptions = this.props.themes.map(theme => ({ value: theme._id, key: theme._id, text: theme.name }))\n        songOptions.unshift({ value: null, key: \"\", text: \"No song\" })\n        return (\n            <Form>\n                <Header>Preview</Header>\n                <p>You can render a preview of a theme and song. It will take about 20 seconds to render, and will not cost any credits. It will show up in your videos. </p>\n                <Form.Select\n                    label=\"Theme\"\n                    required\n                    disabled={this.state.rendering}\n                    placeholder=\"Select a theme\"\n                    value={this.props.theme}\n                    name=\"theme\"\n                    options={themeOptions}\n                    onChange={this.handleChange}\n                />\n                <Form.Select\n                    label=\"Song\"\n                    clearable\n                    disabled={this.state.rendering}\n                    placeholder=\"No song\"\n                    value={this.props.song}\n                    name=\"song\"\n                    options={songOptions}\n                    onChange={this.handleChange}\n                />\n                <Form.Button disabled={this.state.rendering || !this.state.theme} onClick={this.preview}>Preview</Form.Button>\n            </Form>\n        )\n    }\n}\n\nlet mapStateToProps = state => ({\n    songs: state.songs,\n    themes: state.themes,\n})\n\nexport default connect(mapStateToProps)(Preview);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Button, Container, Divider, Grid, Header, Segment } from 'semantic-ui-react'\nimport Songs from '../Songs'\nimport Themes from '../Themes/index'\nimport Videos from '../Videos'\nimport Credits from '../Credits'\nimport FrontNav from '../FrontNav'\nimport Preview from '../Preview'\n\nclass Dashboard extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Header textAlign=\"center\" as=\"h1\">Dashboard</Header>\n\t\t\t\t<Grid stackable>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Credits</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Credits />\n\t\t\t\t\t\t\t<Button as={Link} to=\"/buy-credits\">Get more credits</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Videos</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Videos limit={8} />\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t<Button as={Link} to=\"/video\">Make video</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Themes</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Themes />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Songs</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Songs />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<Divider horizontal>Preview</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Preview />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t</Grid>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default Dashboard","import React from 'react'\nimport { logout } from './api'\nimport { navigate } from '@reach/router'\n\nexport default class Logout extends React.Component {\n    componentWillMount() {\n        this.logout();\n    }\n    logout() {\n        logout()\n            .then(r => {\n                navigate('/login', { replace: true })\n            })\n    }\n    render() {\n        return <></>\n    }\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form } from 'semantic-ui-react';\nimport { setSong, setTheme } from '../redux/actions';\n\nclass Settings extends Component {\n\thandleTheme = (e, { value }) => {\n\t\tthis.props.setTheme(value)\n\t}\n\thandleSong = (e, { value }) => {\n\t\tthis.props.setSong(value)\n\t}\n\trender() {\n\t\tlet themeOptions = this.props.themes.map(theme => ({ value: theme._id, key: theme._id, text: theme.name }))\n\t\tlet songOptions = this.props.songs.map(song => ({ value: song._id, key: song._id, text: song.file.origname }))\n\t\tsongOptions.unshift({ value: null, key: \"\", text: \"No song\" })\n\n\t\treturn (\n\t\t\t<Form onSubmit={this.props.onSubmit}>\n\t\t\t\t<Form.Select\n\t\t\t\t\tlabel=\"Theme\"\n\t\t\t\t\trequired\n\t\t\t\t\tplaceholder=\"Select a theme\"\n\t\t\t\t\tvalue={this.props.theme}\n\t\t\t\t\tname=\"theme\"\n\t\t\t\t\toptions={themeOptions}\n\t\t\t\t\tonChange={this.handleTheme}\n\t\t\t\t/>\n\t\t\t\t<Form.Select\n\t\t\t\t\tlabel=\"Song\"\n\t\t\t\t\tclearable\n\t\t\t\t\tplaceholder=\"No song\"\n\t\t\t\t\tvalue={this.props.song}\n\t\t\t\t\tname=\"song\"\n\t\t\t\t\toptions={songOptions}\n\t\t\t\t\tonChange={this.handleSong}\n\t\t\t\t/>\n\t\t\t</Form>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttheme: state.theme,\n\tsong: state.song,\n\tthemes: state.themes,\n\tsongs: state.songs,\n}), { setTheme, setSong })(Settings);","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Divider, Form, Icon, Message, Segment } from 'semantic-ui-react'\nimport { getThread } from '../api'\nimport { setComments, setQuestion, resetVideoState } from '../redux/actions'\nimport Settings from './Settings'\n\nclass Thread extends React.Component {\n\tstate = {\n\t\tinput: '',\n\t\tsort: 'top',\n\t\tloading: null,\n\t\terror: null,\n\t}\n\tcomponentWillMount() {\n\t\tthis.props.resetVideoState()\n\t}\n\tfetchThread = (thread, sort) => {\n\t\tthis.setState({ error: null, loading: true })\n\n\t\tgetThread(thread, sort)\n\t\t\t.then(() => {\n\t\t\t\tthis.setState({ loading: false })\n\t\t\t\tnavigate('/video/post')\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tthis.setState({ error: err, loading: false })\n\t\t\t})\n\t}\n\tonSubmit = e => {\n\t\te.preventDefault()\n\n\t\tlet thread = this.state.input\n\n\t\tif (thread.indexOf('comments') !== -1) {\n\t\t\tlet pattern = /\\/comments\\/([\\w]+)/\n\t\t\tlet match = thread.match(pattern)\n\n\t\t\tif (match) {\n\t\t\t\tthread = match[1]\n\t\t\t}\n\t\t}\n\n\t\tlet onlythread = thread.replace(/[^\\w\\d]/g, '')\n\n\t\tthis.fetchThread(onlythread, this.state.sort)\n\t}\n\thandle = (e, { name, value }) => this.setState({ [name]: value })\n\trender() {\n\t\tlet sortOptions = [\n\t\t\t{ text: 'Top', value: 'top' },\n\t\t\t{ text: 'Best', value: 'best' },\n\t\t\t{ text: 'New', value: 'new' },\n\t\t]\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Settings />\n\t\t\t\t<Divider />\n\t\t\t\t<Form onSubmit={this.onSubmit}>\n\t\t\t\t\t<Form.Input label=\"Thread\" required value={this.state.input} onChange={this.handle} name=\"input\" placeholder=\"Type a reddit thread ID or paste its URL\" autoFocus />\n\t\t\t\t\t<Form.Select label=\"Sort by\" required value={this.state.sort} onChange={this.handle} name=\"sort\" options={sortOptions} />\n\t\t\t\t\t<Form.Button primary loading={this.state.loading} disabled={!this.props.theme || !this.state.input}>OK<Icon name=\"angle right\" /></Form.Button>\n\t\t\t\t\t{this.state.error && <Message negative>{this.state.error}</Message>}\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttheme: state.theme,\n}), {\n\tsetComments,\n\tsetQuestion,\n\tresetVideoState,\n})(Thread);","import React, { Component } from 'react';\nimport { Button, Divider, Segment } from 'semantic-ui-react';\nimport { postRender } from '../api';\nimport Settings from './Settings';\n\nclass Final extends Component {\n    state = { loading: false, done: false }\n    send = async () => {\n        this.setState({ loading: true, done: false })\n        await postRender()\n        this.setState({ loading: false, done: true })\n    }\n    render() {\n\n        return (\n            <Segment>\n                {this.state.done ?\n                    <p>The video is now rendering.</p> :\n                    <>\n                        <p>Change settings if needed and then send to render video.</p>\n                        <Settings />\n                        <Divider />\n                        <Button primary size=\"large\" loading={this.state.loading} onClick={this.send}>Render</Button>\n                    </>\n                }\n            </Segment>\n        )\n    }\n}\n\nexport default Final","// ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 transition.mkv\n\n// Outro 13.163 s\n// Transition bright 0.843 s\n// Transition 0.741 s\n// Number of splits * X\n// Number of words * Y\n\nlet outroLen = 13.163\nlet transitionLen = 0.741\n\nfunction splitString(str) {\n\treturn str\n\t\t.split(/<br>|(.+?[\\.,?!]+[\"'\\)\\s]+)/g) // eslint-disable-line no-useless-escape\n\t\t.filter(d => d.replace('\\u200B', ' ').trim().length > 0)\n}\n\nexport function getFull(commentTimes) {\n\tlet comments = commentTimes.reduce((a, b) => a + b, 0)\n\treturn comments + outroLen + transitionLen * commentTimes.length\n}\n\nexport function estimateComment(splits, words) {\n\treturn (splits * 0.38152203637725923 + words * 0.2767486833003453) * 0.98\n}\n\nexport function estimateCommentHtml(comment) {\n\tlet noTags = comment.replace(/<.+?>/g, '').trim()\n\tlet splits = splitString(noTags).length\n\tlet words = noTags.replace(/<.+?>/g, '').split(/\\s+/g).length\n\tlet estimate = estimateComment(splits, words)\n\n\treturn {\n\t\twords,\n\t\tsplits,\n\t\testimate,\n\t}\n}\n\nexport function calculateCommentList(commentArr) {\n\tlet total = []\n\tlet recAdd = comment => {\n\t\ttotal.push(estimateCommentHtml(comment.data.body_html).estimate)\n\n\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\tcomment.data.replies\n\t\t\t\t.filter(r => r.enabled)\n\t\t\t\t.map(recAdd)\n\t\t}\n\t}\n\tcommentArr\n\t\t.filter(d => d.enabled)\n\t\t.map(recAdd)\n\n\treturn Math.round(1e2 * getFull(total)) / 1e2\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Header } from 'semantic-ui-react';\nimport { calculateCommentList, estimateCommentHtml } from './estimate';\n\nfunction readableTime(timeInSeconds) {\n    let mins = Math.floor(timeInSeconds / 60)\n    let hours = Math.floor(mins / 60)\n    mins -= hours * 60\n\n    let seconds = Math.floor(timeInSeconds) - mins * 60 - hours * 60\n\n    let str = \"\"\n    if (hours > 0) {\n        str += hours + \" h, \"\n    }\n    if (mins > 0) {\n        str += mins + \" m, \"\n    }\n    str += seconds + \" s\"\n\n    return str\n}\n\nclass TimeEstimator extends Component {\n    render() {\n        let time = calculateCommentList(this.props.comments)\n\n        if (this.props.question.includeSelftext && this.props.question.selftext_html) {\n            let selftext = this.props.question.selftext_html\n            time += estimateCommentHtml(selftext).estimate\n        }\n\n        return (\n            <div>\n                <Header>\n                    <Header.Content>Estimated video length: {readableTime(time)}</Header.Content>\n                </Header>\n                Comments selected: {this.props.comments.filter(c => c.enabled).length}\n            </div>\n        )\n    }\n}\n\nexport default connect(state => ({\n    comments: state.comments,\n    question: state.question,\n}))(TimeEstimator);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Header, Step } from 'semantic-ui-react'\nimport TimeEstimator from './TimeEstimator'\nimport { connect } from 'react-redux'\n\nclass Navbar extends React.PureComponent {\n    render() {\n        return (\n            <div>\n                {this.props.question && \n                    <div style={{ textAlign: 'center' }}>\n                        <div style={{ display: 'flex', justifyContent: 'center' }}>\n                            <Step.Group>\n                                <Step active={this.props[\"*\"] === \"post\"} as={Link} to=\"post\">Question title</Step>\n                                <Step active={this.props[\"*\"] === \"selftext\"} as={Link} to=\"selftext\">Body text</Step>\n                                <Step active={this.props[\"*\"] === \"comments\"} as={Link} to=\"comments\">Comments</Step>\n                                <Step active={this.props[\"*\"] === \"final\"} as={Link} to=\"final\">Finish</Step>\n                            </Step.Group>\n                        </div>\n                        <TimeEstimator />\n                        <Header as=\"h2\">{this.props.question.title}</Header>\n                    </div>\n                }\n                {this.props.children}\n            </div>\n        )\n    }\n}\n\nexport default connect(state => ({\n    question: state.question,\n}))(Navbar)","// These will hide the middle of the three regex groups\nexport const foulSpanArray = [\n\t/(f)(uck)()/,\n\t/(sh)(it)()/,\n\t/(b)(it)(ch)/,\n\t/(c)(un)(t)/,\n\t/(ni)(gg)(a)/,\n\t/(ni)(gge)(r)/,\n\t/(p)(o)(rn)/,\n\t/((?:\\W|^)d)(ic)(k)/,\n\t/((?:\\W|^)a)(ss)(es)(?!\\w)/,\n\t/((?:\\W|^)a)(ss)(\\W|$)/,\n\t/((?:\\W|^)r)(ap)(e|ist|ing)/,\n\t/((?:\\W|^)c)(u)(m)/,\n\t/((?:\\W|^)t)(i)(ts)/,\n\t/(t)(it)(ties)/,\n\t/(c)(o)(ck[^an])/, // doesnt match 'cockney', 'cockatrice'\n\t/(wh)(or)(e)/,\n\t/(p)(us)(sy)/,\n\t/(s)(e)(x)/,\n\t/(d)(ic)(k)/,\n\t/(ret)(ar)(d)/,\n\t/(a)(ss)(hat|face|head|burger|hole)/,\n\t/((?:\\W|^)a)(n)(al[^oy])/,\n\t/(pe)(n)(is)/,\n\t/(va)(gi)(na)/,\n\t/(dr)(u)(gs)/,\n\t/(mast)(urb)(at)/,\n\t/(dr)(u)(gs)/,\n]","import React from 'react'\nimport { EditorState, ContentState, convertFromHTML } from 'draft-js'\nimport Editor from 'draft-js-plugins-editor'\nimport { stateToHTML } from 'draft-js-export-html'\nimport { foulSpanArray } from '../sanitize'\nimport createLinkPlugin from 'draft-js-anchor-plugin'\nimport createInlineToolbarPlugin from 'draft-js-inline-toolbar-plugin'\nimport { ItalicButton, BoldButton, UnderlineButton } from 'draft-js-buttons'\n\nimport './Comment.css'\n\nfunction handleStrategy(contentBlock, callback) {\n\tfoulSpanArray.forEach(reg => {\n\t\tfindWithRegex(new RegExp(reg, 'ig'), contentBlock, callback)\n\t})\n}\n\nfunction editStrategy(contentBlock, callback) {\n\tfindWithRegex(/(?:^|\\W)edit/img, contentBlock, callback)\n}\n\nlet handleSpan = props => {\n\treturn <span className=\"highlight-danger\">{props.children}</span>\n}\n\nlet editSpan = props => {\n\treturn <span className=\"highlight-warn\">{props.children}</span>\n}\n\nfunction findWithRegex(regex, contentBlock, callback) {\n\tconst text = contentBlock.getText()\n\tlet matchArr, start\n\twhile ((matchArr = regex.exec(text)) !== null) {\n\t\tstart = matchArr.index\n\t\tcallback(start, start + matchArr[0].length)\n\t}\n}\n\nlet decorators = [\n\t{\n\t\tstrategy: handleStrategy,\n\t\tcomponent: handleSpan,\n\t},\n\t{\n\t\tstrategy: editStrategy,\n\t\tcomponent: editSpan,\n\t},\n]\n\nclass Comment extends React.Component {\n\tconstructor(p) {\n\t\tsuper(p)\n\n\t\tthis.inlineToolbarPlugin = createInlineToolbarPlugin()\n\t\tthis.linkPlugin = createLinkPlugin()\n\t\tthis.plugins = [\n\t\t\tthis.inlineToolbarPlugin,\n\t\t\tthis.linkPlugin,\n\t\t]\n\n\t\tlet d = convertFromHTML(p.comment.data.body_html)\n\t\tthis.state = { editor: EditorState.createWithContent(ContentState.createFromBlockArray(d.contentBlocks, d.entityMap)) }\n\t}\n\thandlePress(e) {\n\t\te.stopPropagation()\n\t}\n\tpropagateHtmlChange = () => {\n\t\tlet html = stateToHTML(this.state.editor.getCurrentContent())\n\n\t\tthis.props.comment.data.body_html = html\n\n\t\tthis.props.onChange()\n\t}\n\tonBlur = e => {\n\t\tthis.propagateHtmlChange()\n\t}\n\tonStateChange = editor => this.setState({ editor })\n\tpropagateEnableChange = () => {\n\t\tthis.props.comment.enabled = !this.props.comment.enabled\n\t\tthis.props.onChange()\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.propagateHtmlChange()\n\t}\n\trender() {\n\t\tlet { comment, onChange } = this.props\n\n\t\treturn (\n\t\t\t<div className=\"Comment\">\n\t\t\t\t<input className=\"left-box\" type=\"checkbox\" checked={comment.enabled} onChange={this.propagateEnableChange} />\n\t\t\t\t<div onKeyDown={this.handlePress}>\n\t\t\t\t\t<div onClick={this.propagateEnableChange}>\n\t\t\t\t\t\t<span style={{ color: \"blue\", marginRight: 5 }}>{comment.data.author}</span>\n\t\t\t\t\t\t<span>{comment.data.score >= 1e3 ? Math.round(comment.data.score / 1e2) / 1e1 + 'k' : comment.data.score} points</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{comment.data.all_awardings.map(award => <span key={award.count + award.icon_url}><img src={award.icon_url} alt=\"award\" width={16} />{award.count > 1 && award.count}</span>)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Editor\n\t\t\t\t\t\teditorState={this.state.editor}\n\t\t\t\t\t\tonChange={this.onStateChange}\n\t\t\t\t\t\tonBlur={this.onBlur}\n\t\t\t\t\t\tdecorators={decorators}\n\t\t\t\t\t\tplugins={this.plugins}\n\t\t\t\t\t/>\n\t\t\t\t\t<this.inlineToolbarPlugin.InlineToolbar>\n\t\t\t\t\t\t{extProps => <>\n\t\t\t\t\t\t\t<BoldButton {...extProps} />\n\t\t\t\t\t\t\t<ItalicButton {...extProps} />\n\t\t\t\t\t\t\t<UnderlineButton {...extProps} />\n\t\t\t\t\t\t\t<this.linkPlugin.LinkButton {...extProps} />\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</this.inlineToolbarPlugin.InlineToolbar>\n\t\t\t\t\t{Array.isArray(comment.data.replies) && comment.data.replies.map(d => <Comment key={d.data.id} comment={d} onChange={onChange} />)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Comment;","import React from 'react'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\nimport './SortableComments.css'\n\nlet toClass = classes => Object.keys(classes).filter(d => classes[d]).join(' ')\n\nclass SortableComments extends React.Component {\n\tonDragEnd = (result) => {\n\t\tif (!result.destination) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.props.reorder(result.source.index, result.destination.index)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<DragDropContext onDragEnd={this.onDragEnd}>\n\t\t\t\t<Droppable droppableId=\"droppable\">\n\t\t\t\t\t{provided => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\tclassName=\"draggable-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.props.items.map((item, index) => (\n\t\t\t\t\t\t\t\t<Draggable key={item.data.id} draggableId={item.data.id} index={index}>\n\t\t\t\t\t\t\t\t\t{provided => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\n\t\t\t\t\t\t\t\t\t\t\t{...provided.dragHandleProps}\n\t\t\t\t\t\t\t\t\t\t\tclassName={toClass({\n\t\t\t\t\t\t\t\t\t\t\t\tdraggable: true,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent: this.props.current === index,\n\t\t\t\t\t\t\t\t\t\t\t\tenabled: item.enabled,\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.props.setCurrent(index)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{index + 1}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Draggable>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Droppable>\n\t\t\t</DragDropContext>\n\t\t)\n\t}\n}\n\nexport default SortableComments","import { navigate } from '@reach/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setComments, setProcessed } from '../../redux/actions';\nimport { estimateCommentHtml, getFull } from '../estimate';\nimport Comment from './Comment';\nimport SortableComments from './SortableComments';\nimport { Segment, Container, Header, Button, Input, Icon } from 'semantic-ui-react';\n\nfunction recFilter(commentArr) {\n\tlet news = commentArr.filter(h => h.enabled)\n\t\t.map(d => d.data)\n\t\t.map(d => {\n\t\t\tlet newS = Object.assign({}, d)\n\t\t\tif (newS.replies) {\n\t\t\t\tnewS.replies = recFilter(newS.replies)\n\t\t\t}\n\t\t\treturn newS\n\t\t})\n\treturn news\n}\n\nclass PickComments extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = { current: 0 }\n\t\tthis.onSubmit = this.onSubmit.bind(this)\n\t\tthis.handle = this.handle.bind(this)\n\t\tthis.toggleCurrent = this.toggleCurrent.bind(this)\n\t\tthis.handleKeyEvent = this.handleKeyEvent.bind(this)\n\n\t\tthis.fakecomments = React.createRef()\n\t}\n\thandleKeyEvent(e) {\n\t\tswitch (e.code) {\n\t\t\tcase \"KeyA\":\n\t\t\tcase \"ArrowLeft\":\n\t\t\t\tthis.goPrev()\n\t\t\t\tbreak;\n\t\t\tcase \"KeyD\":\n\t\t\tcase \"ArrowRight\":\n\t\t\t\tthis.goNext()\n\t\t\t\tbreak\n\t\t\tcase \"Enter\":\n\t\t\t\tthis.onSubmit()\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tif (e.code.indexOf('Digit') === 0) {\n\t\t\t\t\tlet num = parseInt(e.code.replace('Digit', ''))\n\t\t\t\t\tthis.toggleCurrent(num)\n\t\t\t\t}\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeyEvent)\n\t}\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeyEvent)\n\n\t\tthis.setProcessed()\n\t}\n\tgoPrev() {\n\t\tif (this.state.current > 0) {\n\t\t\tthis.topComment.scrollTo(0, 0)\n\t\t\tthis.setState({ current: this.state.current - 1 })\n\t\t}\n\t}\n\tgoNext() {\n\t\tif (this.state.current < this.props.comments.length - 1) {\n\t\t\tthis.topComment.scrollTo(0, 0)\n\t\t\tthis.setState({ current: this.state.current + 1 })\n\t\t}\n\t}\n\tsetProcessed() {\n\t\tlet filt = recFilter(this.props.comments)\n\n\t\tthis.props.setProcessed(filt)\n\t\tconsole.log(filt)\n\t}\n\tonSubmit() {\n\t\tnavigate('/video/final')\n\t}\n\thandle(id) {\n\t\tif (this.state.chosen.has(id)) {\n\t\t\tthis.state.chosen.set(id)\n\t\t} else {\n\t\t\tthis.state.chosen.add(id)\n\t\t}\n\t\tthis.setState({\n\t\t\tchosen: this.state.chosen,\n\t\t})\n\t}\n\ttoggleCurrent(commentNum) {\n\t\tlet set = Array.from(this.props.comments)\n\n\t\tif (commentNum) {\n\t\t\tlet currentNum = 0\n\n\t\t\t// Used for checking the N:th visible comment in the tree\n\t\t\tfunction traverseOnce(comment) {\n\t\t\t\tcurrentNum++\n\t\t\t\tif (currentNum === commentNum) {\n\t\t\t\t\treturn comment\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\t\t\tfor (let i = 0; i < comment.data.replies.length; i++) {\n\t\t\t\t\t\tconst element = comment.data.replies[i];\n\t\t\t\t\t\tlet res = traverseOnce(element)\n\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\treturn res\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet reqComment = traverseOnce(set[this.state.current])\n\t\t\tif (!reqComment) {\n\t\t\t\treturn // Could not find a comment with inputted number\n\t\t\t}\n\t\t\treqComment.enabled = !reqComment.enabled\n\t\t} else {\n\t\t\tset[this.state.current].enabled = !set[this.state.current].enabled\n\t\t}\n\n\t\tthis.props.setComments(set)\n\t}\n\ttoMinSec(seconds) {\n\t\tlet fullMins = Math.floor(seconds / 60) // No. full mins\n\t\tlet restSecs = ('00' + Math.round(seconds - 60 * fullMins)).slice(-2)\n\t\tlet mins = ('00' + fullMins).slice(-2)\n\t\treturn `${mins}:${restSecs}`\n\t}\n\tcalculateTotalTime() {\n\t\tlet recAdd = comment => {\n\t\t\tlet fullHtml = comment.data.body_html\n\n\t\t\tif (Array.isArray(comment.data.replies)) {\n\t\t\t\tfullHtml += comment.data.replies\n\t\t\t\t\t.filter(r => r.enabled)\n\t\t\t\t\t.map(recAdd)\n\t\t\t\t\t.reduce((a, b) => a + b, '')\n\t\t\t}\n\n\t\t\treturn fullHtml\n\t\t}\n\t\tlet commentTimes = this.props.comments\n\t\t\t.filter(d => d.enabled)\n\t\t\t.map(recAdd)\n\t\t\t.map(b => estimateCommentHtml(b).estimate)\n\n\t\treturn Math.round(1e2 * getFull(commentTimes)) / 1e2\n\t}\n\tonCurrentCommentChange(comment) {\n\t\tlet s = Array.from(this.props.comments)\n\t\tthis.props.setComments(s)\n\t}\n\tonReorder(start, end) {\n\t\tconst reorder = (list, startIndex, endIndex) => {\n\t\t\tconst result = Array.from(list)\n\t\t\tconst [removed] = result.splice(startIndex, 1)\n\t\t\tresult.splice(endIndex, 0, removed)\n\n\t\t\treturn result\n\t\t}\n\n\t\tthis.props.setComments(reorder(this.props.comments, start, end))\n\n\t\tlet current = this.state.current\n\n\t\tif (current === start) {\n\t\t\tthis.setState({ current: end })\n\t\t} else if (current < start && current > end) {\n\t\t\tthis.setState({ current: current + 1 })\n\t\t} else if (current > start && current < end) {\n\t\t\tthis.setState({ current: current - 1 })\n\t\t}\n\t}\n\trender() {\n\t\tif (this.props.comments.length === 0) {\n\t\t\treturn (<Container>\n\t\t\t\t<Header>No comments found for this thread</Header>\n\t\t\t</Container>)\n\t\t}\n\t\tlet comment = this.props.comments[this.state.current]\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'center' }}>\n\t\t\t\t\t<SortableComments setCurrent={i => this.setState({ current: i })} current={this.state.current} reorder={this.onReorder.bind(this)} items={this.props.comments} />\n\t\t\t\t\t<div style={{ flexGrow: 1, paddingLeft: 10 }}>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<div ref={ref => this.topComment = ref}>\n\t\t\t\t\t\t\t\t<Comment key={comment.data.id} comment={comment} onChange={this.onCurrentCommentChange.bind(this)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\", padding: 10 }}>\n\t\t\t\t\t\t\t<Button disabled={this.state.current <= 0} onClick={this.goPrev.bind(this)}>\n\t\t\t\t\t\t\t\t<Icon name=\"arrow left\" />\n\t\t\t\t\t\t\t\tPrev\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Input type=\"number\" max={this.props.comments.length} min={1} value={this.state.current + 1} onChange={e => this.setState({ current: Math.max(0, parseInt(e.target.value) - 1 || 0) })} />\n\t\t\t\t\t\t\t<Button disabled={this.state.current > this.props.comments.length} onClick={this.goNext.bind(this)}>\n\t\t\t\t\t\t\t\tNext\n\t\t\t\t\t\t\t<Icon name=\"arrow right\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"space-around\", marginTop: 10 }}>\n\t\t\t\t\t\t\t<Button onClick={this.onSubmit} size=\"huge\" primary>Finish</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\tcomments: state.comments,\n}), {\n\tsetProcessed,\n\tsetComments\n})(PickComments);","import { navigate } from '@reach/router';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Header, Segment } from 'semantic-ui-react';\nimport { setTitle } from '../redux/actions';\n\nclass Question extends Component {\n\tonSubmit = e => {\n\t\te.preventDefault()\n\n\t\tnavigate('selftext')\n\t}\n\tonChange = e => {\n\t\tthis.props.setTitle(e.target.value)\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Segment>\n\t\t\t\t<Form onSubmit={this.onSubmit}>\n\t\t\t\t\t<Header size=\"large\">Edit question</Header>\n\t\t\t\t\t<Form.Input value={this.props.title} onChange={this.onChange} />\n\t\t\t\t\t<Form.Button primary type=\"submit\">Continue</Form.Button>\n\t\t\t\t</Form>\n\t\t\t</Segment>\n\t\t)\n\t}\n}\n\nexport default connect(state => ({\n\ttitle: state.question.title,\n}), { setTitle })(Question);","import React, { Component } from 'react'\nimport { foulSpanArray } from './sanitize'\n\nimport { EditorState, ContentState, convertFromHTML } from 'draft-js'\nimport Editor from 'draft-js-plugins-editor'\nimport { stateToHTML } from 'draft-js-export-html'\nimport createLinkPlugin from 'draft-js-anchor-plugin'\nimport createInlineToolbarPlugin from 'draft-js-inline-toolbar-plugin'\nimport { ItalicButton, BoldButton, UnderlineButton } from 'draft-js-buttons'\n\nfunction findWithRegex(regex, contentBlock, callback) {\n    const text = contentBlock.getText()\n    let matchArr, start\n    while ((matchArr = regex.exec(text)) !== null) {\n        start = matchArr.index\n        callback(start, start + matchArr[0].length)\n    }\n}\n\nfunction handleStrategy(contentBlock, callback) {\n    foulSpanArray.forEach(reg => {\n        findWithRegex(new RegExp(reg, 'ig'), contentBlock, callback)\n    })\n}\nfunction editStrategy(contentBlock, callback) {\n    findWithRegex(/(?:^|\\W)edit/img, contentBlock, callback)\n}\n\nlet handleSpan = props => {\n    return <span className=\"highlight-danger\">{props.children}</span>\n}\n\nlet editSpan = props => {\n    return <span className=\"highlight-warn\">{props.children}</span>\n}\n\nlet decorators = [\n    {\n        strategy: handleStrategy,\n        component: handleSpan,\n    },\n    {\n        strategy: editStrategy,\n        component: editSpan,\n    },\n]\n\nclass EditorComponent extends Component {\n    constructor(p) {\n        super(p)\n\n        this.inlineToolbarPlugin = createInlineToolbarPlugin()\n        this.linkPlugin = createLinkPlugin()\n        this.plugins = [\n            this.inlineToolbarPlugin,\n            this.linkPlugin,\n        ]\n\n        let d = convertFromHTML(p.data)\n        \n        this.state = {\n            editor: d.contentBlocks ? EditorState.createWithContent(\n                ContentState.createFromBlockArray(d.contentBlocks, d.entityMap)\n            ) : EditorState.createEmpty(),\n        }\n    }\n    handlePress = e => {\n        e.stopPropagation()\n    }\n    onChange = val => {\n        this.setState({ editor: val })\n\n        let html = stateToHTML(this.state.editor.getCurrentContent())\n\n        if (this.props.data !== html) {\n            this.props.onChange(html)\n        }\n    }\n    render() {\n        return <div>\n            <Editor\n                editorState={this.state.editor}\n                onChange={this.onChange}\n                decorators={decorators}\n                plugins={this.plugins}\n            />\n            <this.inlineToolbarPlugin.InlineToolbar>\n                {extProps => <>\n                    <BoldButton {...extProps} />\n                    <ItalicButton {...extProps} />\n                    <UnderlineButton {...extProps} />\n                    <this.linkPlugin.LinkButton {...extProps} />\n                </>}\n            </this.inlineToolbarPlugin.InlineToolbar>\n        </div>\n    }\n}\n\nexport default EditorComponent","import { navigate } from '@reach/router';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Header, Segment } from 'semantic-ui-react';\nimport { setSelftext, setIncludeSelftext } from '../redux/actions';\nimport EditorComponent from './EditorComponent';\n\nclass Selftext extends Component {\n    onSubmit = e => {\n        e.preventDefault()\n\n        navigate('/video/comments')\n    }\n    onChangeSelftext = value => {\n        this.props.setSelftext(value)\n    }\n    onChangeInclude = (e, { checked }) => {\n        this.props.setIncludeSelftext(checked)\n    }\n    render() {\n        return (\n            <Segment>\n                <Form onSubmit={this.onSubmit}>\n                    <Header size=\"large\">Edit selftext</Header>\n                    <Form.Checkbox label=\"Include selftext?\" checked={this.props.includeSelftext} onChange={this.onChangeInclude} />\n                    <Segment style={{ display: this.props.includeSelftext ? 'block' : 'none' }}>\n                        <EditorComponent onChange={this.onChangeSelftext} data={this.props.selftext} />\n                    </Segment>\n                    <Form.Button primary type=\"submit\">Continue</Form.Button>\n                </Form>\n            </Segment>\n        )\n    }\n}\n\nexport default connect(state => ({\n    selftext: state.question.selftext_html || \"\",\n    includeSelftext: state.question.includeSelftext,\n}), { setSelftext, setIncludeSelftext })(Selftext);","import { Link, Redirect, Router } from '@reach/router'\nimport 'draft-js-inline-toolbar-plugin/lib/plugin.css'\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Button, Container, Header } from 'semantic-ui-react'\nimport { getSongs, getThemes } from '../api'\nimport SelectThread from './ChooseThread'\nimport Final from './Final'\nimport Navbar from './Navbar'\nimport PickComments from './PickComments/index'\nimport Question from './Question'\nimport SelfText from './SelfText'\n\n\nclass App extends Component {\n\tcomponentDidMount() {\n\t\tgetThemes()\n\t\tgetSongs()\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<div style={{ display: 'flex', alignItems: 'center' }}>\n\t\t\t\t\t<Header style={{ paddingTop: 10 }} as=\"h1\">\n\t\t\t\t\t\t<Header.Content>Reddit Video Maker</Header.Content>\n\t\t\t\t\t\t<Header.Subheader>Create video</Header.Subheader>\n\t\t\t\t\t</Header>\n\t\t\t\t\t<Button style={{ marginLeft: 20 }} basic as={Link} to=\"/\">Go back</Button>\n\t\t\t\t</div>\n\t\t\t\t<Router>\n\t\t\t\t\t<Navbar path=\"/\">\n\t\t\t\t\t\t<SelectThread path=\"/\" />\n\t\t\t\t\t\t{/* Can't have fragments in Router element */}\n\t\t\t\t\t\t{this.props.question && <Question path=\"post\" />}\n\t\t\t\t\t\t{this.props.question && <SelfText path=\"selftext\" />}\n\t\t\t\t\t\t{this.props.question && <PickComments path=\"comments\" />}\n\t\t\t\t\t\t{this.props.question && <Final path=\"final\" />}\n\t\t\t\t\t\t<Redirect default from=\"*\" to=\"/video/\" noThrow />\n\t\t\t\t\t</Navbar>\n\t\t\t\t</Router>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nlet mapStateToProps = store => {\n\treturn {\n\t\tquestion: store.question,\n\t}\n}\n\nexport default connect(mapStateToProps)(App)","import React from 'react';\nimport { Container, Form, Message, Segment } from 'semantic-ui-react';\nimport { _postRender } from './api';\n\nclass Testing extends React.Component {\n    state = { text: \"\", message: null }\n    onChange = (_, { name, value }) => this.setState({ [name]: value })\n    sendRender = () => {\n        let json = JSON.parse(this.state.text) // Parse the text as json\n        _postRender(json) // Send it to render\n            .then(() => {\n                this.setState({ message: \"Rendering...\" })\n            })\n    }\n    render() {\n        return (\n            <Container>\n                <Segment>\n                    <Form>\n                        <Form.TextArea value={this.state.text} name=\"text\" onChange={this.onChange} />\n                        <Form.Button onClick={this.sendRender}>Render</Form.Button>\n                        {this.state.message && <Message>{this.state.message}</Message>}\n                    </Form>\n                </Segment>\n            </Container>\n        )\n    }\n}\n\nexport default Testing","import { navigate } from '@reach/router'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Divider, Form, Header, Segment } from 'semantic-ui-react'\nimport { deleteTheme, deleteThemeFile, editTheme, getTheme, uploadThemeFiles } from '../api'\nimport FileInput from '../FileInput'\nimport FrontNav from '../FrontNav'\n\nlet voices = [\n    {\n        value: \"daniel\",\n        text: \"Daniel UK\"\n    },\n    {\n        value: \"google-us\",\n        text: \"Google US\"\n    },\n]\n\nclass Theme extends React.Component {\n    state = {\n        name: \"\",\n        voice: \"\",\n        voiceSpeed: 1,\n\n        // Files\n        intro: null,\n        transition: null,\n        outro: null,\n\n        loading: true,\n\n        previewSong: false,\n    }\n    componentDidMount() {\n        getTheme(this.props.themeId)\n            .then(theme => {\n                this.setState(theme)\n            })\n    }\n    delete = async () => {\n        await deleteTheme(this.props.themeId)\n        navigate('/', { replace: true })\n    }\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    handleFileChange = e => {\n        e.preventDefault()\n        this.setState({ [e.target.name]: e.target.files[0] })\n    }\n    submit = () => {\n        this.setState({ loading: true })\n        editTheme(this.props.themeId, {\n            name: this.state.name,\n            voice: this.state.voice,\n            voiceSpeed: this.state.voiceSpeed,\n        }).then(async () => {\n            const { intro, transition, outro } = this.state\n\n            // If at least one file has been selected, upload it/them.\n            if (intro || transition || outro) {\n                const data = new FormData()\n\n                intro && data.append('intro', intro)\n                outro && data.append('outro', outro)\n                transition && data.append('transition', transition)\n\n                await uploadThemeFiles(this.props.themeId, data)\n\n                this.setState({ loading: false })\n            } else {\n                this.setState({ loading: false })\n            }\n        })\n    }\n    removeFile = type => {\n        deleteThemeFile(this.props.themeId, { [type]: true })\n    }\n    render() {\n        return (\n            <Container>\n                <FrontNav />\n                <Form onSubmit={e => e.preventDefault()}>\n                    <Segment>\n                        <Header>Edit theme</Header>\n                        <p>Themes consist of an intro, a transition, an outro, and a voice. You can have several themes on one account. The files can be a maximum of 25MB each. All files are optional. </p>\n                        <p><b>Important: Make sure all files are 1920x1080 in size.</b></p>\n                        <Divider />\n                        <Form.Group inline>\n                            <Form.Input\n                                name=\"name\"\n                                type=\"text\"\n                                placeholder=\"Name\"\n                                value={this.state.name}\n                                onChange={this.handleChange}>\n                            </Form.Input>\n                            <Form.Select\n                                name=\"voice\"\n                                placeholder=\"Voice\"\n                                value={this.state.voice}\n                                options={voices}\n                                onChange={this.handleChange}>\n                            </Form.Select>\n\n                            {/* <Form.Input\n                                name=\"voiceSpeed\"\n                                type=\"number\"\n                                placeholder=\"Voice speed (default 1)\"\n                                step={0.01}\n                                min={0.2}\n                                max={5}\n                                value={this.state.voiceSpeed}\n                                onChange={this.handleChange}>\n                            </Form.Input> */}\n\n                        </Form.Group>\n                        <Form.Group grouped>\n                            <Header>Intro</Header>\n                            <Form.Field inline>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"intro\"\n                                    buttonOnly\n                                    label={this.state.intro ? \"Change intro\" : \"No intro\"}\n                                    onChange={this.handleFileChange}\n                                />\n                                <label>{this.state.intro && this.state.intro.origname}</label>\n                            </Form.Field>\n                        </Form.Group>\n                        <Form.Group grouped>\n                            <Header>Transition</Header>\n                            <Form.Field inline>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"transition\"\n                                    buttonOnly\n                                    label={this.state.transition ? \"Change transition\" : \"No transition\"}\n                                    onChange={this.handleFileChange}\n                                />\n                                <label>{this.state.transition && this.state.transition.origname}</label>\n                                {/* {this.state.transition.origname && <Button icon=\"trash\" secondary size=\"mini\" onClick={() => this.removeFile('transition')}></Button>} */}\n                            </Form.Field>\n                        </Form.Group>\n                        <Form.Group grouped>\n                            <Header>Outro</Header>\n                            <Form.Field inline>\n                                <FileInput\n                                    accept=\"video/*\"\n                                    name=\"outro\"\n                                    buttonOnly\n                                    label={this.state.outro ? \"Change outro\" : \"No outro\"}\n                                    onChange={this.handleFileChange}\n                                />\n                                <label>{this.state.outro && this.state.outro.origname}</label>\n                            </Form.Field>\n                        </Form.Group>\n                        <Divider />\n                        <Form.Group inline>\n                            <Form.Button floated=\"right\" onClick={this.submit} type=\"submit\">Save</Form.Button>\n                            <Form.Button floated=\"right\" type=\"button\" color=\"red\" onClick={this.delete}>Delete</Form.Button>\n                        </Form.Group>\n                    </Segment>\n                </Form>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = (state, props) => ({\n    theme: state.themes.find(th => th._id === props.themeId),\n})\n\nexport default connect(mapStateToProps)(Theme);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Divider, Header, List, Loader, Modal, Form, Button, Label, Message } from 'semantic-ui-react'\nimport { adminGetUsers, adminCreateUser, adminChangePass, adminGiveCredits, adminSetMultiplier } from '../api'\n\nclass UserList extends React.Component {\n    state = {\n        addingUser: false,\n        editingUser: false,\n        selectedUser: null,\n        email: \"\",\n        username: \"\",\n        password: \"\",\n        multiplier: 0,\n        creditsToGive: 0,\n        loading: false,\n    }\n    componentDidMount() {\n        adminGetUsers()\n    }\n    createUser = async () => {\n        this.setState({ loading: true })\n        await adminCreateUser({ email: this.state.email || null, username: this.state.username || null, password: this.state.password })\n        this.setState({ loading: false })\n        adminGetUsers()\n        this.closeAddModal()\n    }\n    openAddModal = () => this.setState({ addingUser: true, editingUser: false, loading: false, username: \"\", email: \"\", password: \"\" })\n    closeAddModal = () => this.setState({ addingUser: false })\n\n    setMultiplier = async () => {\n        this.setState({ loading: true })\n        await adminSetMultiplier(this.state.selectedUser._id, this.state.multiplier)\n        this.setState({ loading: false })\n        adminGetUsers()\n        this.closeEditModal()\n    }\n    changeUserPass = async () => {\n        this.setState({ loading: true })\n        await adminChangePass(this.state.selectedUser._id, this.state.password)\n        this.setState({ loading: false })\n        this.closeEditModal()\n    }\n    giveCredits = async () => {\n        this.setState({ loading: true })\n        await adminGiveCredits(this.state.selectedUser._id, this.state.creditsToGive)\n        this.setState({ loading: false, creditsToGive: 0 })\n        adminGetUsers()\n        this.closeEditModal()\n    }\n    openEditModal = (user) => this.setState({ addingUser: false, editingUser: true, loading: false, email: user.email, username: user.username, password: user.password, selectedUser: user, multiplier: user.multiplier })\n    closeEditModal = () => this.setState({ editingUser: false })\n\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n    render() {\n        return (\n            <Container textAlign=\"left\">\n                <List selection>\n                    {this.props.users ? this.props.users.map(user =>\n                        <List.Item key={user._id} onClick={() => this.openEditModal(user)}>\n                            <List.Content>\n                                <List.Header>{user.email || user.username} {user.isAdmin && <Label size=\"tiny\" color=\"red\">admin</Label>}</List.Header>\n                                <List.Description>{user.credits} credits</List.Description>\n                                <List.Description>{user.videoCount} videos made</List.Description>\n                            </List.Content>\n                        </List.Item>\n                    ) : <Loader active />}\n                </List>\n                <Divider />\n                <Button onClick={this.openAddModal}>Create user</Button>\n                {/* Adding Modal */}\n                <Modal open={this.state.addingUser} onClose={this.closeAddModal}>\n                    <Modal.Content>\n                        <Header>Add user</Header>\n                    </Modal.Content>\n                    <Modal.Content>\n                        <Form>\n                            <Form.Input placeholder=\"Username\" type=\"text\" name=\"username\" value={this.state.username} onChange={this.handleChange} />\n                            <Form.Input placeholder=\"Email\" type=\"email\" name=\"email\" value={this.state.email} onChange={this.handleChange} />\n                            <Form.Input placeholder=\"Password\" type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange} />\n                        </Form>\n                    </Modal.Content>\n                    <Modal.Actions>\n                        <Form.Button primary onClick={this.createUser}>Create</Form.Button>\n                    </Modal.Actions>\n                </Modal>\n                {/* Editing Modal */}\n                <Modal open={this.state.editingUser} onClose={this.closeEditModal}>\n                    <Modal.Content>\n                        <Header>Give credits</Header>\n                    </Modal.Content>\n                    <Modal.Content>\n                        <Form loading={this.state.loading}>\n                            <Header>Current credits: {this.state.selectedUser && this.state.selectedUser.credits}</Header>\n                            <Form.Input type=\"number\" name=\"creditsToGive\" step={1} value={this.state.creditsToGive} onChange={this.handleChange} />\n                        </Form>\n                    </Modal.Content>\n                    <Modal.Actions>\n                        <Form.Button primary onClick={this.giveCredits} loading={this.state.loading}>Give credits</Form.Button>\n                    </Modal.Actions>\n                    <Divider />\n                    <Modal.Content>\n                        <Header>Change user password</Header>\n                    </Modal.Content>\n                    <Modal.Content>\n                        <Form>\n                            <Form.Input disabled placeholder=\"Email or username\" type=\"text\" name=\"email\" value={this.state.email || this.state.username} onChange={this.handleChange} />\n                            <Form.Input placeholder=\"Password\" type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange} />\n                        </Form>\n                    </Modal.Content>\n                    <Modal.Actions>\n                        <Form.Button primary onClick={this.changeUserPass} loading={this.state.loading}>Change password</Form.Button>\n                    </Modal.Actions>\n                    <Divider />\n                    <Modal.Content>\n                        <Header>Set price modifier</Header>\n                    </Modal.Content>\n                    <Modal.Content>\n                        {this.state.multiplier > 1 && <Message color=\"negative\">This should probably be less than 1</Message>}\n                        <Form>\n                            <Form.Input placeholder=\"Price multiplier\" type=\"number\" name=\"multiplier\" min={0} step={0.01} value={this.state.multiplier} onChange={this.handleChange} />\n                        </Form>\n                    </Modal.Content>\n                    <Modal.Actions>\n                        <Form.Button primary onClick={this.setMultiplier} loading={this.state.loading}>Set modifier</Form.Button>\n                    </Modal.Actions>\n                </Modal>\n            </Container>\n        )\n    }\n}\n\nlet mapStateToProps = store => {\n    return {\n        users: store.users,\n    }\n}\n\nexport default connect(mapStateToProps)(UserList);","import { Link } from '@reach/router'\nimport React from 'react'\nimport { Button, Container, Divider, Grid, Header, Segment } from 'semantic-ui-react'\nimport Credits from '../Credits'\nimport FrontNav from '../FrontNav'\nimport UserList from './UserList'\n\nclass Dashboard extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Header textAlign=\"center\" as=\"h1\">Admin Dashboard</Header>\n\t\t\t\t<Grid stackable>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Credits</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<Credits />\n\t\t\t\t\t\t\t<Button as={Link} to=\"/buy-credits\">Buy credits</Button>\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t\t<Grid.Column width={8}>\n\t\t\t\t\t\t<Divider horizontal>Users</Divider>\n\t\t\t\t\t\t<Segment>\n\t\t\t\t\t\t\t<UserList />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t</Grid.Column>\n\t\t\t\t</Grid>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nexport default Dashboard","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Container, Form, Segment, Header, Message } from 'semantic-ui-react';\nimport FrontNav from './FrontNav';\nimport { changePassword } from './api';\nimport { toast } from 'react-toastify';\n\nclass Account extends React.Component {\n\thandleChange = (e, { name, value }) => this.setState({ [name]: value })\n\tstate = {\n\t\tcurrent: \"\",\n\t\tpassword: \"\",\n\t\tpasswordConfirm: \"\",\n\t\tchangedPass: false,\n\t\tloading: false,\n\t}\n\tchangePass = async () => {\n\t\tthis.setState({ loading: true })\n\t\tawait changePassword(this.state.current, this.state.password)\n\t\t\t.catch(err => {\n\t\t\t\ttoast.error(\"Something went wrong\")\n\t\t\t})\n\t\tthis.setState({ changePass: true, loading: false })\n\t}\n\trender() {\n\t\tlet inputerror = this.state.passwordConfirm.length > 0 && this.state.password !== this.state.passwordConfirm\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Segment>\n\t\t\t\t\t<Header>Change password</Header>\n\t\t\t\t\t{this.state.changedPass ? <p>Password updated!</p>\n\t\t\t\t\t\t: <Form onSubmit={this.changePass}>\n\t\t\t\t\t\t\t<Form.Input label=\"Email\" name=\"email\" value={this.props.user.email} disabled />\n\t\t\t\t\t\t\t{this.props.user.username && <Form.Input label=\"Username\" name=\"username\" value={this.props.user.username} disabled />}\n\t\t\t\t\t\t\t<Form.Input placeholder=\"Current password\" label=\"Current password\" name=\"current\" type=\"password\" onChange={this.handleChange} required />\n\t\t\t\t\t\t\t<Form.Input placeholder=\"New password\" label=\"New password\" name=\"password\" type=\"password\" onChange={this.handleChange} required />\n\t\t\t\t\t\t\t<Form.Input placeholder=\"Confirm password\" label=\"Confirm password\" name=\"passwordConfirm\" type=\"password\" onChange={this.handleChange} required />\n\t\t\t\t\t\t\t{inputerror && <Message negative>Passwords do not match</Message>}\n\t\t\t\t\t\t\t<Form.Button primary type=\"submit\" disabled={!this.state.current || !this.state.passwordConfirm || inputerror}>Change password</Form.Button>\n\t\t\t\t\t\t</Form>}\n\t\t\t\t</Segment>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tuser: state.user,\n})\n\nexport default connect(mapStateToProps)(Account)","import React from 'react';\nimport { connect } from 'react-redux'\nimport { Container, Segment, Header } from 'semantic-ui-react';\nimport FrontNav from './FrontNav';\n\nclass Account extends React.Component {\n\thandleChange = (e, { name, value }) => this.setState({ [name]: value })\n\trender() {\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<FrontNav />\n\t\t\t\t<Segment>\n\t\t\t\t\t<Header>Contact us</Header>\n                    <p>For support, bug reports or business proposals, don't hesitate contacting us at <a href=\"mailto:support@redditvideomaker.com\">support@redditvideomaker.com</a></p>\n\t\t\t\t</Segment>\n\t\t\t</Container>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tuser: state.user,\n})\n\nexport default connect(mapStateToProps)(Account)","import { Redirect, Router } from '@reach/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport 'semantic-ui-css/semantic.min.css';\nimport BuyCredits from './BuyCredits';\nimport Dashboard from './Dashboard/index';\nimport Logout from './Logout';\nimport App from './render/App';\nimport Testing from './Testing';\nimport ThemeEdit from './Themes/_id';\nimport { getUser } from './api';\nimport Admin from './Admin'\nimport Account from './Account'\nimport Support from './Support'\n\nconst NotFound = ({ redirect = \"/\" }) => <Redirect noThrow from=\"*\" to={redirect} />\n\nconst AdminPath = props => <div>{props.children}</div>\n\nclass AuthedRouter extends React.Component {\n    componentWillMount() {\n        getUser()\n    }\n    render() {\n        return (\n                <Router>\n                    <Dashboard path=\"/\" />\n                    <Support path=\"/support\" />\n                    <BuyCredits path=\"/buy-credits\" />\n                    <App path=\"/video/*\" />\n                    <ThemeEdit path=\"/themes/:themeId\" />\n                    <Logout path=\"/logout\" />\n                    <Account path=\"/account\" />\n                    <Testing path=\"/__testing_ground\" />\n                    <AdminPath path=\"/admin\">\n                        <Admin path=\"/\" />\n                    </AdminPath>\n                    <NotFound default />\n                </Router>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    user: state.user,\n})\n\nexport default connect(mapStateToProps)(AuthedRouter)","import React from 'react';\nimport { Grid, Header, Segment, Form, Message } from 'semantic-ui-react'\nimport { authorize } from './api'\nimport { Link, redirectTo } from '@reach/router'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            email: \"\",\n            password: \"\",\n            error: null,\n            loading: false,\n        }\n\n        this.login = this.login.bind(this)\n    }\n    login() {\n        this.setState({ error: null, loading: true })\n        authorize(this.state.email, this.state.password)\n            .catch(err => {\n                this.setState({ loading: false })\n                if (typeof err === \"string\") {\n                    this.setState({ error: err })\n                } else {\n                    console.error(err)\n                }\n            })\n            .then(d => {\n                redirectTo('/dashboard')\n            })\n    }\n    render() {\n        return (\n            <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n                <Grid.Column style={{ maxWidth: 450 }}>\n                    <Header as=\"h2\">Log in</Header>\n                    <Form onSubmit={this.login}>\n                        <Segment>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Email or username\"\n                                disabled={this.state.loading}\n                                type=\"text\"\n                                value={this.state.email}\n                                onChange={d => this.setState({ email: d.target.value })}>\n                            </Form.Input>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Password\"\n                                disabled={this.state.loading}\n                                type=\"password\"\n                                value={this.state.password}\n                                onChange={d => this.setState({ password: d.target.value })}>\n                            </Form.Input>\n                            <Form.Button\n                                fluid\n                                type=\"submit\"\n                                size=\"large\"\n                                disabled={this.state.loading}\n                                color=\"teal\">\n                                Log in\n                            </Form.Button>\n                            <div><Link to=\"/register\">Register</Link></div>\n                        </Segment>\n                    </Form>\n                    <Message size=\"small\">Forgot password?</Message>\n                    {this.state.error && <Message error>{this.state.error}</Message>}\n                </Grid.Column>\n            </Grid>\n        )\n    }\n}\n\nexport default App;","import React from 'react';\nimport { Grid, Header, Segment, Form, Comment } from 'semantic-ui-react'\nimport { register } from './api'\nimport { Link } from '@reach/router'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            email: \"\",\n            password: \"\",\n        }\n\n        this.register = this.register.bind(this)\n    }\n    register() {\n        register(this.state.email, this.state.password)\n    }\n    render() {\n        return (\n            <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n                <Grid.Column style={{ maxWidth: 450 }}>\n                    <Header as=\"h2\">Register</Header>\n                    <Form onSubmit={this.register}>\n                        <Segment>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Email\"\n                                type=\"email\"\n                                value={this.state.email}\n                                onChange={d => this.setState({ email: d.target.value })}>\n                            </Form.Input>\n                            <Form.Input\n                                fluid\n                                placeholder=\"Password\"\n                                type=\"password\"\n                                value={this.state.password}\n                                onChange={d => this.setState({ password: d.target.value })}>\n                            </Form.Input>\n                            <Form.Button\n                                fluid\n                                type=\"submit\"\n                                size=\"large\"\n                                color=\"teal\">\n                                Register\n                            </Form.Button>\n                            <Comment><Link to=\"/login\">Log in</Link></Comment>\n                        </Segment>\n                    </Form>\n                </Grid.Column>\n            </Grid>\n        )\n    }\n}\n\nexport default App;","import { Redirect, Router } from '@reach/router';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport 'semantic-ui-css/semantic.min.css';\nimport Login from './Login';\nimport Register from './Register';\n\nconst NotFoundLogin = ({ redirect = \"/login\" }) => <Redirect noThrow from=\"*\" to={redirect} />\n\nclass BogRouter extends React.Component {\n    render() {\n        return (\n            <Router>\n                <Register path=\"/register\" />\n                <Login path=\"/login\" />\n                <NotFoundLogin default />\n            </Router>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    loggedIn: state.loggedIn,\n})\n\nexport default connect(mapStateToProps)(BogRouter)","import React from 'react';\nimport { connect } from 'react-redux';\nimport 'semantic-ui-css/semantic.min.css';\nimport AuthedRouter from './AuthedRouter';\nimport DefaultRouter from './DefaultRouter';\n\nclass App extends React.Component {\n    render() {\n        return (\n            this.props.loggedIn ? <AuthedRouter /> : <DefaultRouter />\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    loggedIn: state.loggedIn,\n})\n\nexport default connect(mapStateToProps)(App)","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'semantic-ui-css/semantic.min.css';\nimport App from './App';\nimport './index.css';\nimport store from './redux/store';\nimport * as serviceWorker from './render/serviceWorker';\n\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App />\n\t\t<ToastContainer position=\"bottom-right\" />\n\t</Provider>,\n\tdocument.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}